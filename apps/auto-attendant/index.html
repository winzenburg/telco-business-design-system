<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Business VoiceEdge® - Automated Attendants</title>
  <!-- Comcast Business Design System Styles -->
  <link rel="stylesheet" href="./public/styles.css">
  <script src="https://unpkg.com/lucide@latest"></script>
  <style>
    /* App-specific styles - All core styles are now in design system */
    /* Only custom overrides and app-specific layouts remain here */

    .sidebar-item.active .sidebar-item-icon {
      background: #F5F8FF;
    }

    .sidebar-item-icon svg {
      width: 18px;
      height: 18px;
    }

    .sidebar-item.active .sidebar-item-icon svg {
      color: #0D62FF;
    }

    /* App-specific page layouts */
    .page-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 24px;
    }

    .page-title {
      font-size: 12px;
      font-weight: 600;
      color: #2B2D3F;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 8px;
    }

    .location-info {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 20px;
      font-weight: 600;
      color: #2B2D3F;
    }

    .card {
      background: white;
      border-radius: 4px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      margin-bottom: 24px;
    }

    .card-header {
      padding: 20px 24px;
      border-bottom: 1px solid #E5E7EB;
    }

    .card-title {
      font-size: 16px;
      font-weight: 600;
      color: #2B2D3F;
      margin: 0;
    }

    .card-body {
      padding: 24px;
    }

    /* Action buttons - using design system colors */
    .action-button {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 12px 24px;
      background: white;
      color: #0D62FF;
      border: 1px solid #DDDDE2;
      border-radius: 4px;
      font-size: 13px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      cursor: pointer;
      transition: all 0.15s;
      text-decoration: none;
    }

    .action-button:hover {
      background: #FCFCFC;
      border-color: #0D62FF;
    }

    .action-button-primary {
      background: #0D62FF;
      color: white;
      border-color: #0D62FF;
    }

    .action-button-primary:hover {
      background: #0A4ECC;
      border-color: #0A4ECC;
    }

    .action-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 16px;
      margin-bottom: 24px;
    }

    .action-card {
      background: white;
      border: 1px solid #E5E7EB;
      border-radius: 4px;
      padding: 24px;
      text-align: center;
      cursor: pointer;
      transition: all 0.15s;
    }

    .action-card:hover {
      border-color: #0D62FF;
      box-shadow: 0 2px 8px rgba(13, 98, 255, 0.1);
    }

    .action-card i {
      color: #0D62FF;
      margin-bottom: 12px;
    }

    .action-card-title {
      font-size: 13px;
      font-weight: 600;
      color: #0D62FF;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 16px;
      margin-bottom: 24px;
    }

    .stat-card {
      background: white;
      border: 1px solid #E5E7EB;
      border-radius: 4px;
      padding: 20px;
    }

    .stat-value {
      font-size: 32px;
      font-weight: 700;
      color: #2B2D3F;
      margin-bottom: 4px;
    }

    .stat-label {
      font-size: 13px;
      color: #70717D;
      font-weight: 500;
    }

    .stat-change {
      display: inline-block;
      padding: 2px 8px;
      border-radius: 12px;
      font-size: 11px;
      font-weight: 600;
      margin-top: 8px;
    }

    .stat-change.positive {
      background: #DCFCE7;
      color: #166534;
    }

    .stat-change.negative {
      background: #FEE2E2;
      color: #991B1B;
    }

    .tabs {
      display: flex;
      border-bottom: 2px solid #F1F2F6;
      margin-bottom: 24px;
    }

    .tab {
      padding: 12px 24px;
      font-size: 13px;
      font-weight: 600;
      color: #70717D;
      cursor: pointer;
      border-bottom: 3px solid transparent;
      margin-bottom: -2px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .tab.active {
      color: #0D62FF;
      border-bottom-color: #0D62FF;
    }

    .user-card {
      display: flex;
      align-items: center;
      padding: 16px;
      border: 1px solid #F1F2F6;
      border-radius: 4px;
      margin-bottom: 12px;
      transition: all 0.15s;
    }

    .user-card:hover {
      background: #FCFCFC;
      border-color: #DDDDE2;
    }

    .user-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: #595A69;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 14px;
      margin-right: 16px;
    }

    .user-info {
      flex: 1;
    }

    .user-name {
      font-size: 14px;
      font-weight: 600;
      color: #2B2D3F;
      margin-bottom: 4px;
    }

    .user-details {
      font-size: 13px;
      color: #70717D;
    }

    .badge {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 4px;
      font-size: 11px;
      font-weight: 600;
      margin-left: 8px;
    }

    .badge-admin {
      background: #E0F2FE;
      color: #075985;
    }

    .badge-pending {
      background: #FEF9C3;
      color: #854D0E;
    }

    .badge-active {
      background: #DCFCE7;
      color: #166534;
    }

    .search-box {
      width: 100%;
      padding: 10px 16px 10px 40px;
      border: 1px solid #DDDDE2;
      border-radius: 4px;
      font-size: 14px;
      margin-bottom: 20px;
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="%23999" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.35-4.35"></path></svg>');
      background-repeat: no-repeat;
      background-position: 12px center;
    }

    .search-box:focus {
      outline: none;
      border-color: #0D62FF;
    }

    .flow-builder {
      background: #FCFCFC;
      border: 2px dashed #DDDDE2;
      border-radius: 4px;
      padding: 40px;
      min-height: 500px;
    }

    .flow-node {
      background: white;
      border: 2px solid #DDDDE2;
      border-radius: 4px;
      padding: 20px;
      margin-bottom: 20px;
      cursor: move;
      transition: all 0.15s;
    }

    .flow-node:hover {
      border-color: #0D62FF;
      box-shadow: 0 2px 8px rgba(13,98,255,0.1);
    }

    .flow-node-title {
      display: flex;
      align-items: center;
      gap: 12px;
      font-size: 15px;
      font-weight: 600;
      color: #2B2D3F;
      margin-bottom: 8px;
    }

    .flow-node-desc {
      font-size: 13px;
      color: #70717D;
      margin-bottom: 12px;
    }

    .flow-node-tags {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    .flow-tag {
      padding: 4px 10px;
      background: var(--neutral-100);
      color: #595A69;
      border-radius: 4px;
      font-size: 11px;
      font-weight: 600;
    }

    .keypad-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 16px;
      max-width: 320px;
      margin: 0 auto 24px;
    }

    .keypad-key {
      aspect-ratio: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      background: white;
      border: 2px solid #DDDDE2;
      border-radius: 4px;
      font-size: 24px;
      font-weight: 600;
      color: #2B2D3F;
      cursor: pointer;
      transition: all 0.15s;
    }

    .keypad-key:hover {
      border-color: #0D62FF;
      background: #F5F8FF;
      color: #0D62FF;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(13,98,255,0.15);
    }

    .link-button {
      color: #0D62FF;
      font-size: 13px;
      font-weight: 600;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .link-button:hover {
      color: #0A4ECC;
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    th {
      text-align: left;
      padding: 12px 16px;
      background: #FCFCFC;
      border-bottom: 2px solid #F1F2F6;
      font-size: 12px;
      font-weight: 600;
      color: #595A69;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    td {
      padding: 14px 16px;
      border-bottom: 1px solid #F1F2F6;
      font-size: 14px;
      color: #2B2D3F;
    }

    tr:hover {
      background: #FCFCFC;
    }

    .page {
      display: none;
    }

    .page.active {
      display: block;
    }

    /* Radio button styling - no dark fill */
    input[type="radio"] {
      appearance: none;
      -webkit-appearance: none;
      -moz-appearance: none;
      width: 18px;
      height: 18px;
      border: 2px solid var(--neutral-400);
      border-radius: 50%;
      background: white;
      cursor: pointer;
      position: relative;
      transition: all 0.2s;
    }

    input[type="radio"]:hover {
      border-color: #0D62FF;
    }

    input[type="radio"]:checked {
      border-color: #0D62FF;
      background: white;
    }

    input[type="radio"]:checked::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #0D62FF;
    }

    /* Toggle Switch */
    .toggle-switch {
      position: relative;
      display: inline-block;
      width: 44px;
      height: 24px;
    }

    .toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #DDDDE2;
      transition: 0.3s;
      border-radius: 24px;
    }

    .toggle-slider:before {
      position: absolute;
      content: "";
      height: 18px;
      width: 18px;
      left: 3px;
      bottom: 3px;
      background-color: white;
      transition: 0.3s;
      border-radius: 50%;
    }

    input:checked + .toggle-slider {
      background-color: #0D62FF;
    }

    input:checked + .toggle-slider:before {
      transform: translateX(20px);
    }

    /* Checkbox styling */
    input[type="checkbox"]:not(.toggle-switch input) {
      appearance: none;
      -webkit-appearance: none;
      -moz-appearance: none;
      width: 18px;
      height: 18px;
      border: 2px solid var(--neutral-400);
      border-radius: 3px;
      background: white;
      cursor: pointer;
      position: relative;
      transition: all 0.2s;
    }

    input[type="checkbox"]:not(.toggle-switch input):hover {
      border-color: #0D62FF;
    }

    input[type="checkbox"]:not(.toggle-switch input):checked {
      border-color: #0D62FF;
      background: #0D62FF;
    }

    input[type="checkbox"]:not(.toggle-switch input):checked::after {
      content: '';
      position: absolute;
      left: 4px;
      top: 1px;
      width: 5px;
      height: 9px;
      border: solid white;
      border-width: 0 2px 2px 0;
      transform: rotate(45deg);
    }

    .help-button {
      position: fixed;
      bottom: 24px;
      right: 24px;
      width: 56px;
      height: 56px;
      border-radius: 50%;
      background: #0D62FF;
      color: white;
      border: none;
      box-shadow: 0 4px 12px rgba(13,98,255,0.3);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s;
      z-index: 45;
    }

    /* Move help button up when wizard action bar is present */
    .has-wizard-actions .help-button {
      bottom: 110px;
    }

    .help-button:hover {
      background: #0A4ECC;
      transform: scale(1.05);
    }

    /* Login Modal styles now in src/styles.css for proper cascade order */

    /* Toggle Switch Styles */
    .toggle-switch {
      position: relative;
      display: inline-block;
      width: 48px;
      height: 24px;
    }

    .toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #DDDDE2;
      transition: 0.3s;
      border-radius: 24px;
    }

    .toggle-slider:before {
      position: absolute;
      content: "";
      height: 18px;
      width: 18px;
      left: 3px;
      bottom: 3px;
      background-color: white;
      transition: 0.3s;
      border-radius: 50%;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }

    .toggle-switch input:checked + .toggle-slider {
      background-color: #0D62FF;
    }

    .toggle-switch input:checked + .toggle-slider:before {
      transform: translateX(24px);
    }

    .toggle-switch input:focus + .toggle-slider {
      box-shadow: 0 0 0 3px rgba(13, 98, 255, 0.1);
    }

    .info-banner {
      background: #F5F8FF;
      border: 1px solid #C2D8FF;
      border-radius: 4px;
      padding: 16px 20px;
      display: flex;
      align-items: start;
      gap: 12px;
      margin-bottom: 24px;
    }

    .info-banner i {
      color: #0D62FF;
      flex-shrink: 0;
      margin-top: 2px;
    }

    .info-banner-content {
      flex: 1;
    }

    .info-banner-title {
      font-size: 14px;
      font-weight: 600;
      color: #2B2D3F;
      margin-bottom: 4px;
    }

    .info-banner-text {
      font-size: 13px;
      color: #595A69;
    }
  </style>
</head>
<body>
  <!-- Login Overlay -->
  <div id="login-overlay" class="login-overlay">
    <div class="login-box">
      <div class="login-logo">
        <h1>BUSINESS VOICEEDGE®</h1>
        <p>Auto-Attendant Management</p>
      </div>
      
      <form class="login-form">
        <div class="login-input-group">
          <label for="login-password">Access Code</label>
          <input 
            type="password" 
            id="login-password" 
            placeholder="Enter access code"
            autocomplete="off"
          />
        </div>
        
        <div id="login-error" class="login-error">
          <i data-lucide="alert-circle" style="width: 16px; height: 16px;"></i>
          <span>Invalid access code. Please try again.</span>
        </div>
        
        <button type="submit" class="login-button">
          Access Dashboard
        </button>
      </form>
    </div>
  </div>

  <script>
    // Login functionality - using event listener to ensure proper handling
    window.addEventListener('DOMContentLoaded', function() {
      const form = document.querySelector('.login-form');
      const input = document.getElementById('login-password');
      const overlay = document.getElementById('login-overlay');
      const errorDiv = document.getElementById('login-error');
      const DEMO_PASSWORD = 'demo2026';
      
      if (form) {
        form.addEventListener('submit', function(e) {
          e.preventDefault();
          
          if (input && input.value === DEMO_PASSWORD) {
            // Successful login
            localStorage.setItem('autoAttendantAuth', 'true');
            if (overlay) overlay.classList.add('hidden');
            if (errorDiv) errorDiv.classList.remove('show');
            input.value = '';
          } else {
            // Failed login
            if (errorDiv) errorDiv.classList.add('show');
            if (input) {
              input.value = '';
              input.focus();
              // Shake animation
              input.style.animation = 'shake 0.5s';
              setTimeout(() => {
                input.style.animation = '';
              }, 500);
            }
          }
        });
      }
    });
  </script>
  
  <!-- Global Demo Control Bar (Fixed at Top Center) -->
  <div id="global-demo-bar" style="position: fixed; top: 10px; left: 50%; transform: translateX(-50%); background: #2B2D3F; color: white; padding: 8px 20px; border-radius: 8px; font-size: 12px; font-weight: 600; display: flex; align-items: center; gap: 16px; box-shadow: 0 4px 16px rgba(0,0,0,0.4); z-index: 10000;">
    <!-- Dashboard State Toggle -->
    <div id="demo-toggle-control" style="display: flex; align-items: center; gap: 12px;">
      <span id="demo-status-label">DEMO: Normal</span>
      <button onclick="toggleDemoUsageState()" style="background: white; color: #2B2D3F; border: none; padding: 6px 12px; border-radius: 6px; font-size: 12px; font-weight: 600; cursor: pointer; transition: all 0.2s;" onmouseover="this.style.background='#F1F2F6'" onmouseout="this.style.background='white'">
        Toggle State
      </button>
    </div>
    
    <!-- FTE Navigation -->
    <div id="demo-fte-control" style="display: none; align-items: center; gap: 12px;">
      <span>FTE</span>
      <button onclick="skipToCompleted()" style="background: white; color: #2B2D3F; border: none; padding: 6px 12px; border-radius: 6px; font-size: 12px; font-weight: 600; cursor: pointer; transition: all 0.2s;" onmouseover="this.style.background='#F1F2F6'" onmouseout="this.style.background='white'">
        Skip to Completed
      </button>
    </div>
    
    <!-- Completed Navigation -->
    <div id="demo-completed-control" style="display: none; align-items: center; gap: 12px;">
      <span>Completed</span>
      <button onclick="resetToFTE()" style="background: white; color: #2B2D3F; border: none; padding: 6px 12px; border-radius: 6px; font-size: 12px; font-weight: 600; cursor: pointer; transition: all 0.2s;" onmouseover="this.style.background='#F1F2F6'" onmouseout="this.style.background='white'">
        Reset to FTE
      </button>
    </div>
  </div>
  
  <!-- Comcast Header -->
  <header class="comcast-header">
    <!-- Top Bar -->
    <div class="comcast-header-top">
      <span>XFINITY</span>
      <span style="border-left: 1px solid rgba(255,255,255,0.3); padding-left: 20px;">COMCAST BUSINESS</span>
    </div>
    
    <!-- Main Bar -->
    <div class="comcast-header-main">
      <div class="comcast-header-main-left">
        <button style="background: none; border: none; color: white; cursor: pointer; padding: 4px;">
          <i data-lucide="menu" style="width: 20px; height: 20px;"></i>
        </button>
      </div>
      
      <!-- Logo Area -->
      <div style="display: flex; align-items: center; gap: 12px; background: #000a73; padding: 0 24px; height: 100%;">
        <div style="display: flex; flex-direction: column; line-height: 1.2;">
          <span style="font-size: 11px; font-weight: 700; letter-spacing: 0.5px;">COMCAST</span>
          <span style="font-size: 11px; font-weight: 700; letter-spacing: 0.5px;">BUSINESS</span>
        </div>
        <span style="font-size: 13px; font-weight: 500; padding-left: 12px; border-left: 1px solid rgba(255,255,255,0.3);">ENTERPRISE SOLUTIONS</span>
      </div>
      
      <div class="comcast-header-main-right">
        <div style="display: flex; align-items: center; gap: 16px; margin-left: auto;">
          <span style="font-size: 14px; font-weight: 400; color: white;">Hello, Really_Changeds</span>
          <div style="width: 32px; height: 32px; border-radius: 50%; background: white; color: #0D62FF; display: flex; align-items: center; justify-content: center;">
            <i data-lucide="user" style="width: 18px; height: 18px;"></i>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- Sidebar -->
  <nav class="sidebar" id="sidebar">
    <div class="sidebar-back" id="sidebar-toggle">
      <i data-lucide="chevrons-left" id="sidebar-toggle-icon"></i>
    </div>

    <div class="sidebar-section">
      <a href="#" class="sidebar-item active" data-page="dashboard">
        <div class="sidebar-item-icon">
          <i data-lucide="home"></i>
        </div>
        <span>SITE DASHBOARD</span>
      </a>
      <a href="#" class="sidebar-item">
        <div class="sidebar-item-icon">
          <i data-lucide="users"></i>
        </div>
        <span>USERS</span>
      </a>
      <a href="#" class="sidebar-item">
        <div class="sidebar-item-icon">
          <i data-lucide="list"></i>
        </div>
        <span>NUMBERS AND DEVICES</span>
      </a>
      <a href="#" class="sidebar-item">
        <div class="sidebar-item-icon">
          <i data-lucide="phone-forwarded"></i>
        </div>
        <span>ALTERNATE NUMBERS</span>
      </a>
      <a href="#" class="sidebar-item">
        <div class="sidebar-item-icon">
          <i data-lucide="phone"></i>
        </div>
        <span>CALL HISTORY</span>
      </a>
    </div>

    <div class="sidebar-divider"></div>

    <div class="sidebar-section">
      <div class="sidebar-header">Call Routing</div>
      <a href="#" class="sidebar-item" data-page="attendants">
        <div class="sidebar-item-icon">
          <i data-lucide="git-fork"></i>
        </div>
        <span>MAIN BUSINESS NUMBER</span>
      </a>
      <a href="#" class="sidebar-item">
        <div class="sidebar-item-icon">
          <i data-lucide="phone-call"></i>
        </div>
        <span>CALL HOLD</span>
      </a>
      <a href="#" class="sidebar-item">
        <div class="sidebar-item-icon">
          <i data-lucide="grid-3x3"></i>
        </div>
        <span>AUTOMATED ATTENDANTS</span>
      </a>
      <a href="#" class="sidebar-item">
        <div class="sidebar-item-icon">
          <i data-lucide="users-round"></i>
        </div>
        <span>HUNT GROUPS</span>
      </a>
      <a href="#" class="sidebar-item">
        <div class="sidebar-item-icon">
          <i data-lucide="calendar"></i>
        </div>
        <span>SCHEDULES</span>
      </a>
    </div>

    <div class="sidebar-divider"></div>

    <div class="sidebar-section">
      <a href="#" class="sidebar-item">
        <div class="sidebar-item-icon">
          <i data-lucide="settings"></i>
        </div>
        <span>ADVANCED SETTINGS</span>
      </a>
    </div>

    <div class="sidebar-section" style="margin-top: auto;">
      <a href="#" class="sidebar-item">
        <div class="sidebar-item-icon">
          <i data-lucide="phone-outgoing"></i>
        </div>
        <span>MY PROFILE</span>
      </a>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Dashboard Page -->
    <div id="page-dashboard" class="page active" style="position: relative;">
      <!-- Demo Toggle moved to global demo bar -->

      <!-- Top Section -->
      <div style="background: white; padding: 24px 24px 0 24px; margin: -24px -24px 24px -24px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
        <!-- BUSINESS VOICEEDGE Header -->
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 20px; border-bottom: 1px solid #F1F2F6;">
          <div style="font-size: 14px; font-weight: 700; letter-spacing: 0.5px; color: #2B2D3F;">BUSINESS VOICEEDGE®</div>
          <div style="display: flex; align-items: center; gap: 24px;">
            <!-- Search Sites -->
            <div style="display: flex; align-items: center; gap: 6px; cursor: pointer;">
              <i data-lucide="search" style="width: 18px; height: 18px; color: #70717D;"></i>
              <span style="font-size: 14px; font-weight: 400; color: #2B2D3F;">Search sites</span>
            </div>
            
            <!-- Learn More -->
            <div style="display: flex; align-items: center; gap: 6px; cursor: pointer;">
              <i data-lucide="help-circle" style="width: 20px; height: 20px; color: #70717D;"></i>
              <span style="font-size: 14px; font-weight: 400; color: #2B2D3F;">Learn More</span>
              <i data-lucide="chevron-down" style="width: 16px; height: 16px; color: #70717D;"></i>
            </div>
          </div>
        </div>
        
        <!-- Location Section with Default Site -->
        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 20px; justify-content: space-between;">
          <div style="display: flex; align-items: flex-start; gap: 12px; flex: 1;">
            <i data-lucide="map-pin" style="width: 24px; height: 24px; color: #9D9EA7; margin-top: 4px; flex-shrink: 0;"></i>
            <div style="flex: 1;">
              <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 6px;">
                <h1 style="font-size: 24px; font-weight: 600; color: #000000; margin: 0; line-height: 1.2;">Primary_BVE_Orion_Portal</h1>
                <i data-lucide="chevron-down" style="width: 20px; height: 20px; color: #70717D; cursor: pointer;"></i>
              </div>
              <div style="font-size: 14px; color: #70717D; line-height: 1.4;">1701 John F Kennedy Blvd, Ste Eqp24526-...</div>
            </div>
          </div>
          
          <!-- Default Site -->
          <div style="display: flex; align-items: center; gap: 8px;">
            <span style="font-size: 13px; font-weight: 700; color: #2B2D3F; text-transform: uppercase; letter-spacing: 0.5px;">DEFAULT SITE</span>
            <i data-lucide="info" style="width: 20px; height: 20px; color: #0D62FF; cursor: pointer;"></i>
          </div>
        </div>

        <!-- Map Section -->
        <div style="width: calc(100% + 48px); height: 215px; background: #F5F8FF; display: flex; align-items: center; justify-content: center; position: relative; overflow: hidden; margin: 16px -24px -24px -24px;">
          <img src="./philadelphia-map.png" alt="Philadelphia Map" style="width: 100%; height: 100%; object-fit: cover;" />
          <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
            <i data-lucide="map-pin" style="width: 32px; height: 32px; color: #0D62FF; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));"></i>
          </div>
        </div>
      </div>

      <!-- Action Cards -->
      <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 24px; margin-top: -67px; position: relative; z-index: 10;">
        <div style="background: white; border-radius: 8px; padding: 20px 16px; text-align: center; cursor: pointer; transition: all 0.2s; border: 1px solid #F1F2F6; box-shadow: 0 1px 2px rgba(0,0,0,0.05); display: flex; flex-direction: column; align-items: center; justify-content: center; height: 94px;" onmouseover="this.style.boxShadow='0 4px 12px rgba(13,98,255,0.12)'; this.style.borderColor='#7DD3FC';" onmouseout="this.style.boxShadow='0 1px 2px rgba(0,0,0,0.05)'; this.style.borderColor='#F1F2F6';">
          <div style="width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; margin-bottom: 10px;">
            <i data-lucide="user-plus" style="width: 24px; height: 24px; color: #0D62FF; stroke-width: 2.5;"></i>
          </div>
          <div style="font-size: 12px; font-weight: 600; color: #0D62FF; text-transform: uppercase; letter-spacing: 0.3px; line-height: 1.3;">Add New User</div>
        </div>
        <div style="background: white; border-radius: 8px; padding: 20px 16px; text-align: center; cursor: pointer; transition: all 0.2s; border: 1px solid #F1F2F6; box-shadow: 0 1px 2px rgba(0,0,0,0.05); display: flex; flex-direction: column; align-items: center; justify-content: center; height: 94px;" onmouseover="this.style.boxShadow='0 4px 12px rgba(13,98,255,0.12)'; this.style.borderColor='#7DD3FC';" onmouseout="this.style.boxShadow='0 1px 2px rgba(0,0,0,0.05)'; this.style.borderColor='#F1F2F6';">
          <div style="width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; margin-bottom: 10px;">
            <i data-lucide="lock" style="width: 24px; height: 24px; color: #0D62FF; stroke-width: 2.5;"></i>
          </div>
          <div style="font-size: 12px; font-weight: 600; color: #0D62FF; text-transform: uppercase; letter-spacing: 0.3px; line-height: 1.3;">Reset Password</div>
        </div>
        <div style="background: white; border-radius: 8px; padding: 20px 16px; text-align: center; cursor: pointer; transition: all 0.2s; border: 1px solid #F1F2F6; box-shadow: 0 1px 2px rgba(0,0,0,0.05); display: flex; flex-direction: column; align-items: center; justify-content: center; height: 94px;" onmouseover="this.style.boxShadow='0 4px 12px rgba(13,98,255,0.12)'; this.style.borderColor='#7DD3FC';" onmouseout="this.style.boxShadow='0 1px 2px rgba(0,0,0,0.05)'; this.style.borderColor='#F1F2F6';">
          <div style="width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; margin-bottom: 10px;">
            <i data-lucide="voicemail" style="width: 24px; height: 24px; color: #0D62FF; stroke-width: 2.5;"></i>
          </div>
          <div style="font-size: 12px; font-weight: 600; color: #0D62FF; text-transform: uppercase; letter-spacing: 0.3px; line-height: 1.3;">Change Voicemail PIN</div>
        </div>
      </div>

      <!-- Google Virtual Assistant Usage (Compact) -->
      <div id="dashboard-ai-usage" onclick="showMainBusinessNumberCallflow()" style="position: relative; background: linear-gradient(135deg, #E0F2FE 0%, #BAE6FD 100%); border-radius: 12px; padding: 24px; margin-bottom: 24px; border: 1px solid #0D62FF; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.boxShadow='0 8px 24px rgba(13,98,255,0.25)'; this.style.transform='translateY(-2px)';" onmouseout="this.style.boxShadow='none'; this.style.transform='translateY(0)';">
        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
          <div style="display: flex; align-items: center; gap: 12px;">
            <div style="width: 48px; height: 48px; background: white; border-radius: 10px; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 8px rgba(13,98,255,0.15);">
              <i data-lucide="bot" style="width: 24px; height: 24px; color: #0D62FF;"></i>
            </div>
            <div>
              <h3 style="font-size: 16px; font-weight: 600; color: #2B2D3F; margin-bottom: 2px;">Google Virtual Assistant</h3>
              <p style="font-size: 13px; color: #595A69; margin: 0;">AI-powered call handling • Click to view details</p>
            </div>
          </div>
          <button onclick="event.stopPropagation(); alert('Add minutes feature coming soon');" style="display: inline-flex; align-items: center; gap: 6px; padding: 8px 16px; background: #0D62FF; color: white; border: none; border-radius: 6px; font-size: 13px; font-weight: 600; cursor: pointer; transition: all 0.2s; position: relative; z-index: 5;" onmouseover="this.style.background='#0A4ECC'" onmouseout="this.style.background='#0D62FF'">
            <i data-lucide="plus-circle" style="width: 16px; height: 16px;"></i>
            Add Minutes
          </button>
        </div>

        <!-- Usage Stats -->
        <div>
          <div style="display: flex; align-items: baseline; gap: 8px; margin-bottom: 12px;">
            <span style="font-size: 28px; font-weight: 600; color: #2B2D3F;">247</span>
            <span style="font-size: 14px; color: #595A69;">/ 500 minutes used</span>
            <span style="font-size: 14px; font-weight: 600; color: #15803D; margin-left: auto;">253 remaining</span>
          </div>
          
          <!-- Progress Bar -->
          <div style="width: 100%; height: 8px; background: rgba(255,255,255,0.5); border-radius: 4px; overflow: hidden; margin-bottom: 8px;">
            <div style="width: 49.4%; height: 100%; background: #0D62FF; border-radius: 4px;"></div>
          </div>
          
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <span style="font-size: 12px; color: #70717D;">Billing cycle: Jan 1 - Jan 31, 2026</span>
            <div style="display: flex; align-items: center; gap: 4px;">
              <i data-lucide="clock" style="width: 12px; height: 12px; color: var(--neutral-500);"></i>
              <span style="font-size: 11px; color: #70717D;">Updated: 2:30 PM ET</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Two Column Layout -->
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px;">
        <!-- Main Business Number -->
        <div class="card">
          <div class="card-body">
            <h3 style="font-size: 18px; font-weight: 700; color: #2B2D3F; margin-bottom: 16px;">Main Business Number</h3>
            <div style="font-size: 32px; font-weight: 400; color: #2B2D3F; margin-bottom: 16px;">(445) 223-3050</div>
            <p style="font-size: 14px; color: #595A69; margin-bottom: 24px; line-height: 1.5;">Below are the incoming call flow settings for your Main Business Number during open and closed hours.</p>
            
            <!-- Open Hours Call Flow -->
            <div style="margin-bottom: 24px;">
              <div style="font-weight: 700; font-size: 13px; color: #2B2D3F; margin-bottom: 12px; text-transform: uppercase; letter-spacing: 0.5px;">Open Hours Call Flow</div>
              <div style="font-size: 14px; color: #595A69; margin-bottom: 8px;">Directs to User or External Number</div>
              <div style="font-size: 15px; color: #2B2D3F; margin-bottom: 8px;">(445) 223-3042 Ext. 0956</div>
              <a href="#" style="color: #0D62FF; font-size: 14px; text-decoration: none; font-weight: 500;">call queue</a>
            </div>

            <!-- Closed Hours Collapsible -->
            <details style="border-top: 1px solid #F1F2F6; padding-top: 16px; margin-bottom: 20px;">
              <summary style="font-weight: 700; font-size: 13px; color: #2B2D3F; text-transform: uppercase; letter-spacing: 0.5px; cursor: pointer; list-style: none; display: flex; align-items: center; justify-content: space-between; padding: 8px 0;">
                <span>Closed Hours and Holidays Call Flow</span>
                <i data-lucide="chevron-down" style="width: 20px; height: 20px; transition: transform 0.2s;"></i>
              </summary>
              <div style="padding-top: 16px;">
                <div style="font-size: 14px; color: #595A69; margin-bottom: 8px;">Forwards to Voicemail</div>
                <div style="font-size: 15px; color: #2B2D3F;">Main Business Number Voicemail</div>
              </div>
            </details>

            <!-- Change Call Flow Link -->
            <a href="#" style="display: inline-flex; align-items: center; gap: 8px; color: #0D62FF; font-size: 13px; font-weight: 600; text-decoration: none; text-transform: uppercase; letter-spacing: 0.5px;">
              <span>Change Main Number Call Flow</span>
              <i data-lucide="arrow-right" style="width: 16px; height: 16px;"></i>
            </a>
          </div>
        </div>

        <!-- Users Section -->
        <div class="card">
          <div class="card-body">
            <!-- Tabs -->
            <div style="display: flex; border-bottom: 2px solid #F1F2F6; margin-bottom: 20px;">
              <div style="padding: 12px 16px; font-size: 14px; font-weight: 600; color: #2B2D3F; border-bottom: 3px solid #0D62FF; margin-bottom: -2px; cursor: pointer;">USERS (76)</div>
              <div style="padding: 12px 16px; font-size: 14px; font-weight: 600; color: var(--neutral-500); cursor: pointer;">UNASSIGNED SEATS (6)</div>
            </div>

            <!-- Search -->
            <div style="position: relative; margin-bottom: 20px;">
              <i data-lucide="search" style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); width: 18px; height: 18px; color: #B4B5BB; pointer-events: none;"></i>
              <input type="text" placeholder="Search by name or phone number" style="width: 100%; padding: 10px 16px 10px 40px; border: 1px solid #F1F2F6; border-radius: 6px; font-size: 14px; background-color: #FCFCFC; outline: none; color: #424454;" onfocus="this.style.borderColor='#7DD3FC'; this.style.backgroundColor='white';" onblur="this.style.borderColor='#F1F2F6'; this.style.backgroundColor='#FCFCFC';" />
            </div>

            <!-- User List -->
            <div style="display: flex; flex-direction: column; gap: 12px;">
              <!-- User 1 -->
              <div style="display: flex; align-items: center; padding: 12px; border: 1px solid #F1F2F6; border-radius: 4px; transition: all 0.15s;" onmouseover="this.style.background='#FCFCFC'" onmouseout="this.style.background='white'">
                <div style="width: 40px; height: 40px; border-radius: 50%; background: #424454; color: white; display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 14px; margin-right: 12px;">aa</div>
                <div style="flex: 1;">
                  <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 4px;">
                    <span style="font-size: 14px; font-weight: 600; color: #2B2D3F;">admin admin</span>
                    <span style="display: inline-block; padding: 2px 8px; background: #E0F2FE; color: #075985; border-radius: 4px; font-size: 11px; font-weight: 600;">Admin</span>
                    <span style="display: inline-block; padding: 2px 8px; background: #FEF9C3; color: #854D0E; border-radius: 4px; font-size: 11px; font-weight: 600;">Pending</span>
                  </div>
                  <div style="font-size: 13px; color: #70717D;">Call Queue Agent</div>
                  <div style="font-size: 13px; color: #0D62FF; margin-top: 4px;">
                    <a href="#" style="color: #0D62FF; text-decoration: none; font-weight: 500;">Resend invite</a>
                    <span style="margin: 0 6px; color: var(--neutral-400);">•</span>
                    <span style="color: #595A69;">(445) 223-3046 Ext. 9860</span>
                  </div>
                </div>
              </div>

              <!-- User 2 -->
              <div style="display: flex; align-items: center; padding: 12px; border: 1px solid #F1F2F6; border-radius: 4px; transition: all 0.15s;" onmouseover="this.style.background='#FCFCFC'" onmouseout="this.style.background='white'">
                <div style="width: 40px; height: 40px; border-radius: 50%; background: #424454; color: white; display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 14px; margin-right: 12px;">cv</div>
                <div style="flex: 1;">
                  <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 4px;">
                    <span style="font-size: 14px; font-weight: 600; color: #2B2D3F;">car venue</span>
                    <span style="display: inline-block; padding: 2px 8px; background: #E0F2FE; color: #075985; border-radius: 4px; font-size: 11px; font-weight: 600;">Admin</span>
                    <span style="display: inline-block; padding: 2px 8px; background: #FEF9C3; color: #854D0E; border-radius: 4px; font-size: 11px; font-weight: 600;">Pending</span>
                  </div>
                  <div style="font-size: 13px; color: #0D62FF; margin-top: 4px;">
                    <a href="#" style="color: #0D62FF; text-decoration: none; font-weight: 500;">Resend invite</a>
                    <span style="margin: 0 6px; color: var(--neutral-400);">•</span>
                    <span style="color: #595A69;">(445) 223-3057 Ext. 8784</span>
                  </div>
                </div>
              </div>

              <!-- User 3 -->
              <div style="display: flex; align-items: center; padding: 12px; border: 1px solid #F1F2F6; border-radius: 4px; transition: all 0.15s;" onmouseover="this.style.background='#FCFCFC'" onmouseout="this.style.background='white'">
                <div style="width: 40px; height: 40px; border-radius: 50%; background: #424454; color: white; display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 14px; margin-right: 12px;">vv</div>
                <div style="flex: 1;">
                  <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 4px;">
                    <span style="font-size: 14px; font-weight: 600; color: #2B2D3F;">v2 v2</span>
                    <span style="display: inline-block; padding: 2px 8px; background: #E0F2FE; color: #075985; border-radius: 4px; font-size: 11px; font-weight: 600;">Admin</span>
                    <span style="display: inline-block; padding: 2px 8px; background: #FEF9C3; color: #854D0E; border-radius: 4px; font-size: 11px; font-weight: 600;">Pending</span>
                  </div>
                  <div style="font-size: 13px; color: #0D62FF; margin-top: 4px;">
                    <a href="#" style="color: #0D62FF; text-decoration: none; font-weight: 500;">Resend invite</a>
                    <span style="margin: 0 6px; color: var(--neutral-400);">•</span>
                    <span style="color: #595A69;">(445) 223-3052 Ext. 7847</span>
                  </div>
                </div>
              </div>

              <!-- User 4 -->
              <div style="display: flex; align-items: center; padding: 12px; border: 1px solid #F1F2F6; border-radius: 4px; transition: all 0.15s;" onmouseover="this.style.background='#FCFCFC'" onmouseout="this.style.background='white'">
                <div style="width: 40px; height: 40px; border-radius: 50%; background: #424454; color: white; display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 14px; margin-right: 12px;">an</div>
                <div style="flex: 1;">
                  <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 4px;">
                    <span style="font-size: 14px; font-weight: 600; color: #2B2D3F;">add new</span>
                    <span style="display: inline-block; padding: 2px 8px; background: #E0F2FE; color: #075985; border-radius: 4px; font-size: 11px; font-weight: 600;">Admin</span>
                  </div>
                  <div style="font-size: 13px; color: #70717D;">Call Queue Agent</div>
                  <div style="font-size: 13px; color: #595A69; margin-top: 4px;">(445) 223-3039 Ext. 3423</div>
                </div>
              </div>

              <!-- User 5 -->
              <div style="display: flex; align-items: center; padding: 12px; border: 1px solid #F1F2F6; border-radius: 4px; transition: all 0.15s;" onmouseover="this.style.background='#FCFCFC'" onmouseout="this.style.background='white'">
                <div style="width: 40px; height: 40px; border-radius: 50%; background: #424454; color: white; display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 14px; margin-right: 12px;">aa</div>
                <div style="flex: 1;">
                  <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 4px;">
                    <span style="font-size: 14px; font-weight: 600; color: #2B2D3F;">admin01 admin_01</span>
                    <span style="display: inline-block; padding: 2px 8px; background: #E0F2FE; color: #075985; border-radius: 4px; font-size: 11px; font-weight: 600;">Admin</span>
                  </div>
                  <div style="font-size: 13px; color: #595A69; margin-top: 4px;">(445) 223-3041 Ext. 2156</div>
                </div>
              </div>
            </div>

            <!-- All Users Link -->
            <div style="margin-top: 20px; text-align: center;">
              <a href="#" style="display: inline-flex; align-items: center; gap: 8px; color: #0D62FF; font-size: 13px; font-weight: 600; text-decoration: none; text-transform: uppercase; letter-spacing: 0.5px;">
                <span>All Users</span>
                <i data-lucide="arrow-right" style="width: 16px; height: 16px;"></i>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Automated Attendants Page -->
    <div id="page-attendants" class="page">
      <!-- First Time Experience -->
      <div id="fte-callflow" style="display: block; position: relative;">
        <!-- Demo buttons moved to global demo bar -->
        
        <div class="page-header">
          <div>
            <div class="page-title">MAIN BUSINESS NUMBER</div>
            <div class="location-info">
              <span>Call Flow</span>
            </div>
            <p style="color: #70717D; font-size: 13px; margin: 8px 0 0 0;">Set up how calls to your main business number are handled</p>
          </div>
        </div>

        <div class="card" style="max-width: 900px; margin: 0 auto; text-align: center; padding: 32px 40px;">
          <div style="width: 56px; height: 56px; background: #E0F2FE; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 16px;">
            <i data-lucide="git-fork" style="width: 28px; height: 28px; color: #0D62FF;"></i>
          </div>
          
          <h2 style="font-size: 24px; font-weight: 600; color: #2B2D3F; margin-bottom: 12px;">Set Up Your Call Flow</h2>
          
          <p style="font-size: 15px; color: #70717D; line-height: 1.5; margin-bottom: 24px; max-width: 650px; margin-left: auto; margin-right: auto;">
            Configure how incoming calls are handled by setting up business hours, voice menus, and call routing to ensure every caller reaches the right destination.
          </p>

          <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; margin-bottom: 24px; text-align: left;">
            <div style="padding: 16px; background: #FCFCFC; border-radius: 6px; border: 2px solid #F1F2F6;">
              <div style="width: 40px; height: 40px; background: white; border-radius: 6px; display: flex; align-items: center; justify-content: center; margin-bottom: 12px;">
                <i data-lucide="calendar-clock" style="width: 20px; height: 20px; color: #0D62FF;"></i>
              </div>
              <h3 style="font-size: 14px; font-weight: 600; color: #2B2D3F; margin-bottom: 6px;">Business Hours</h3>
              <p style="font-size: 13px; color: #70717D; line-height: 1.4; margin: 0;">Set open/closed days, hours, and holidays</p>
              <span style="display: inline-block; margin-top: 8px; font-size: 11px; font-weight: 600; color: #0D62FF; text-transform: uppercase; letter-spacing: 0.5px;">Required</span>
            </div>

            <div style="padding: 16px; background: #FCFCFC; border-radius: 6px; border: 2px solid #F1F2F6;">
              <div style="width: 40px; height: 40px; background: white; border-radius: 6px; display: flex; align-items: center; justify-content: center; margin-bottom: 12px;">
                <i data-lucide="grid-3x3" style="width: 20px; height: 20px; color: #0D62FF;"></i>
              </div>
              <h3 style="font-size: 14px; font-weight: 600; color: #2B2D3F; margin-bottom: 6px;">Voice Menu & Keypad</h3>
              <p style="font-size: 13px; color: #70717D; line-height: 1.4; margin: 0;">Create interactive menus with keypad options</p>
              <span style="display: inline-block; margin-top: 8px; font-size: 11px; font-weight: 600; color: #0D62FF; text-transform: uppercase; letter-spacing: 0.5px;">Required</span>
            </div>

            <div style="padding: 16px; background: #FCFCFC; border-radius: 6px; border: 2px solid #F1F2F6;">
              <div style="width: 40px; height: 40px; background: white; border-radius: 6px; display: flex; align-items: center; justify-content: center; margin-bottom: 12px;">
                <i data-lucide="phone-forwarded" style="width: 20px; height: 20px; color: #0D62FF;"></i>
              </div>
              <h3 style="font-size: 14px; font-weight: 600; color: #2B2D3F; margin-bottom: 6px;">Call Routing</h3>
              <p style="font-size: 13px; color: #70717D; line-height: 1.4; margin: 0;">Route to external numbers, hunt groups, or voicemail</p>
              <span style="display: inline-block; margin-top: 8px; font-size: 11px; font-weight: 600; color: #0D62FF; text-transform: uppercase; letter-spacing: 0.5px;">Required</span>
            </div>
          </div>

          <!-- Optional: Google Virtual Assistant -->
          <div style="padding: 20px 24px; background: linear-gradient(135deg, #E0F2FE 0%, #F5F8FF 100%); border-radius: 8px; margin-bottom: 32px; border: 2px solid #7DD3FC; position: relative;">
            <span style="position: absolute; top: 12px; right: 16px; background: #22C55E; color: white; font-size: 11px; font-weight: 600; padding: 4px 10px; border-radius: 12px; text-transform: uppercase; letter-spacing: 0.5px;">Optional</span>
            <div style="display: flex; align-items: center; gap: 16px; text-align: left;">
              <div style="width: 48px; height: 48px; background: white; border-radius: 8px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; box-shadow: 0 2px 8px rgba(13,98,255,0.15);">
                <i data-lucide="bot" style="width: 24px; height: 24px; color: #0D62FF;"></i>
              </div>
              <div style="flex: 1;">
                <h3 style="font-size: 16px; font-weight: 600; color: #2B2D3F; margin-bottom: 4px;">Upgrade with Google Virtual Assistant</h3>
                <p style="font-size: 14px; color: #595A69; line-height: 1.4; margin: 0;">Add intelligent voice recognition to enhance your call flow with natural language processing.</p>
              </div>
            </div>
          </div>

          <button class="action-button-primary" onclick="startCallFlowSetup()" style="font-size: 15px; padding: 16px 48px; font-weight: 600; letter-spacing: 0.5px; border-radius: 6px; box-shadow: 0 4px 12px rgba(13, 98, 255, 0.25); transition: all 0.2s ease; display: inline-flex; align-items: center; gap: 10px;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(13, 98, 255, 0.35)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(13, 98, 255, 0.25)';">
            <span>GET STARTED</span>
            <i data-lucide="arrow-right" style="width: 20px; height: 20px; display: block;"></i>
          </button>
          
          <p style="font-size: 13px; color: var(--neutral-500); margin-top: 16px;">Takes approximately 5-10 minutes to complete</p>
        </div>
      </div>

      <!-- Setup: Time Zone Selection -->
      <div id="setup-timezone" style="display: none;">
        <!-- Wizard Header -->
        <div style="background: white; padding: 24px 24px 20px 24px; margin: -24px -24px 24px -24px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
          <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 24px;">
            <h1 style="font-size: 20px; font-weight: 600; color: #2B2D3F; margin: 0;">Call Flow Setup</h1>
            <button onclick="backToFTE()" style="background: none; border: 1px solid #DDDDE2; color: #0D62FF; padding: 8px 20px; border-radius: 4px; font-size: 13px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; cursor: pointer; transition: all 0.15s;" onmouseover="this.style.background='#FCFCFC'" onmouseout="this.style.background='none'">
              SAVE & EXIT
            </button>
          </div>

          <!-- Wizard Steps -->
          <div style="display: flex; align-items: center; gap: 0; position: relative;">
            <!-- Step 1 - Active -->
            <div style="flex: 1; display: flex; align-items: center; gap: 12px; position: relative;">
              <div style="width: 32px; height: 32px; border-radius: 50%; background: #0D62FF; color: white; display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: 600; z-index: 2; position: relative;">1</div>
              <span style="font-size: 14px; font-weight: 600; color: #0D62FF; position: relative; z-index: 2; background: white; padding-right: 8px;">Schedules</span>
              <div style="position: absolute; left: 16px; top: 15px; height: 2px; background: #F1F2F6; width: 100%; z-index: 0;"></div>
            </div>

            <!-- Step 2 - Inactive -->
            <div style="flex: 1; display: flex; align-items: center; gap: 12px; position: relative;">
              <div style="width: 32px; height: 32px; border-radius: 50%; background: var(--neutral-100); border: 2px solid #DDDDE2; color: var(--neutral-400); display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: 600; z-index: 2; position: relative;">2</div>
              <span style="font-size: 14px; font-weight: 500; color: var(--neutral-400); position: relative; z-index: 2; background: white; padding-right: 8px;">Open Hours</span>
              <div style="position: absolute; left: 16px; top: 15px; height: 2px; background: #F1F2F6; width: 100%; z-index: 0;"></div>
            </div>

            <!-- Step 3 - Inactive -->
            <div style="flex: 1; display: flex; align-items: center; gap: 12px; position: relative;">
              <div style="width: 32px; height: 32px; border-radius: 50%; background: var(--neutral-100); border: 2px solid #DDDDE2; color: var(--neutral-400); display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: 600; z-index: 2; position: relative;">3</div>
              <span style="font-size: 14px; font-weight: 500; color: var(--neutral-400); position: relative; z-index: 2; background: white; padding-right: 8px;">Closed Hours & Holidays</span>
            </div>
          </div>
        </div>

        <!-- Tabs -->
        <div style="border-bottom: 2px solid #F1F2F6; margin-bottom: 32px; display: flex; gap: 24px;">
          <div onclick="navigateToTab('timezone')" style="padding: 12px 0; font-size: 14px; font-weight: 600; color: #2B2D3F; border-bottom: 3px solid #0D62FF; margin-bottom: -2px; cursor: pointer; transition: color 0.2s;">TIME ZONE</div>
          <div onclick="navigateToTab('openhours')" style="padding: 12px 0; font-size: 14px; font-weight: 600; color: var(--neutral-400); cursor: pointer; transition: color 0.2s; border-bottom: 3px solid transparent; margin-bottom: -2px;" onmouseover="this.style.color='#0D62FF'" onmouseout="if(this.style.borderBottomColor === 'transparent') this.style.color='#B4B5BB'">OPEN HOURS</div>
          <div onclick="navigateToTab('holidays')" style="padding: 12px 0; font-size: 14px; font-weight: 600; color: var(--neutral-400); cursor: pointer; transition: color 0.2s; border-bottom: 3px solid transparent; margin-bottom: -2px;" onmouseover="this.style.color='#0D62FF'" onmouseout="if(this.style.borderBottomColor === 'transparent') this.style.color='#B4B5BB'">HOLIDAYS</div>
        </div>

        <!-- Content -->
        <div style="max-width: 800px;">
          <h2 style="font-size: 20px; font-weight: 600; color: #2B2D3F; margin-bottom: 24px;">Select the time zone that applies to this call flow</h2>

          <!-- Time Zone Options -->
          <div style="background: white; border: 1px solid #F1F2F6; border-radius: 4px;">
            <label style="display: flex; align-items: center; padding: 16px 20px; border-bottom: 1px solid #F1F2F6; cursor: pointer; transition: background 0.15s;" onmouseover="this.style.background='#FCFCFC'" onmouseout="this.style.background='white'">
              <input type="radio" name="timezone" value="GMT-02:30" style="margin-right: 16px; width: 18px; height: 18px; cursor: pointer;">
              <span style="font-size: 14px; color: #2B2D3F;">(GMT-02:30) (Canada) Newfoundland</span>
            </label>

            <label style="display: flex; align-items: center; padding: 16px 20px; border-bottom: 1px solid #F1F2F6; cursor: pointer; transition: background 0.15s;" onmouseover="this.style.background='#FCFCFC'" onmouseout="this.style.background='white'">
              <input type="radio" name="timezone" value="GMT-03:00" style="margin-right: 16px; width: 18px; height: 18px; cursor: pointer;">
              <span style="font-size: 14px; color: #2B2D3F;">(GMT-03:00) (Canada) Atlantic Time</span>
            </label>

            <label style="display: flex; align-items: center; padding: 16px 20px; border-bottom: 1px solid #F1F2F6; cursor: pointer; transition: background 0.15s;" onmouseover="this.style.background='#FCFCFC'" onmouseout="this.style.background='white'">
              <input type="radio" name="timezone" value="GMT-04:00-CA" style="margin-right: 16px; width: 18px; height: 18px; cursor: pointer;">
              <span style="font-size: 14px; color: #2B2D3F;">(GMT-04:00) (Canada) Eastern Time</span>
            </label>

            <label style="display: flex; align-items: center; padding: 16px 20px; border-bottom: 1px solid #F1F2F6; cursor: pointer; transition: background 0.15s;" onmouseover="this.style.background='#FCFCFC'" onmouseout="this.style.background='white'">
              <input type="radio" name="timezone" value="GMT-04:00-US" style="margin-right: 16px; width: 18px; height: 18px; cursor: pointer;">
              <span style="font-size: 14px; color: #2B2D3F;">(GMT-04:00) (US) Eastern Time</span>
            </label>

            <label style="display: flex; align-items: center; padding: 16px 20px; border-bottom: 1px solid #F1F2F6; cursor: pointer; transition: background 0.15s; background: #E0F2FE;" onmouseover="this.style.background='#BAE6FD'" onmouseout="this.style.background='#E0F2FE'">
              <input type="radio" name="timezone" value="GMT-04:00-IN" checked style="margin-right: 16px; width: 18px; height: 18px; cursor: pointer;">
              <span style="font-size: 14px; color: #2B2D3F; font-weight: 500;">(GMT-04:00) US Indiana</span>
            </label>

            <label style="display: flex; align-items: center; padding: 16px 20px; border-bottom: 1px solid #F1F2F6; cursor: pointer; transition: background 0.15s;" onmouseover="this.style.background='#FCFCFC'" onmouseout="this.style.background='white'">
              <input type="radio" name="timezone" value="GMT-05:00-CA" style="margin-right: 16px; width: 18px; height: 18px; cursor: pointer;">
              <span style="font-size: 14px; color: #2B2D3F;">(GMT-05:00) (Canada) Central Time</span>
            </label>

            <label style="display: flex; align-items: center; padding: 16px 20px; border-bottom: 1px solid #F1F2F6; cursor: pointer; transition: background 0.15s;" onmouseover="this.style.background='#FCFCFC'" onmouseout="this.style.background='white'">
              <input type="radio" name="timezone" value="GMT-05:00-US" style="margin-right: 16px; width: 18px; height: 18px; cursor: pointer;">
              <span style="font-size: 14px; color: #2B2D3F;">(GMT-05:00) (US) Central Time</span>
            </label>

            <label style="display: flex; align-items: center; padding: 16px 20px; border-bottom: 1px solid #F1F2F6; cursor: pointer; transition: background 0.15s;" onmouseover="this.style.background='#FCFCFC'" onmouseout="this.style.background='white'">
              <input type="radio" name="timezone" value="GMT-06:00-CA" style="margin-right: 16px; width: 18px; height: 18px; cursor: pointer;">
              <span style="font-size: 14px; color: #2B2D3F;">(GMT-06:00) (Canada) Mountain Time</span>
            </label>

            <label style="display: flex; align-items: center; padding: 16px 20px; border-bottom: 1px solid #F1F2F6; cursor: pointer; transition: background 0.15s;" onmouseover="this.style.background='#FCFCFC'" onmouseout="this.style.background='white'">
              <input type="radio" name="timezone" value="GMT-06:00-US" style="margin-right: 16px; width: 18px; height: 18px; cursor: pointer;">
              <span style="font-size: 14px; color: #2B2D3F;">(GMT-06:00) (US) Mountain Time</span>
            </label>

            <label style="display: flex; align-items: center; padding: 16px 20px; border-bottom: 1px solid #F1F2F6; cursor: pointer; transition: background 0.15s;" onmouseover="this.style.background='#FCFCFC'" onmouseout="this.style.background='white'">
              <input type="radio" name="timezone" value="GMT-07:00-CA" style="margin-right: 16px; width: 18px; height: 18px; cursor: pointer;">
              <span style="font-size: 14px; color: #2B2D3F;">(GMT-07:00) (Canada) Pacific Time</span>
            </label>

            <label style="display: flex; align-items: center; padding: 16px 20px; border-bottom: 1px solid #F1F2F6; cursor: pointer; transition: background 0.15s;" onmouseover="this.style.background='#FCFCFC'" onmouseout="this.style.background='white'">
              <input type="radio" name="timezone" value="GMT-07:00-US" style="margin-right: 16px; width: 18px; height: 18px; cursor: pointer;">
              <span style="font-size: 14px; color: #2B2D3F;">(GMT-07:00) (US) Pacific Time</span>
            </label>

            <label style="display: flex; align-items: center; padding: 16px 20px; border-bottom: 1px solid #F1F2F6; cursor: pointer; transition: background 0.15s;" onmouseover="this.style.background='#FCFCFC'" onmouseout="this.style.background='white'">
              <input type="radio" name="timezone" value="GMT-07:00-AZ" style="margin-right: 16px; width: 18px; height: 18px; cursor: pointer;">
              <span style="font-size: 14px; color: #2B2D3F;">(GMT-07:00) US Arizona</span>
            </label>

            <label style="display: flex; align-items: center; padding: 16px 20px; border-bottom: 1px solid #F1F2F6; cursor: pointer; transition: background 0.15s;" onmouseover="this.style.background='#FCFCFC'" onmouseout="this.style.background='white'">
              <input type="radio" name="timezone" value="GMT-08:00" style="margin-right: 16px; width: 18px; height: 18px; cursor: pointer;">
              <span style="font-size: 14px; color: #2B2D3F;">(GMT-08:00) US Alaska</span>
            </label>

            <label style="display: flex; align-items: center; padding: 16px 20px; cursor: pointer; transition: background 0.15s;" onmouseover="this.style.background='#FCFCFC'" onmouseout="this.style.background='white'">
              <input type="radio" name="timezone" value="GMT-10:00" style="margin-right: 16px; width: 18px; height: 18px; cursor: pointer;">
              <span style="font-size: 14px; color: #2B2D3F;">(GMT-10:00) US Hawaii</span>
            </label>
          </div>
        </div>

        <!-- Bottom Actions - Fixed -->
        <div class="wizard-bottom-actions" style="position: fixed; bottom: 0; left: 340px; right: 0; background: white; padding: 20px 24px; border-top: 1px solid #F1F2F6; display: flex; justify-content: space-between; align-items: center; z-index: 50; box-shadow: 0 -2px 8px rgba(0,0,0,0.08); transition: left 0.3s ease;">
          <button onclick="backToFTE()" style="display: inline-flex; align-items: center; gap: 8px; background: none; border: none; color: #0D62FF; font-size: 13px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; cursor: pointer; padding: 0;" onmouseover="this.style.opacity='0.8'" onmouseout="this.style.opacity='1'">
            <i data-lucide="chevron-left" style="width: 18px; height: 18px;"></i>
            <span>BACK</span>
          </button>
          <button onclick="saveTimezoneAndNext()" class="action-button-primary" style="font-size: 13px; padding: 12px 32px;">
            SAVE & NEXT
          </button>
        </div>
        
        <!-- Spacer for fixed bottom bar -->
        <div style="height: 80px;"></div>
      </div>

      <!-- Setup: Open Hours -->
      <div id="setup-openhours" style="display: none;">
        <!-- Wizard Header -->
        <div style="background: white; padding: 24px 24px 20px 24px; margin: -24px -24px 24px -24px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
          <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 24px;">
            <h1 style="font-size: 20px; font-weight: 600; color: #2B2D3F; margin: 0;">Call Flow Setup</h1>
            <button onclick="backToFTE()" style="background: none; border: 1px solid #DDDDE2; color: #0D62FF; padding: 8px 20px; border-radius: 4px; font-size: 13px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; cursor: pointer; transition: all 0.15s;" onmouseover="this.style.background='#FCFCFC'" onmouseout="this.style.background='none'">
              SAVE & EXIT
            </button>
          </div>

          <!-- Wizard Steps -->
          <div style="display: flex; align-items: center; gap: 0; position: relative;">
            <!-- Step 1 - Active -->
            <div style="flex: 1; display: flex; align-items: center; gap: 12px; position: relative;">
              <div style="width: 32px; height: 32px; border-radius: 50%; background: #0D62FF; color: white; display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: 600; z-index: 2; position: relative;">1</div>
              <span style="font-size: 14px; font-weight: 600; color: #0D62FF; position: relative; z-index: 2; background: white; padding-right: 8px;">Schedules</span>
              <div style="position: absolute; left: 16px; top: 15px; height: 2px; background: #F1F2F6; width: 100%; z-index: 0;"></div>
            </div>

            <!-- Step 2 - Inactive -->
            <div style="flex: 1; display: flex; align-items: center; gap: 12px; position: relative;">
              <div style="width: 32px; height: 32px; border-radius: 50%; background: var(--neutral-100); border: 2px solid #DDDDE2; color: var(--neutral-400); display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: 600; z-index: 2; position: relative;">2</div>
              <span style="font-size: 14px; font-weight: 500; color: var(--neutral-400); position: relative; z-index: 2; background: white; padding-right: 8px;">Open Hours</span>
              <div style="position: absolute; left: 16px; top: 15px; height: 2px; background: #F1F2F6; width: 100%; z-index: 0;"></div>
            </div>

            <!-- Step 3 - Inactive -->
            <div style="flex: 1; display: flex; align-items: center; gap: 12px; position: relative;">
              <div style="width: 32px; height: 32px; border-radius: 50%; background: var(--neutral-100); border: 2px solid #DDDDE2; color: var(--neutral-400); display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: 600; z-index: 2; position: relative;">3</div>
              <span style="font-size: 14px; font-weight: 500; color: var(--neutral-400); position: relative; z-index: 2; background: white; padding-right: 8px;">Closed Hours & Holidays</span>
            </div>
          </div>
        </div>

        <!-- Tabs -->
        <div style="border-bottom: 2px solid #F1F2F6; margin-bottom: 32px; display: flex; gap: 24px;">
          <div onclick="navigateToTab('timezone')" style="padding: 12px 0; font-size: 14px; font-weight: 600; color: var(--neutral-400); cursor: pointer; transition: color 0.2s; border-bottom: 3px solid transparent; margin-bottom: -2px;" onmouseover="this.style.color='#0D62FF'" onmouseout="if(this.style.borderBottomColor === 'transparent') this.style.color='#B4B5BB'">TIME ZONE</div>
          <div onclick="navigateToTab('openhours')" style="padding: 12px 0; font-size: 14px; font-weight: 600; color: #2B2D3F; border-bottom: 3px solid #0D62FF; margin-bottom: -2px; cursor: pointer; transition: color 0.2s;">OPEN HOURS</div>
          <div onclick="navigateToTab('holidays')" style="padding: 12px 0; font-size: 14px; font-weight: 600; color: var(--neutral-400); cursor: pointer; transition: color 0.2s; border-bottom: 3px solid transparent; margin-bottom: -2px;" onmouseover="this.style.color='#0D62FF'" onmouseout="if(this.style.borderBottomColor === 'transparent') this.style.color='#B4B5BB'">HOLIDAYS</div>
        </div>

        <!-- Content -->
        <div style="max-width: 800px;">
          <h2 style="font-size: 20px; font-weight: 600; color: #2B2D3F; margin-bottom: 8px;">Open hours</h2>
          <p style="font-size: 14px; color: #70717D; margin-bottom: 24px;">Time schedule name: <span style="font-weight: 500;">Open hours</span></p>

          <!-- Info Banner -->
          <div style="background: #F5F8FF; border: 1px solid #C2D8FF; border-radius: 4px; padding: 16px; display: flex; gap: 12px; margin-bottom: 24px;">
            <i data-lucide="lightbulb" style="width: 20px; height: 20px; color: #0D62FF; flex-shrink: 0; margin-top: 2px;"></i>
            <div>
              <div style="font-size: 14px; font-weight: 600; color: #2B2D3F; margin-bottom: 4px;">ADD A BREAK DURING YOUR OPEN HOURS</div>
              <div style="font-size: 13px; color: #595A69; margin-bottom: 8px;">You can adjust your Open Hours by adding additional time slots for breaks. Any time that falls outside of your Open Hours, such as lunch breaks, will follow your Closed Hours configuration.</div>
              <a href="#" style="display: inline-flex; align-items: center; gap: 4px; font-size: 13px; color: #0D62FF; text-decoration: none; font-weight: 500;">
                <i data-lucide="help-circle" style="width: 16px; height: 16px;"></i>
                How do I configure breaks?
              </a>
            </div>
          </div>

          <!-- Open 24/7 Checkbox -->
          <label style="display: flex; align-items: center; gap: 8px; margin-bottom: 24px; cursor: pointer;">
            <input type="checkbox" id="open-24-7" onchange="toggleOpen247()" style="width: 18px; height: 18px; cursor: pointer;">
            <span style="font-size: 14px; color: #2B2D3F;">Open 24/7</span>
            <i data-lucide="info" style="width: 16px; height: 16px; color: var(--neutral-400);"></i>
          </label>

          <!-- Weekly Schedule Container -->
          <div style="background: white; border: 1px solid #F1F2F6; border-radius: 8px; padding: 24px; box-shadow: 0 1px 3px rgba(0,0,0,0.05);">
            <!-- Weekly Schedule -->
            <div style="display: flex; flex-direction: column; gap: 24px;">
            <!-- Monday -->
            <div style="display: flex; align-items: center; gap: 16px;">
              <div style="width: 100px; font-size: 13px; font-weight: 600; color: #595A69; text-transform: uppercase;">MONDAY</div>
              <label class="toggle-switch">
                <input type="checkbox" id="toggle-monday" checked onchange="toggleDay('monday')">
                <span class="toggle-slider"></span>
              </label>
              <span id="badge-monday" style="padding: 4px 12px; background: #0D62FF; color: white; border-radius: 4px; font-size: 12px; font-weight: 600;">OPEN</span>
              <div id="times-monday" style="display: flex; align-items: center; gap: 12px; flex: 1;">
                <input type="time" value="09:00" style="padding: 8px 12px; border: 1px solid #DDDDE2; border-radius: 4px; font-size: 14px; cursor: pointer;">
                <span style="color: var(--neutral-400);">—</span>
                <input type="time" value="18:00" style="padding: 8px 12px; border: 1px solid #DDDDE2; border-radius: 4px; font-size: 14px; cursor: pointer;">
                <button style="background: none; border: none; cursor: pointer; padding: 4px;" title="Copy to other days">
                  <i data-lucide="copy" style="width: 18px; height: 18px; color: var(--neutral-400);"></i>
                </button>
              </div>
            </div>
            <div style="padding-left: 116px; margin-top: -16px;">
              <a href="#" style="font-size: 13px; color: #0D62FF; text-decoration: none; font-weight: 500;">+ Add time slot</a>
            </div>

            <!-- Tuesday -->
            <div style="display: flex; align-items: center; gap: 16px;">
              <div style="width: 100px; font-size: 13px; font-weight: 600; color: #595A69; text-transform: uppercase;">TUESDAY</div>
              <label class="toggle-switch">
                <input type="checkbox" id="toggle-tuesday" checked onchange="toggleDay('tuesday')">
                <span class="toggle-slider"></span>
              </label>
              <span id="badge-tuesday" style="padding: 4px 12px; background: #0D62FF; color: white; border-radius: 4px; font-size: 12px; font-weight: 600;">OPEN</span>
              <div id="times-tuesday" style="display: flex; align-items: center; gap: 12px; flex: 1;">
                <input type="time" value="09:00" style="padding: 8px 12px; border: 1px solid #DDDDE2; border-radius: 4px; font-size: 14px; cursor: pointer;">
                <span style="color: var(--neutral-400);">—</span>
                <input type="time" value="18:00" style="padding: 8px 12px; border: 1px solid #DDDDE2; border-radius: 4px; font-size: 14px; cursor: pointer;">
                <button style="background: none; border: none; cursor: pointer; padding: 4px;" title="Copy to other days">
                  <i data-lucide="copy" style="width: 18px; height: 18px; color: var(--neutral-400);"></i>
                </button>
              </div>
            </div>
            <div style="padding-left: 116px; margin-top: -16px;">
              <a href="#" style="font-size: 13px; color: #0D62FF; text-decoration: none; font-weight: 500;">+ Add time slot</a>
            </div>

            <!-- Wednesday -->
            <div style="display: flex; align-items: center; gap: 16px;">
              <div style="width: 100px; font-size: 13px; font-weight: 600; color: #595A69; text-transform: uppercase;">WEDNESDAY</div>
              <label class="toggle-switch">
                <input type="checkbox" id="toggle-wednesday" onchange="toggleDay('wednesday')">
                <span class="toggle-slider"></span>
              </label>
              <span id="badge-wednesday" style="padding: 4px 12px; background: #F1F2F6; color: #70717D; border-radius: 4px; font-size: 12px; font-weight: 600;">CLOSED</span>
              <div id="times-wednesday" style="display: none; align-items: center; gap: 12px; flex: 1;">
                <input type="time" value="09:00" style="padding: 8px 12px; border: 1px solid #DDDDE2; border-radius: 4px; font-size: 14px; cursor: pointer;">
                <span style="color: var(--neutral-400);">—</span>
                <input type="time" value="18:00" style="padding: 8px 12px; border: 1px solid #DDDDE2; border-radius: 4px; font-size: 14px; cursor: pointer;">
                <button style="background: none; border: none; cursor: pointer; padding: 4px;" title="Copy to other days">
                  <i data-lucide="copy" style="width: 18px; height: 18px; color: var(--neutral-400);"></i>
                </button>
              </div>
            </div>

            <!-- Thursday -->
            <div style="display: flex; align-items: center; gap: 16px;">
              <div style="width: 100px; font-size: 13px; font-weight: 600; color: #595A69; text-transform: uppercase;">THURSDAY</div>
              <label class="toggle-switch">
                <input type="checkbox" id="toggle-thursday" checked onchange="toggleDay('thursday')">
                <span class="toggle-slider"></span>
              </label>
              <span id="badge-thursday" style="padding: 4px 12px; background: #0D62FF; color: white; border-radius: 4px; font-size: 12px; font-weight: 600;">OPEN</span>
              <div id="times-thursday" style="display: flex; align-items: center; gap: 12px; flex: 1;">
                <input type="text" value="24 hours" readonly style="padding: 8px 12px; border: 1px solid #DDDDE2; border-radius: 4px; font-size: 14px; background: #FCFCFC; color: #70717D;">
                <button style="background: none; border: none; cursor: pointer; padding: 4px;" title="Copy to other days">
                  <i data-lucide="copy" style="width: 18px; height: 18px; color: var(--neutral-400);"></i>
                </button>
              </div>
            </div>

            <!-- Friday -->
            <div style="display: flex; align-items: center; gap: 16px;">
              <div style="width: 100px; font-size: 13px; font-weight: 600; color: #595A69; text-transform: uppercase;">FRIDAY</div>
              <label class="toggle-switch">
                <input type="checkbox" id="toggle-friday" onchange="toggleDay('friday')">
                <span class="toggle-slider"></span>
              </label>
              <span id="badge-friday" style="padding: 4px 12px; background: #F1F2F6; color: #70717D; border-radius: 4px; font-size: 12px; font-weight: 600;">CLOSED</span>
              <div id="times-friday" style="display: none; align-items: center; gap: 12px; flex: 1;">
                <input type="time" value="09:00" style="padding: 8px 12px; border: 1px solid #DDDDE2; border-radius: 4px; font-size: 14px; cursor: pointer;">
                <span style="color: var(--neutral-400);">—</span>
                <input type="time" value="18:00" style="padding: 8px 12px; border: 1px solid #DDDDE2; border-radius: 4px; font-size: 14px; cursor: pointer;">
                <button style="background: none; border: none; cursor: pointer; padding: 4px;" title="Copy to other days">
                  <i data-lucide="copy" style="width: 18px; height: 18px; color: var(--neutral-400);"></i>
                </button>
              </div>
            </div>

            <!-- Saturday -->
            <div style="display: flex; align-items: center; gap: 16px;">
              <div style="width: 100px; font-size: 13px; font-weight: 600; color: #595A69; text-transform: uppercase;">SATURDAY</div>
              <label class="toggle-switch">
                <input type="checkbox" id="toggle-saturday" checked onchange="toggleDay('saturday')">
                <span class="toggle-slider"></span>
              </label>
              <span id="badge-saturday" style="padding: 4px 12px; background: #0D62FF; color: white; border-radius: 4px; font-size: 12px; font-weight: 600;">OPEN</span>
              <div id="times-saturday" style="display: flex; align-items: center; gap: 12px; flex: 1;">
                <input type="text" value="24 hours" readonly style="padding: 8px 12px; border: 1px solid #DDDDE2; border-radius: 4px; font-size: 14px; background: #FCFCFC; color: #70717D;">
                <button style="background: none; border: none; cursor: pointer; padding: 4px;" title="Copy to other days">
                  <i data-lucide="copy" style="width: 18px; height: 18px; color: var(--neutral-400);"></i>
                </button>
              </div>
            </div>

            <!-- Sunday -->
            <div style="display: flex; align-items: center; gap: 16px;">
              <div style="width: 100px; font-size: 13px; font-weight: 600; color: #595A69; text-transform: uppercase;">SUNDAY</div>
              <label class="toggle-switch">
                <input type="checkbox" id="toggle-sunday" onchange="toggleDay('sunday')">
                <span class="toggle-slider"></span>
              </label>
              <span id="badge-sunday" style="padding: 4px 12px; background: #F1F2F6; color: #70717D; border-radius: 4px; font-size: 12px; font-weight: 600;">CLOSED</span>
              <div id="times-sunday" style="display: none; align-items: center; gap: 12px; flex: 1;">
                <input type="time" value="09:00" style="padding: 8px 12px; border: 1px solid #DDDDE2; border-radius: 4px; font-size: 14px; cursor: pointer;">
                <span style="color: var(--neutral-400);">—</span>
                <input type="time" value="18:00" style="padding: 8px 12px; border: 1px solid #DDDDE2; border-radius: 4px; font-size: 14px; cursor: pointer;">
                <button style="background: none; border: none; cursor: pointer; padding: 4px;" title="Copy to other days">
                  <i data-lucide="copy" style="width: 18px; height: 18px; color: var(--neutral-400);"></i>
                </button>
              </div>
            </div>
          </div>
          </div>
        </div>

        <!-- Bottom Actions - Fixed -->
        <div class="wizard-bottom-actions" style="position: fixed; bottom: 0; left: 340px; right: 0; background: white; padding: 20px 24px; border-top: 1px solid #F1F2F6; display: flex; justify-content: space-between; align-items: center; z-index: 50; box-shadow: 0 -2px 8px rgba(0,0,0,0.08); transition: left 0.3s ease;">
          <button onclick="backToTimezone()" style="display: inline-flex; align-items: center; gap: 8px; background: none; border: none; color: #0D62FF; font-size: 13px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; cursor: pointer; padding: 0;" onmouseover="this.style.opacity='0.8'" onmouseout="this.style.opacity='1'">
            <i data-lucide="chevron-left" style="width: 18px; height: 18px;"></i>
            <span>BACK</span>
          </button>
          <button onclick="saveOpenHoursAndNext()" class="action-button-primary" style="font-size: 13px; padding: 12px 32px;">
            SAVE & NEXT
          </button>
        </div>
        
        <!-- Spacer for fixed bottom bar -->
        <div style="height: 80px;"></div>
      </div>

      <!-- Setup: Holidays -->
      <div id="setup-holidays" style="display: none;">
        <!-- Wizard Header -->
        <div style="background: white; padding: 24px 24px 20px 24px; margin: -24px -24px 24px -24px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
          <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 24px;">
            <h1 style="font-size: 20px; font-weight: 600; color: #2B2D3F; margin: 0;">Call Flow Setup</h1>
            <button onclick="backToFTE()" style="background: none; border: 1px solid #DDDDE2; color: #0D62FF; padding: 8px 20px; border-radius: 4px; font-size: 13px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; cursor: pointer; transition: all 0.15s;" onmouseover="this.style.background='#FCFCFC'" onmouseout="this.style.background='none'">
              SAVE & EXIT
            </button>
          </div>

          <!-- Wizard Steps -->
          <div style="display: flex; align-items: center; gap: 0; position: relative;">
            <!-- Step 1 - Active -->
            <div style="flex: 1; display: flex; align-items: center; gap: 12px; position: relative;">
              <div style="width: 32px; height: 32px; border-radius: 50%; background: #0D62FF; color: white; display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: 600; z-index: 2; position: relative;">1</div>
              <span style="font-size: 14px; font-weight: 600; color: #0D62FF; position: relative; z-index: 2; background: white; padding-right: 8px;">Schedules</span>
              <div style="position: absolute; left: 16px; top: 15px; height: 2px; background: #F1F2F6; width: 100%; z-index: 0;"></div>
            </div>

            <!-- Step 2 - Inactive -->
            <div style="flex: 1; display: flex; align-items: center; gap: 12px; position: relative;">
              <div style="width: 32px; height: 32px; border-radius: 50%; background: var(--neutral-100); border: 2px solid #DDDDE2; color: var(--neutral-400); display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: 600; z-index: 2; position: relative;">2</div>
              <span style="font-size: 14px; font-weight: 500; color: var(--neutral-400); position: relative; z-index: 2; background: white; padding-right: 8px;">Open Hours</span>
              <div style="position: absolute; left: 16px; top: 15px; height: 2px; background: #F1F2F6; width: 100%; z-index: 0;"></div>
            </div>

            <!-- Step 3 - Inactive -->
            <div style="flex: 1; display: flex; align-items: center; gap: 12px; position: relative;">
              <div style="width: 32px; height: 32px; border-radius: 50%; background: var(--neutral-100); border: 2px solid #DDDDE2; color: var(--neutral-400); display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: 600; z-index: 2; position: relative;">3</div>
              <span style="font-size: 14px; font-weight: 500; color: var(--neutral-400); position: relative; z-index: 2; background: white; padding-right: 8px;">Closed Hours & Holidays</span>
            </div>
          </div>
        </div>

        <!-- Tabs -->
        <div style="border-bottom: 2px solid #F1F2F6; margin-bottom: 32px; display: flex; gap: 24px;">
          <div onclick="navigateToTab('timezone')" style="padding: 12px 0; font-size: 14px; font-weight: 600; color: var(--neutral-400); cursor: pointer; transition: color 0.2s; border-bottom: 3px solid transparent; margin-bottom: -2px;" onmouseover="this.style.color='#0D62FF'" onmouseout="if(this.style.borderBottomColor === 'transparent') this.style.color='#B4B5BB'">TIME ZONE</div>
          <div onclick="navigateToTab('openhours')" style="padding: 12px 0; font-size: 14px; font-weight: 600; color: var(--neutral-400); cursor: pointer; transition: color 0.2s; border-bottom: 3px solid transparent; margin-bottom: -2px;" onmouseover="this.style.color='#0D62FF'" onmouseout="if(this.style.borderBottomColor === 'transparent') this.style.color='#B4B5BB'">OPEN HOURS</div>
          <div onclick="navigateToTab('holidays')" style="padding: 12px 0; font-size: 14px; font-weight: 600; color: #2B2D3F; border-bottom: 3px solid #0D62FF; margin-bottom: -2px; cursor: pointer; transition: color 0.2s;">HOLIDAYS</div>
        </div>

        <!-- Content -->
        <div style="max-width: 800px;">
          <h2 style="font-size: 20px; font-weight: 600; color: #2B2D3F; margin-bottom: 8px;">What are your holidays?</h2>
          <p style="font-size: 14px; color: #70717D; margin-bottom: 32px;">Select the holidays during which your business is closed.</p>

          <!-- Holiday List Container -->
          <div style="background: white; border: 1px solid #F1F2F6; border-radius: 8px; padding: 24px; box-shadow: 0 1px 3px rgba(0,0,0,0.05); margin-bottom: 32px;">
            <!-- Select All -->
            <label style="display: flex; align-items: center; gap: 12px; padding: 12px 0; border-bottom: 1px solid #F1F2F6; margin-bottom: 16px; cursor: pointer;">
              <input type="checkbox" id="select-all-holidays" onchange="toggleAllHolidays()" style="width: 18px; height: 18px; cursor: pointer;">
              <span style="font-size: 14px; color: #2B2D3F; font-weight: 500;">Select all</span>
            </label>

            <!-- Federal Holidays -->
            <div style="display: flex; flex-direction: column; gap: 12px;">
              <label style="display: flex; align-items: center; gap: 12px; cursor: pointer; padding: 8px 0;">
                <input type="checkbox" class="holiday-checkbox" checked style="width: 18px; height: 18px; cursor: pointer;">
                <span style="font-size: 14px; color: #2B2D3F;">New Year's Day</span>
              </label>

              <label style="display: flex; align-items: center; gap: 12px; cursor: pointer; padding: 8px 0;">
                <input type="checkbox" class="holiday-checkbox" checked style="width: 18px; height: 18px; cursor: pointer;">
                <span style="font-size: 14px; color: #2B2D3F;">Martin Luther King, Jr. Day</span>
              </label>

              <label style="display: flex; align-items: center; gap: 12px; cursor: pointer; padding: 8px 0;">
                <input type="checkbox" class="holiday-checkbox" checked style="width: 18px; height: 18px; cursor: pointer;">
                <span style="font-size: 14px; color: #2B2D3F;">Presidents' Day</span>
              </label>

              <label style="display: flex; align-items: center; gap: 12px; cursor: pointer; padding: 8px 0;">
                <input type="checkbox" class="holiday-checkbox" checked style="width: 18px; height: 18px; cursor: pointer;">
                <span style="font-size: 14px; color: #2B2D3F;">Memorial Day</span>
              </label>

              <label style="display: flex; align-items: center; gap: 12px; cursor: pointer; padding: 8px 0;">
                <input type="checkbox" class="holiday-checkbox" style="width: 18px; height: 18px; cursor: pointer;">
                <span style="font-size: 14px; color: #2B2D3F;">Juneteenth</span>
              </label>

              <label style="display: flex; align-items: center; gap: 12px; cursor: pointer; padding: 8px 0;">
                <input type="checkbox" class="holiday-checkbox" checked style="width: 18px; height: 18px; cursor: pointer;">
                <span style="font-size: 14px; color: #2B2D3F;">Independence Day</span>
              </label>

              <label style="display: flex; align-items: center; gap: 12px; cursor: pointer; padding: 8px 0;">
                <input type="checkbox" class="holiday-checkbox" checked style="width: 18px; height: 18px; cursor: pointer;">
                <span style="font-size: 14px; color: #2B2D3F;">Labor Day</span>
              </label>

              <label style="display: flex; align-items: center; gap: 12px; cursor: pointer; padding: 8px 0;">
                <input type="checkbox" class="holiday-checkbox" checked style="width: 18px; height: 18px; cursor: pointer;">
                <span style="font-size: 14px; color: #2B2D3F;">Columbus Day</span>
              </label>

              <label style="display: flex; align-items: center; gap: 12px; cursor: pointer; padding: 8px 0;">
                <input type="checkbox" class="holiday-checkbox" checked style="width: 18px; height: 18px; cursor: pointer;">
                <span style="font-size: 14px; color: #2B2D3F;">Veterans Day</span>
              </label>

              <label style="display: flex; align-items: center; gap: 12px; cursor: pointer; padding: 8px 0;">
                <input type="checkbox" class="holiday-checkbox" checked style="width: 18px; height: 18px; cursor: pointer;">
                <span style="font-size: 14px; color: #2B2D3F;">Thanksgiving Day</span>
              </label>

              <label style="display: flex; align-items: center; gap: 12px; cursor: pointer; padding: 8px 0;">
                <input type="checkbox" class="holiday-checkbox" style="width: 18px; height: 18px; cursor: pointer;">
                <span style="font-size: 14px; color: #2B2D3F;">Black Friday</span>
                <span style="font-size: 12px; color: var(--neutral-500); margin-left: auto;">Non-Federal Holiday</span>
              </label>

              <label style="display: flex; align-items: center; gap: 12px; cursor: pointer; padding: 8px 0;">
                <input type="checkbox" class="holiday-checkbox" checked style="width: 18px; height: 18px; cursor: pointer;">
                <span style="font-size: 14px; color: #2B2D3F;">Christmas Eve</span>
                <span style="font-size: 12px; color: var(--neutral-500); margin-left: auto;">Non-Federal Holiday</span>
              </label>

              <label style="display: flex; align-items: center; gap: 12px; cursor: pointer; padding: 8px 0;">
                <input type="checkbox" class="holiday-checkbox" checked style="width: 18px; height: 18px; cursor: pointer;">
                <span style="font-size: 14px; color: #2B2D3F;">Christmas Day</span>
              </label>

              <label style="display: flex; align-items: center; gap: 12px; cursor: pointer; padding: 8px 0;">
                <input type="checkbox" class="holiday-checkbox" style="width: 18px; height: 18px; cursor: pointer;">
                <span style="font-size: 14px; color: #2B2D3F;">New Year's Eve</span>
                <span style="font-size: 12px; color: var(--neutral-500); margin-left: auto;">Non-Federal Holiday</span>
              </label>
            </div>

            <!-- Custom Holidays Divider -->
            <div style="display: flex; align-items: center; gap: 16px; margin: 32px 0 24px 0;">
              <div style="flex: 1; height: 1px; background: #DDDDE2;"></div>
              <span style="font-size: 13px; color: var(--neutral-500); text-transform: uppercase; letter-spacing: 0.5px;">Custom holidays</span>
              <div style="flex: 1; height: 1px; background: #DDDDE2;"></div>
            </div>

            <!-- Custom Holiday Item -->
            <div style="display: flex; align-items: center; gap: 12px; padding: 12px; background: #FCFCFC; border: 1px solid #F1F2F6; border-radius: 4px; margin-bottom: 16px;">
              <span style="font-size: 14px; color: #2B2D3F; font-weight: 500; flex: 1;">Custom</span>
              <button style="background: none; border: none; cursor: pointer; padding: 4px;">
                <i data-lucide="edit-2" style="width: 18px; height: 18px; color: #70717D;"></i>
              </button>
              <button style="background: none; border: none; cursor: pointer; padding: 4px;">
                <i data-lucide="trash-2" style="width: 18px; height: 18px; color: #70717D;"></i>
              </button>
            </div>
            <div style="font-size: 14px; color: #70717D; margin-bottom: 16px; padding-left: 12px;">Oct 20, 2025</div>

            <!-- Add Custom Holiday -->
            <a href="#" style="display: inline-flex; align-items: center; gap: 6px; font-size: 13px; color: #0D62FF; text-decoration: none; font-weight: 600;">
              + Add custom holiday
            </a>
          </div>
        </div>

        <!-- Bottom Actions - Fixed -->
        <div class="wizard-bottom-actions" style="position: fixed; bottom: 0; left: 340px; right: 0; background: white; padding: 20px 24px; border-top: 1px solid #F1F2F6; display: flex; justify-content: space-between; align-items: center; z-index: 50; box-shadow: 0 -2px 8px rgba(0,0,0,0.08); transition: left 0.3s ease;">
          <button onclick="backToOpenHours()" style="display: inline-flex; align-items: center; gap: 8px; background: none; border: none; color: #0D62FF; font-size: 13px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; cursor: pointer; padding: 0;" onmouseover="this.style.opacity='0.8'" onmouseout="this.style.opacity='1'">
            <i data-lucide="chevron-left" style="width: 18px; height: 18px;"></i>
            <span>BACK</span>
          </button>
          <button onclick="saveHolidaysAndComplete()" class="action-button-primary" style="font-size: 13px; padding: 12px 32px;">
            SAVE & NEXT
          </button>
        </div>
        
        <!-- Spacer for fixed bottom bar -->
        <div style="height: 80px;"></div>
      </div>

      <!-- Setup: Routing Action (Open Hours) -->
      <div id="setup-routing" style="display: none;">
        <!-- Wizard Header -->
        <div style="background: white; padding: 24px 24px 20px 24px; margin: -24px -24px 24px -24px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
          <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 24px;">
            <h1 style="font-size: 20px; font-weight: 600; color: #2B2D3F; margin: 0;">Call Flow Setup</h1>
            <button onclick="backToFTE()" style="background: none; border: 1px solid #DDDDE2; color: #0D62FF; padding: 8px 20px; border-radius: 4px; font-size: 13px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; cursor: pointer; transition: all 0.15s;" onmouseover="this.style.background='#FCFCFC'" onmouseout="this.style.background='none'">
              SAVE & EXIT
            </button>
          </div>

          <!-- Wizard Steps -->
          <div style="display: flex; align-items: center; gap: 0; position: relative;">
            <!-- Step 1 - Completed -->
            <div style="flex: 1; display: flex; align-items: center; gap: 12px; position: relative;">
              <div style="width: 32px; height: 32px; border-radius: 50%; background: #22C55E; color: white; display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: 600; z-index: 2; position: relative;">
                <i data-lucide="check" style="width: 18px; height: 18px;"></i>
              </div>
              <span style="font-size: 14px; font-weight: 500; color: #595A69; position: relative; z-index: 2; background: white; padding-right: 8px;">Schedules</span>
              <div style="position: absolute; left: 16px; top: 15px; height: 2px; background: #22C55E; width: 100%; z-index: 0;"></div>
            </div>

            <!-- Step 2 - Active -->
            <div style="flex: 1; display: flex; align-items: center; gap: 12px; position: relative;">
              <div style="width: 32px; height: 32px; border-radius: 50%; background: #0D62FF; color: white; display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: 600; z-index: 2; position: relative;">2</div>
              <span style="font-size: 14px; font-weight: 600; color: #0D62FF; position: relative; z-index: 2; background: white; padding-right: 8px;">Open Hours</span>
              <div style="position: absolute; left: 16px; top: 15px; height: 2px; background: #F1F2F6; width: 100%; z-index: 0;"></div>
            </div>

            <!-- Step 3 - Inactive -->
            <div style="flex: 1; display: flex; align-items: center; gap: 12px; position: relative;">
              <div style="width: 32px; height: 32px; border-radius: 50%; background: var(--neutral-100); border: 2px solid #DDDDE2; color: var(--neutral-400); display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: 600; z-index: 2; position: relative;">3</div>
              <span style="font-size: 14px; font-weight: 500; color: var(--neutral-400); position: relative; z-index: 2; background: white; padding-right: 8px;">Closed Hours & Holidays</span>
            </div>
          </div>
        </div>

        <!-- Section Header -->
        <div style="margin-bottom: 32px;">
          <div style="font-size: 12px; font-weight: 600; color: #70717D; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px; text-decoration: underline; text-decoration-thickness: 2px; text-underline-offset: 4px;">ROUTING ACTION</div>
        </div>

        <!-- Content -->
        <div style="max-width: 1200px;">
          <h2 style="font-size: 24px; font-weight: 600; color: #2B2D3F; margin-bottom: 8px;">How should incoming calls be answered during <span style="background: #FEF9C3; padding: 2px 4px;">open hours</span>?</h2>

          <!-- Routing Option Cards -->
          <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-top: 40px;">
            <!-- Keypad Options + Greeting -->
            <div onclick="goToKeypadConfig('open')" style="background: linear-gradient(135deg, #FFFFFF 0%, #F5F8FF 100%); border: 2px solid #F1F2F6; border-radius: 12px; padding: 28px 24px; cursor: pointer; transition: all 0.3s; display: flex; flex-direction: column; height: 300px; position: relative; overflow: hidden;" onmouseover="this.style.borderColor='#0D62FF'; this.style.boxShadow='0 8px 24px rgba(13,98,255,0.12)'; this.style.transform='translateY(-4px)'" onmouseout="this.style.borderColor='#F1F2F6'; this.style.boxShadow='none'; this.style.transform='translateY(0)'">
              <div style="position: absolute; top: -20px; right: -20px; width: 80px; height: 80px; background: radial-gradient(circle, rgba(13,98,255,0.08) 0%, transparent 70%); border-radius: 50%;"></div>
              <div style="width: 56px; height: 56px; background: linear-gradient(135deg, #E0F2FE 0%, #BAE6FD 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center; margin-bottom: 16px; box-shadow: 0 4px 12px rgba(13,98,255,0.15);">
                <i data-lucide="grid-3x3" style="width: 28px; height: 28px; color: #0D62FF; stroke-width: 2.5;"></i>
              </div>
              <h3 style="font-size: 16px; font-weight: 600; color: #2B2D3F; margin-bottom: 10px; line-height: 1.3;">Keypad Options + Greeting</h3>
              <p style="font-size: 13px; color: #70717D; line-height: 1.5;">Callers route themselves using interactive keypad menu options</p>
            </div>

            <!-- User or External Number -->
            <div style="background: linear-gradient(135deg, #FFFFFF 0%, #F5F8FF 100%); border: 2px solid #F1F2F6; border-radius: 12px; padding: 28px 24px; cursor: pointer; transition: all 0.3s; display: flex; flex-direction: column; height: 300px; position: relative; overflow: hidden;" onmouseover="this.style.borderColor='#0D62FF'; this.style.boxShadow='0 8px 24px rgba(13,98,255,0.12)'; this.style.transform='translateY(-4px)'" onmouseout="this.style.borderColor='#F1F2F6'; this.style.boxShadow='none'; this.style.transform='translateY(0)'">
              <div style="position: absolute; top: -20px; right: -20px; width: 80px; height: 80px; background: radial-gradient(circle, rgba(13,98,255,0.08) 0%, transparent 70%); border-radius: 50%;"></div>
              <div style="width: 56px; height: 56px; background: linear-gradient(135deg, #E0F2FE 0%, #BAE6FD 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center; margin-bottom: 16px; box-shadow: 0 4px 12px rgba(13,98,255,0.15);">
                <i data-lucide="phone-forwarded" style="width: 28px; height: 28px; color: #0D62FF; stroke-width: 2.5;"></i>
              </div>
              <h3 style="font-size: 16px; font-weight: 600; color: #2B2D3F; margin-bottom: 10px; line-height: 1.3;">User or External Number</h3>
              <p style="font-size: 13px; color: #70717D; line-height: 1.5;">Route calls directly to a user or external answering service</p>
            </div>

            <!-- Hunt Group -->
            <div style="background: linear-gradient(135deg, #FFFFFF 0%, #F5F8FF 100%); border: 2px solid #F1F2F6; border-radius: 12px; padding: 28px 24px; cursor: pointer; transition: all 0.3s; display: flex; flex-direction: column; height: 300px; position: relative; overflow: hidden;" onmouseover="this.style.borderColor='#0D62FF'; this.style.boxShadow='0 8px 24px rgba(13,98,255,0.12)'; this.style.transform='translateY(-4px)'" onmouseout="this.style.borderColor='#F1F2F6'; this.style.boxShadow='none'; this.style.transform='translateY(0)'">
              <div style="position: absolute; top: -20px; right: -20px; width: 80px; height: 80px; background: radial-gradient(circle, rgba(13,98,255,0.08) 0%, transparent 70%); border-radius: 50%;"></div>
              <div style="width: 56px; height: 56px; background: linear-gradient(135deg, #E0F2FE 0%, #BAE6FD 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center; margin-bottom: 16px; box-shadow: 0 4px 12px rgba(13,98,255,0.15);">
                <i data-lucide="users-round" style="width: 28px; height: 28px; color: #0D62FF; stroke-width: 2.5;"></i>
              </div>
              <h3 style="font-size: 16px; font-weight: 600; color: #2B2D3F; margin-bottom: 10px; line-height: 1.3;">Hunt Group</h3>
              <p style="font-size: 13px; color: #70717D; line-height: 1.5;">Route calls to a group of users in sequence or simultaneously</p>
            </div>

            <!-- Voicemail -->
            <div style="background: linear-gradient(135deg, #FFFFFF 0%, #F5F8FF 100%); border: 2px solid #F1F2F6; border-radius: 12px; padding: 28px 24px; cursor: pointer; transition: all 0.3s; display: flex; flex-direction: column; height: 300px; position: relative; overflow: hidden;" onmouseover="this.style.borderColor='#0D62FF'; this.style.boxShadow='0 8px 24px rgba(13,98,255,0.12)'; this.style.transform='translateY(-4px)'" onmouseout="this.style.borderColor='#F1F2F6'; this.style.boxShadow='none'; this.style.transform='translateY(0)'">
              <div style="position: absolute; top: -20px; right: -20px; width: 80px; height: 80px; background: radial-gradient(circle, rgba(13,98,255,0.08) 0%, transparent 70%); border-radius: 50%;"></div>
              <div style="width: 56px; height: 56px; background: linear-gradient(135deg, #E0F2FE 0%, #BAE6FD 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center; margin-bottom: 16px; box-shadow: 0 4px 12px rgba(13,98,255,0.15);">
                <i data-lucide="voicemail" style="width: 28px; height: 28px; color: #0D62FF; stroke-width: 2.5;"></i>
              </div>
              <h3 style="font-size: 16px; font-weight: 600; color: #2B2D3F; margin-bottom: 10px; line-height: 1.3;">Voicemail</h3>
              <p style="font-size: 13px; color: #70717D; line-height: 1.5;">Route calls to a voicemail box for later retrieval</p>
            </div>
          </div>
        </div>

        <!-- Bottom Actions - Fixed -->
        <div class="wizard-bottom-actions" style="position: fixed; bottom: 0; left: 340px; right: 0; background: white; padding: 20px 24px; border-top: 1px solid #F1F2F6; display: flex; justify-content: flex-start; align-items: center; z-index: 50; box-shadow: 0 -2px 8px rgba(0,0,0,0.08); transition: left 0.3s ease;">
          <button onclick="backToHolidays()" style="display: inline-flex; align-items: center; gap: 8px; background: none; border: none; color: #0D62FF; font-size: 13px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; cursor: pointer; padding: 0;" onmouseover="this.style.opacity='0.8'" onmouseout="this.style.opacity='1'">
            <i data-lucide="chevron-left" style="width: 18px; height: 18px;"></i>
            <span>BACK</span>
          </button>
        </div>
        
        <!-- Spacer for fixed bottom bar -->
        <div style="height: 80px;"></div>
      </div>

      <!-- Setup: Routing Action (Closed Hours & Holidays) -->
      <div id="setup-routing-closed" style="display: none;">
        <!-- Wizard Header -->
        <div style="background: white; padding: 24px 24px 20px 24px; margin: -24px -24px 24px -24px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
          <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 24px;">
            <h1 style="font-size: 20px; font-weight: 600; color: #2B2D3F; margin: 0;">Call Flow Setup</h1>
            <button onclick="saveAndExit()" style="background: none; border: 1px solid #DDDDE2; color: #0D62FF; padding: 8px 20px; border-radius: 4px; font-size: 13px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; cursor: pointer; transition: all 0.15s;" onmouseover="this.style.background='#FCFCFC'" onmouseout="this.style.background='none'">
              SAVE & EXIT
            </button>
          </div>

          <!-- Wizard Steps -->
          <div style="display: flex; align-items: center; gap: 0; position: relative;">
            <!-- Step 1 - Completed -->
            <div style="flex: 1; display: flex; align-items: center; gap: 12px; position: relative;">
              <div style="width: 32px; height: 32px; border-radius: 50%; background: #22C55E; color: white; display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: 600; z-index: 2; position: relative;">
                <i data-lucide="check" style="width: 18px; height: 18px;"></i>
              </div>
              <span style="font-size: 14px; font-weight: 500; color: #595A69; position: relative; z-index: 2; background: white; padding-right: 8px;">Schedules</span>
              <div style="position: absolute; left: 16px; top: 15px; height: 2px; background: #22C55E; width: 100%; z-index: 0;"></div>
            </div>

            <!-- Step 2 - Completed -->
            <div style="flex: 1; display: flex; align-items: center; gap: 12px; position: relative;">
              <div style="width: 32px; height: 32px; border-radius: 50%; background: #22C55E; color: white; display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: 600; z-index: 2; position: relative;">
                <i data-lucide="check" style="width: 18px; height: 18px;"></i>
              </div>
              <span style="font-size: 14px; font-weight: 500; color: #595A69; position: relative; z-index: 2; background: white; padding-right: 8px;">Open Hours</span>
              <div style="position: absolute; left: 16px; top: 15px; height: 2px; background: #22C55E; width: 100%; z-index: 0;"></div>
            </div>

            <!-- Step 3 - Active -->
            <div style="flex: 1; display: flex; align-items: center; gap: 12px; position: relative;">
              <div style="width: 32px; height: 32px; border-radius: 50%; background: #0D62FF; color: white; display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: 600; z-index: 2; position: relative;">3</div>
              <span style="font-size: 14px; font-weight: 600; color: #0D62FF; position: relative; z-index: 2; background: white; padding-right: 8px;">Closed Hours & Holidays</span>
            </div>
          </div>
        </div>

        <!-- Section Header -->
        <div style="margin-bottom: 32px;">
          <div style="font-size: 12px; font-weight: 600; color: #70717D; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 8px; text-decoration: underline; text-decoration-thickness: 2px; text-underline-offset: 4px;">ROUTING ACTION</div>
        </div>

        <!-- Content -->
        <div style="max-width: 1200px;">
          <h2 style="font-size: 24px; font-weight: 600; color: #2B2D3F; margin-bottom: 8px;">How should incoming calls be answered during <span style="background: #FEF9C3; padding: 2px 4px;">closed hours & holidays</span>?</h2>

          <!-- Routing Option Cards (Reusing same design) -->
          <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-top: 40px;">
            <!-- Keypad Options + Greeting -->
            <div onclick="goToKeypadConfig('closed')" style="background: linear-gradient(135deg, #FFFFFF 0%, #F5F8FF 100%); border: 2px solid #F1F2F6; border-radius: 12px; padding: 28px 24px; cursor: pointer; transition: all 0.3s; display: flex; flex-direction: column; height: 300px; position: relative; overflow: hidden;" onmouseover="this.style.borderColor='#0D62FF'; this.style.boxShadow='0 8px 24px rgba(13,98,255,0.12)'; this.style.transform='translateY(-4px)'" onmouseout="this.style.borderColor='#F1F2F6'; this.style.boxShadow='none'; this.style.transform='translateY(0)'">
              <div style="position: absolute; top: -20px; right: -20px; width: 80px; height: 80px; background: radial-gradient(circle, rgba(13,98,255,0.08) 0%, transparent 70%); border-radius: 50%;"></div>
              <div style="width: 56px; height: 56px; background: linear-gradient(135deg, #E0F2FE 0%, #BAE6FD 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center; margin-bottom: 16px; box-shadow: 0 4px 12px rgba(13,98,255,0.15);">
                <i data-lucide="grid-3x3" style="width: 28px; height: 28px; color: #0D62FF; stroke-width: 2.5;"></i>
              </div>
              <h3 style="font-size: 16px; font-weight: 600; color: #2B2D3F; margin-bottom: 10px; line-height: 1.3;">Keypad Options + Greeting</h3>
              <p style="font-size: 13px; color: #70717D; line-height: 1.5;">Callers route themselves using interactive keypad menu options</p>
            </div>

            <!-- User or External Number -->
            <div style="background: linear-gradient(135deg, #FFFFFF 0%, #F5F8FF 100%); border: 2px solid #F1F2F6; border-radius: 12px; padding: 28px 24px; cursor: pointer; transition: all 0.3s; display: flex; flex-direction: column; height: 300px; position: relative; overflow: hidden;" onmouseover="this.style.borderColor='#0D62FF'; this.style.boxShadow='0 8px 24px rgba(13,98,255,0.12)'; this.style.transform='translateY(-4px)'" onmouseout="this.style.borderColor='#F1F2F6'; this.style.boxShadow='none'; this.style.transform='translateY(0)'">
              <div style="position: absolute; top: -20px; right: -20px; width: 80px; height: 80px; background: radial-gradient(circle, rgba(13,98,255,0.08) 0%, transparent 70%); border-radius: 50%;"></div>
              <div style="width: 56px; height: 56px; background: linear-gradient(135deg, #E0F2FE 0%, #BAE6FD 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center; margin-bottom: 16px; box-shadow: 0 4px 12px rgba(13,98,255,0.15);">
                <i data-lucide="phone-forwarded" style="width: 28px; height: 28px; color: #0D62FF; stroke-width: 2.5;"></i>
              </div>
              <h3 style="font-size: 16px; font-weight: 600; color: #2B2D3F; margin-bottom: 10px; line-height: 1.3;">User or External Number</h3>
              <p style="font-size: 13px; color: #70717D; line-height: 1.5;">Route calls directly to a user or external answering service</p>
            </div>

            <!-- Hunt Group -->
            <div style="background: linear-gradient(135deg, #FFFFFF 0%, #F5F8FF 100%); border: 2px solid #F1F2F6; border-radius: 12px; padding: 28px 24px; cursor: pointer; transition: all 0.3s; display: flex; flex-direction: column; height: 300px; position: relative; overflow: hidden;" onmouseover="this.style.borderColor='#0D62FF'; this.style.boxShadow='0 8px 24px rgba(13,98,255,0.12)'; this.style.transform='translateY(-4px)'" onmouseout="this.style.borderColor='#F1F2F6'; this.style.boxShadow='none'; this.style.transform='translateY(0)'">
              <div style="position: absolute; top: -20px; right: -20px; width: 80px; height: 80px; background: radial-gradient(circle, rgba(13,98,255,0.08) 0%, transparent 70%); border-radius: 50%;"></div>
              <div style="width: 56px; height: 56px; background: linear-gradient(135deg, #E0F2FE 0%, #BAE6FD 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center; margin-bottom: 16px; box-shadow: 0 4px 12px rgba(13,98,255,0.15);">
                <i data-lucide="users-round" style="width: 28px; height: 28px; color: #0D62FF; stroke-width: 2.5;"></i>
              </div>
              <h3 style="font-size: 16px; font-weight: 600; color: #2B2D3F; margin-bottom: 10px; line-height: 1.3;">Hunt Group</h3>
              <p style="font-size: 13px; color: #70717D; line-height: 1.5;">Route calls to a group of users in sequence or simultaneously</p>
            </div>

            <!-- Voicemail -->
            <div style="background: linear-gradient(135deg, #FFFFFF 0%, #F5F8FF 100%); border: 2px solid #F1F2F6; border-radius: 12px; padding: 28px 24px; cursor: pointer; transition: all 0.3s; display: flex; flex-direction: column; height: 300px; position: relative; overflow: hidden;" onmouseover="this.style.borderColor='#0D62FF'; this.style.boxShadow='0 8px 24px rgba(13,98,255,0.12)'; this.style.transform='translateY(-4px)'" onmouseout="this.style.borderColor='#F1F2F6'; this.style.boxShadow='none'; this.style.transform='translateY(0)'">
              <div style="position: absolute; top: -20px; right: -20px; width: 80px; height: 80px; background: radial-gradient(circle, rgba(13,98,255,0.08) 0%, transparent 70%); border-radius: 50%;"></div>
              <div style="width: 56px; height: 56px; background: linear-gradient(135deg, #E0F2FE 0%, #BAE6FD 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center; margin-bottom: 16px; box-shadow: 0 4px 12px rgba(13,98,255,0.15);">
                <i data-lucide="voicemail" style="width: 28px; height: 28px; color: #0D62FF; stroke-width: 2.5;"></i>
              </div>
              <h3 style="font-size: 16px; font-weight: 600; color: #2B2D3F; margin-bottom: 10px; line-height: 1.3;">Voicemail</h3>
              <p style="font-size: 13px; color: #70717D; line-height: 1.5;">Route calls to a voicemail box for later retrieval</p>
            </div>
          </div>
        </div>

        <!-- Bottom Actions - Fixed -->
        <div class="wizard-bottom-actions" style="position: fixed; bottom: 0; left: 340px; right: 0; background: white; padding: 20px 24px; border-top: 1px solid #F1F2F6; display: flex; justify-content: flex-start; align-items: center; z-index: 50; box-shadow: 0 -2px 8px rgba(0,0,0,0.08); transition: left 0.3s ease;">
          <button onclick="backToRouting()" style="display: inline-flex; align-items: center; gap: 8px; background: none; border: none; color: #0D62FF; font-size: 13px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; cursor: pointer; padding: 0;" onmouseover="this.style.opacity='0.8'" onmouseout="this.style.opacity='1'">
            <i data-lucide="chevron-left" style="width: 18px; height: 18px;"></i>
            <span>BACK</span>
          </button>
        </div>
        
        <!-- Spacer for fixed bottom bar -->
        <div style="height: 80px;"></div>
      </div>

      <!-- Setup: Keypad Options Configuration -->
      <div id="setup-keypad" style="display: none;">
        <!-- Wizard Header -->
        <div style="background: white; padding: 24px 24px 20px 24px; margin: -24px -24px 24px -24px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
          <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 24px;">
            <h1 style="font-size: 20px; font-weight: 600; color: #2B2D3F; margin: 0;">Call Flow Setup</h1>
            <button onclick="saveAndExit()" style="background: none; border: 1px solid #DDDDE2; color: #0D62FF; padding: 8px 20px; border-radius: 4px; font-size: 13px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; cursor: pointer; transition: all 0.15s;" onmouseover="this.style.background='#FCFCFC'" onmouseout="this.style.background='none'">
              SAVE & EXIT
            </button>
          </div>

          <!-- Wizard Steps -->
          <div id="keypad-stepper" style="display: flex; align-items: center; gap: 0; position: relative; margin-bottom: 20px;">
            <!-- Steps will be dynamically updated based on context -->
          </div>

          <!-- Breadcrumb Navigation -->
          <div style="padding: 12px 0; margin-bottom: 16px; display: flex; align-items: center; gap: 8px; font-size: 14px;">
            <button onclick="backFromKeypad()" style="display: flex; align-items: center; gap: 6px; color: #70717D; background: none; border: none; cursor: pointer; padding: 4px 8px; border-radius: 4px; transition: background 0.15s;" onmouseover="this.style.background='var(--neutral-100)'" onmouseout="this.style.background='none'">
              <i data-lucide="check-circle" style="width: 16px; height: 16px; color: #22C55E;"></i>
              Routing Action
            </button>
            <i data-lucide="chevron-right" style="width: 16px; height: 16px; color: var(--neutral-400);"></i>
            <span style="font-weight: 600; color: #0D62FF;">Keypad Options</span>
            <i data-lucide="chevron-right" style="width: 16px; height: 16px; color: var(--neutral-400);"></i>
            <span style="color: var(--neutral-400);">Greeting</span>
          </div>
        </div>

        <!-- Keypad Configuration Content -->
        <div style="max-width: 1400px;">
          <h2 style="font-size: 24px; font-weight: 600; color: #2B2D3F; margin-bottom: 8px;">Set your keypad options</h2>
          <p style="font-size: 14px; color: #70717D; margin-bottom: 32px;">Callers will route themselves using these keys.</p>

          <!-- Extension Dialing Toggle -->
          <div style="background: white; border: 1px solid #F1F2F6; border-radius: 8px; padding: 20px 24px; margin-bottom: 32px; display: flex; align-items: center; justify-content: space-between;">
            <div>
              <div style="font-size: 14px; font-weight: 600; color: #2B2D3F; margin-bottom: 4px;">ALLOW FIRST-LEVEL EXTENSION DIALING</div>
              <div style="font-size: 13px; color: #70717D;">Allow callers to dial an extension at any time to bypass the Automated Attendant during open hours.</div>
            </div>
            <label class="toggle-switch" style="margin-left: 24px;">
              <input type="checkbox" id="extension-dialing-toggle" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>

          <!-- Two Column Layout -->
          <div style="display: grid; grid-template-columns: 280px 1fr; gap: 32px;">
            <!-- Left Column: Keypad -->
            <div>
              <h3 style="font-size: 14px; font-weight: 600; color: #2B2D3F; margin-bottom: 16px;">ADD/REMOVE KEYS</h3>
              <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; background: white; padding: 24px; border: 1px solid #F1F2F6; border-radius: 8px;">
                <button style="width: 60px; height: 60px; border: 2px solid #0D62FF; background: #E0F2FE; border-radius: 8px; font-size: 20px; font-weight: 600; color: #0D62FF; cursor: pointer; transition: all 0.2s;" onmouseover="this.style.background='#BAE6FD'" onmouseout="this.style.background='#E0F2FE'">1</button>
                <button style="width: 60px; height: 60px; border: 2px solid #0D62FF; background: #E0F2FE; border-radius: 8px; font-size: 20px; font-weight: 600; color: #0D62FF; cursor: pointer; transition: all 0.2s;" onmouseover="this.style.background='#BAE6FD'" onmouseout="this.style.background='#E0F2FE'">2</button>
                <button style="width: 60px; height: 60px; border: 2px solid #DDDDE2; background: white; border-radius: 8px; font-size: 20px; font-weight: 600; color: var(--neutral-400); cursor: pointer; transition: all 0.2s;" onmouseover="this.style.background='#FCFCFC'" onmouseout="this.style.background='white'">3</button>
                <button style="width: 60px; height: 60px; border: 2px solid #0D62FF; background: #E0F2FE; border-radius: 8px; font-size: 20px; font-weight: 600; color: #0D62FF; cursor: pointer; transition: all 0.2s;" onmouseover="this.style.background='#BAE6FD'" onmouseout="this.style.background='#E0F2FE'">4</button>
                <button style="width: 60px; height: 60px; border: 2px solid #0D62FF; background: #E0F2FE; border-radius: 8px; font-size: 20px; font-weight: 600; color: #0D62FF; cursor: pointer; transition: all 0.2s;" onmouseover="this.style.background='#BAE6FD'" onmouseout="this.style.background='#E0F2FE'">5</button>
                <button style="width: 60px; height: 60px; border: 2px solid #DDDDE2; background: white; border-radius: 8px; font-size: 20px; font-weight: 600; color: var(--neutral-400); cursor: pointer; transition: all 0.2s;" onmouseover="this.style.background='#FCFCFC'" onmouseout="this.style.background='white'">6</button>
                <button style="width: 60px; height: 60px; border: 2px solid #DDDDE2; background: white; border-radius: 8px; font-size: 20px; font-weight: 600; color: var(--neutral-400); cursor: pointer; transition: all 0.2s;" onmouseover="this.style.background='#FCFCFC'" onmouseout="this.style.background='white'">7</button>
                <button style="width: 60px; height: 60px; border: 2px solid #DDDDE2; background: white; border-radius: 8px; font-size: 20px; font-weight: 600; color: var(--neutral-400); cursor: pointer; transition: all 0.2s;" onmouseover="this.style.background='#FCFCFC'" onmouseout="this.style.background='white'">8</button>
                <button style="width: 60px; height: 60px; border: 2px solid #DDDDE2; background: white; border-radius: 8px; font-size: 20px; font-weight: 600; color: var(--neutral-400); cursor: pointer; transition: all 0.2s;" onmouseover="this.style.background='#FCFCFC'" onmouseout="this.style.background='white'">9</button>
                <button style="width: 60px; height: 60px; border: 2px solid #DDDDE2; background: white; border-radius: 8px; font-size: 20px; font-weight: 600; color: var(--neutral-400); cursor: pointer; transition: all 0.2s;" onmouseover="this.style.background='#FCFCFC'" onmouseout="this.style.background='white'">*</button>
                <button style="width: 60px; height: 60px; border: 2px solid #DDDDE2; background: white; border-radius: 8px; font-size: 20px; font-weight: 600; color: var(--neutral-400); cursor: pointer; transition: all 0.2s;" onmouseover="this.style.background='#FCFCFC'" onmouseout="this.style.background='white'">0</button>
                <button style="width: 60px; height: 60px; border: 2px solid #DDDDE2; background: white; border-radius: 8px; font-size: 20px; font-weight: 600; color: var(--neutral-400); cursor: pointer; transition: all 0.2s;" onmouseover="this.style.background='#FCFCFC'" onmouseout="this.style.background='white'">#</button>
              </div>
            </div>

            <!-- Right Column: Routing Actions -->
            <div>
              <h3 style="font-size: 14px; font-weight: 600; color: #2B2D3F; margin-bottom: 16px;">ADD ROUTING ACTIONS</h3>
              
              <!-- Routing Action Items -->
              <div style="display: flex; flex-direction: column; gap: 16px;">
                <!-- Action 1: Hunt Group -->
                <div style="background: white; border: 1px solid #F1F2F6; border-radius: 8px; padding: 20px;">
                  <div style="display: flex; align-items: center; gap: 16px; margin-bottom: 16px;">
                    <div style="display: flex; align-items: center; gap: 8px;">
                      <span style="font-size: 13px; color: #70717D;">Press</span>
                      <div style="width: 40px; height: 40px; border: 2px solid #0D62FF; background: #E0F2FE; border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 18px; font-weight: 600; color: #0D62FF;">1</div>
                      <span style="font-size: 13px; color: #70717D;">to</span>
                    </div>
                    <select style="flex: 1; padding: 10px 12px; border: 1px solid #DDDDE2; border-radius: 6px; font-size: 14px; color: #2B2D3F; background: white; cursor: pointer;">
                      <option value="">Select routing type...</option>
                      <option value="user">User</option>
                      <option value="external">External Number</option>
                      <option value="huntgroup" selected>Hunt Group</option>
                      <option value="voicemail">Voicemail</option>
                      <option value="menu">Sub-Menu</option>
                    </select>
                    <button style="background: none; border: none; cursor: pointer; padding: 8px;">
                      <i data-lucide="trash-2" style="width: 18px; height: 18px; color: var(--neutral-400);"></i>
                    </button>
                  </div>
                  <div style="padding-left: 84px;">
                    <label style="font-size: 13px; color: #595A69; font-weight: 500; display: block; margin-bottom: 6px;">Select Hunt Group</label>
                    <select style="width: 100%; padding: 10px 12px; border: 1px solid #DDDDE2; border-radius: 6px; font-size: 14px; color: #2B2D3F; background: white; cursor: pointer; margin-bottom: 12px;">
                      <option value="">Choose a hunt group...</option>
                      <option value="hg1">Sales Team - (445) 223-3050 Ext. 3050</option>
                      <option value="hg2" selected>Unanswered HuntGroup_3 - (445) 223-3051 Ext. 3061</option>
                      <option value="hg3">Support Queue - (445) 223-3052 Ext. 3052</option>
                      <option value="hg4">Technical Support - (445) 223-3053 Ext. 3053</option>
                    </select>
                    <label style="display: flex; align-items: center; gap: 8px; margin-bottom: 4px; cursor: pointer;">
                      <input type="radio" name="transfer-1" value="no-users" style="width: 16px; height: 16px;">
                      <span style="font-size: 13px; color: #70717D;">No Users</span>
                    </label>
                    <button style="background: none; border: none; color: #0D62FF; font-size: 13px; font-weight: 600; cursor: pointer; padding: 0; margin-top: 8px;">Configure</button>
                  </div>
                </div>

                <!-- Action 2: User -->
                <div style="background: white; border: 1px solid #F1F2F6; border-radius: 8px; padding: 20px;">
                  <div style="display: flex; align-items: center; gap: 16px; margin-bottom: 16px;">
                    <div style="display: flex; align-items: center; gap: 8px;">
                      <span style="font-size: 13px; color: #70717D;">Press</span>
                      <div style="width: 40px; height: 40px; border: 2px solid #0D62FF; background: #E0F2FE; border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 18px; font-weight: 600; color: #0D62FF;">2</div>
                      <span style="font-size: 13px; color: #70717D;">to</span>
                    </div>
                    <select style="flex: 1; padding: 10px 12px; border: 1px solid #DDDDE2; border-radius: 6px; font-size: 14px; color: #2B2D3F; background: white; cursor: pointer;">
                      <option value="">Select routing type...</option>
                      <option value="user" selected>User</option>
                      <option value="external">External Number</option>
                      <option value="huntgroup">Hunt Group</option>
                      <option value="voicemail">Voicemail</option>
                      <option value="menu">Sub-Menu</option>
                    </select>
                    <button style="background: none; border: none; cursor: pointer; padding: 8px;">
                      <i data-lucide="trash-2" style="width: 18px; height: 18px; color: var(--neutral-400);"></i>
                    </button>
                  </div>
                  <div style="padding-left: 84px;">
                    <label style="font-size: 13px; color: #595A69; font-weight: 500; display: block; margin-bottom: 6px;">Select User</label>
                    <select style="width: 100%; padding: 10px 12px; border: 1px solid #DDDDE2; border-radius: 6px; font-size: 14px; color: #2B2D3F; background: white; cursor: pointer;">
                      <option value="">Choose a user...</option>
                      <option value="user1" selected>John Smith - (445) 223-3060 Ext. 3080</option>
                      <option value="user2">Jane Doe - (445) 223-3061 Ext. 3081</option>
                      <option value="user3">Bob Johnson - (445) 223-3062 Ext. 3082</option>
                      <option value="user4">Sarah Williams - (445) 223-3063 Ext. 3083</option>
                    </select>
                  </div>
                </div>

                <!-- Action 4: Voicemail -->
                <div style="background: white; border: 1px solid #F1F2F6; border-radius: 8px; padding: 20px;">
                  <div style="display: flex; align-items: center; gap: 16px; margin-bottom: 16px;">
                    <div style="display: flex; align-items: center; gap: 8px;">
                      <span style="font-size: 13px; color: #70717D;">Press</span>
                      <div style="width: 40px; height: 40px; border: 2px solid #0D62FF; background: #E0F2FE; border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 18px; font-weight: 600; color: #0D62FF;">4</div>
                      <span style="font-size: 13px; color: #70717D;">to</span>
                    </div>
                    <select style="flex: 1; padding: 10px 12px; border: 1px solid #DDDDE2; border-radius: 6px; font-size: 14px; color: #2B2D3F; background: white; cursor: pointer;">
                      <option value="">Select routing type...</option>
                      <option value="user">User</option>
                      <option value="external">External Number</option>
                      <option value="huntgroup">Hunt Group</option>
                      <option value="voicemail" selected>Voicemail</option>
                      <option value="menu">Sub-Menu</option>
                    </select>
                    <button style="background: none; border: none; cursor: pointer; padding: 8px;">
                      <i data-lucide="trash-2" style="width: 18px; height: 18px; color: var(--neutral-400);"></i>
                    </button>
                  </div>
                  <div style="padding-left: 84px;">
                    <label style="font-size: 13px; color: #595A69; font-weight: 500; display: block; margin-bottom: 6px;">Select Voicemail Box</label>
                    <select style="width: 100%; padding: 10px 12px; border: 1px solid #DDDDE2; border-radius: 6px; font-size: 14px; color: #2B2D3F; background: white; cursor: pointer; margin-bottom: 16px;">
                      <option value="">Choose a voicemail box...</option>
                      <option value="vm1">General Mailbox - (445) 223-3060 Ext. 3080</option>
                      <option value="vm2" selected>Jack Smith - (445) 223-3062 Ext. 3082</option>
                      <option value="vm3">Sales Department - (445) 223-3064 Ext. 3084</option>
                      <option value="vm4">Support Team - (445) 223-3065 Ext. 3085</option>
                    </select>
                    
                    <label style="font-size: 13px; color: #595A69; font-weight: 500; display: block; margin-bottom: 8px;">Transfer Options</label>
                    <label style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px; cursor: pointer;">
                      <input type="radio" name="transfer-4" value="with-prompt" checked style="width: 16px; height: 16px;">
                      <span style="font-size: 13px; color: #595A69;">Transfer With Prompt</span>
                    </label>
                    <div style="font-size: 12px; color: var(--neutral-500); margin-left: 24px; font-style: italic; margin-bottom: 8px;">"Your call is being transferred. Please hold."</div>
                    <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                      <input type="radio" name="transfer-4" value="without-prompt" style="width: 16px; height: 16px;">
                      <span style="font-size: 13px; color: #595A69;">Transfer Without Prompt</span>
                    </label>
                  </div>
                </div>

                <!-- Add More Link -->
                <button style="background: none; border: 2px dashed #DDDDE2; border-radius: 8px; padding: 16px; color: #0D62FF; font-size: 14px; font-weight: 600; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; transition: all 0.2s;" onmouseover="this.style.background='#FCFCFC'" onmouseout="this.style.background='none'">
                  <i data-lucide="plus" style="width: 18px; height: 18px;"></i>
                  Add Action
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Bottom Actions - Fixed -->
        <div class="wizard-bottom-actions" style="position: fixed; bottom: 0; left: 340px; right: 0; background: white; padding: 20px 24px; border-top: 1px solid #F1F2F6; display: flex; justify-content: space-between; align-items: center; z-index: 50; box-shadow: 0 -2px 8px rgba(0,0,0,0.08); transition: left 0.3s ease;">
          <button onclick="backFromKeypad()" style="display: inline-flex; align-items: center; gap: 8px; background: none; border: none; color: #0D62FF; font-size: 13px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; cursor: pointer; padding: 0;" onmouseover="this.style.opacity='0.8'" onmouseout="this.style.opacity='1'">
            <i data-lucide="chevron-left" style="width: 18px; height: 18px;"></i>
            <span>BACK</span>
          </button>
          <button onclick="saveKeypadAndNext()" style="background: #0D62FF; color: white; border: none; padding: 12px 32px; border-radius: 6px; font-weight: 600; font-size: 14px; cursor: pointer; transition: all 0.2s;" onmouseover="this.style.background='#083B99'" onmouseout="this.style.background='#0D62FF'">
            SAVE & NEXT
          </button>
        </div>
        
        <!-- Spacer for fixed bottom bar -->
        <div style="height: 80px;"></div>
      </div>

      <!-- Setup: Greeting Configuration -->
      <div id="setup-greeting" style="display: none;">
        <!-- Wizard Header -->
        <div style="background: white; padding: 24px 24px 20px 24px; margin: -24px -24px 24px -24px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
          <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 24px;">
            <h1 style="font-size: 20px; font-weight: 600; color: #2B2D3F; margin: 0;">Call Flow Setup</h1>
            <button onclick="saveAndExit()" style="background: none; border: 1px solid #DDDDE2; color: #0D62FF; padding: 8px 20px; border-radius: 4px; font-size: 13px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; cursor: pointer; transition: all 0.15s;" onmouseover="this.style.background='#FCFCFC'" onmouseout="this.style.background='none'">
              SAVE & EXIT
            </button>
          </div>

          <!-- Wizard Steps -->
          <div id="greeting-stepper" style="display: flex; align-items: center; gap: 0; position: relative; margin-bottom: 20px;">
            <!-- Steps will be dynamically updated based on context -->
          </div>

          <!-- Breadcrumb Navigation -->
          <div style="padding: 12px 0; margin-bottom: 16px; display: flex; align-items: center; gap: 8px; font-size: 14px;">
            <button onclick="backFromGreeting(); backFromKeypad();" style="display: flex; align-items: center; gap: 6px; color: #70717D; background: none; border: none; cursor: pointer; padding: 4px 8px; border-radius: 4px; transition: background 0.15s;" onmouseover="this.style.background='var(--neutral-100)'" onmouseout="this.style.background='none'">
              <i data-lucide="check-circle" style="width: 16px; height: 16px; color: #22C55E;"></i>
              Routing Action
            </button>
            <i data-lucide="chevron-right" style="width: 16px; height: 16px; color: var(--neutral-400);"></i>
            <button onclick="backFromGreeting()" style="display: flex; align-items: center; gap: 6px; color: #70717D; background: none; border: none; cursor: pointer; padding: 4px 8px; border-radius: 4px; transition: background 0.15s;" onmouseover="this.style.background='var(--neutral-100)'" onmouseout="this.style.background='none'">
              <i data-lucide="check-circle" style="width: 16px; height: 16px; color: #22C55E;"></i>
              Keypad Options
            </button>
            <i data-lucide="chevron-right" style="width: 16px; height: 16px; color: var(--neutral-400);"></i>
            <span style="font-weight: 600; color: #0D62FF;">Greeting</span>
          </div>
        </div>

        <!-- Greeting Configuration Content -->
        <div style="max-width: 1400px;">
          <h2 style="font-size: 24px; font-weight: 600; color: #2B2D3F; margin-bottom: 8px;">Type, record, or upload your greeting</h2>
          <p style="font-size: 14px; color: #70717D; margin-bottom: 32px;">Your greeting should include your keypad options.</p>

          <!-- Two Column Layout -->
          <div style="display: grid; grid-template-columns: 420px 1fr; gap: 32px;">
            <!-- Left Column: Script Suggestion -->
            <div>
              <div style="background: linear-gradient(135deg, #E0F2FE 0%, #F5F8FF 100%); border: 1px solid #BAE6FD; border-radius: 12px; padding: 28px; position: relative;">
                <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 16px;">
                  <i data-lucide="lightbulb" style="width: 20px; height: 20px; color: #0D62FF;"></i>
                  <h3 style="font-size: 16px; font-weight: 600; color: #2B2D3F; margin: 0;">TRY THIS SCRIPT</h3>
                </div>
                <p style="font-size: 13px; color: #595A69; margin-bottom: 20px;">Thank you for calling [business name].</p>
                
                <div style="display: flex; flex-direction: column; gap: 14px; font-size: 13px; line-height: 1.6; color: var(--neutral-800);">
                  <div style="display: flex; gap: 10px;">
                    <span style="width: 22px; height: 22px; background: #2B2D3F; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 11px; font-weight: 600; flex-shrink: 0;">1</span>
                    <span>To speak to <strong style="text-decoration: underline;">Test</strong>, press 1.</span>
                  </div>
                  <div style="display: flex; gap: 10px;">
                    <span style="width: 22px; height: 22px; background: #2B2D3F; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 11px; font-weight: 600; flex-shrink: 0;">2</span>
                    <span>To speak to <strong style="text-decoration: underline;">AAAATest</strong>, press 2.</span>
                  </div>
                  <div style="display: flex; gap: 10px;">
                    <span style="width: 22px; height: 22px; background: #2B2D3F; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 11px; font-weight: 600; flex-shrink: 0;">3</span>
                    <span>To speak to <strong style="text-decoration: underline;">Main Business Number</strong>, press 3.</span>
                  </div>
                  <div style="display: flex; gap: 10px;">
                    <span style="width: 22px; height: 22px; background: #2B2D3F; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 11px; font-weight: 600; flex-shrink: 0;">4</span>
                    <span>To leave a voicemail, press 4.</span>
                  </div>
                  <div style="display: flex; gap: 10px;">
                    <span style="width: 22px; height: 22px; background: #2B2D3F; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 11px; font-weight: 600; flex-shrink: 0;">5</span>
                    <span>To repeat the menu, press 5.</span>
                  </div>
                  <div style="display: flex; gap: 10px;">
                    <span style="width: 22px; height: 22px; background: #2B2D3F; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 11px; font-weight: 600; flex-shrink: 0;">6</span>
                    <span>To dial by name, press 6.</span>
                  </div>
                  <div style="display: flex; gap: 10px;">
                    <span style="width: 22px; height: 22px; background: #2B2D3F; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 11px; font-weight: 600; flex-shrink: 0;">7</span>
                    <span>To dial by Extension, press 7.</span>
                  </div>
                  <div style="display: flex; gap: 10px;">
                    <span style="width: 22px; height: 22px; background: #2B2D3F; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 11px; font-weight: 600; flex-shrink: 0;">8</span>
                    <span>To end the call, press 9 or hang up.</span>
                  </div>
                  <div style="display: flex; gap: 10px;">
                    <span style="width: 22px; height: 22px; background: #2B2D3F; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 11px; font-weight: 600; flex-shrink: 0;">9</span>
                    <span>To speak to <strong style="text-decoration: underline;">Unused HuntGroup_3</strong>, press 0.</span>
                  </div>
                  <div style="display: flex; gap: 10px;">
                    <span style="width: 22px; height: 22px; background: #2B2D3F; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 11px; font-weight: 600; flex-shrink: 0;">★</span>
                    <span>To speak to <strong style="text-decoration: underline;">Unused HuntGroup_newtest</strong>, press *.</span>
                  </div>
                </div>

                <button style="background: none; border: none; color: #0D62FF; font-size: 13px; font-weight: 600; cursor: pointer; padding: 0; margin-top: 20px; display: flex; align-items: center; gap: 6px;" onmouseover="this.style.opacity='0.7'" onmouseout="this.style.opacity='1'">
                  <i data-lucide="copy" style="width: 16px; height: 16px;"></i>
                  Copy script to the text area
                </button>
              </div>
            </div>

            <!-- Right Column: Greeting Configuration -->
            <div>
              <!-- Current Greeting Section -->
              <div style="margin-bottom: 32px;">
                <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 16px;">
                  <div style="width: 10px; height: 10px; background: #EAB308; border-radius: 50%;"></div>
                  <h3 style="font-size: 14px; font-weight: 600; color: #2B2D3F; text-transform: uppercase; letter-spacing: 0.5px; margin: 0;">CURRENT GREETING</h3>
                </div>
                
                <div style="background: white; border: 1px solid #F1F2F6; border-radius: 8px; padding: 24px;">
                  <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
                    <i data-lucide="volume-2" style="width: 20px; height: 20px; color: #70717D;"></i>
                    <span style="font-size: 15px; font-weight: 600; color: #2B2D3F;">Default Greeting</span>
                    <button style="background: none; border: none; cursor: pointer; padding: 4px;">
                      <i data-lucide="info" style="width: 16px; height: 16px; color: var(--neutral-400);"></i>
                    </button>
                  </div>
                  <p style="font-size: 13px; color: #595A69; line-height: 1.6; margin: 0;">
                    "Welcome, your call has been answered by an Automated Attendant. If you know your party's extension, press 1. To use our automatic main directory, press 2. If you'd like to 
                    <a href="#" style="color: #0D62FF; text-decoration: none; font-weight: 500;">View all ↓</a>
                  </p>
                </div>
              </div>

              <!-- New Greeting Section -->
              <div>
                <h3 style="font-size: 14px; font-weight: 600; color: #2B2D3F; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 16px;">NEW GREETING</h3>
                
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; margin-bottom: 24px;">
                  <!-- Text-to-Speech -->
                  <div style="background: white; border: 2px solid #F1F2F6; border-radius: 12px; padding: 32px 24px; cursor: pointer; transition: all 0.2s; display: flex; flex-direction: column; align-items: center; text-align: center;" onmouseover="this.style.borderColor='#0D62FF'; this.style.background='#F5F8FF'" onmouseout="this.style.borderColor='#F1F2F6'; this.style.background='white'">
                    <i data-lucide="type" style="width: 32px; height: 32px; color: #0D62FF; margin-bottom: 12px;"></i>
                    <div style="font-size: 14px; font-weight: 600; color: #2B2D3F; margin-bottom: 4px;">TEXT-TO-SPEECH</div>
                    <div style="font-size: 11px; color: var(--neutral-500); margin-top: 8px;">Maximum characters: 3500</div>
                  </div>

                  <!-- Record -->
                  <div style="background: white; border: 2px solid #F1F2F6; border-radius: 12px; padding: 32px 24px; cursor: pointer; transition: all 0.2s; display: flex; flex-direction: column; align-items: center; text-align: center;" onmouseover="this.style.borderColor='#0D62FF'; this.style.background='#F5F8FF'" onmouseout="this.style.borderColor='#F1F2F6'; this.style.background='white'">
                    <i data-lucide="mic" style="width: 32px; height: 32px; color: #0D62FF; margin-bottom: 12px;"></i>
                    <div style="font-size: 14px; font-weight: 600; color: #2B2D3F; margin-bottom: 4px;">RECORD</div>
                    <div style="font-size: 11px; color: var(--neutral-500); margin-top: 8px;">Maximum duration: 4 minutes</div>
                  </div>

                  <!-- Upload -->
                  <div style="background: white; border: 2px solid #F1F2F6; border-radius: 12px; padding: 32px 24px; cursor: pointer; transition: all 0.2s; display: flex; flex-direction: column; align-items: center; text-align: center;" onmouseover="this.style.borderColor='#0D62FF'; this.style.background='#F5F8FF'" onmouseout="this.style.borderColor='#F1F2F6'; this.style.background='white'">
                    <i data-lucide="upload" style="width: 32px; height: 32px; color: #0D62FF; margin-bottom: 12px;"></i>
                    <div style="font-size: 14px; font-weight: 600; color: #2B2D3F; margin-bottom: 4px;">UPLOAD</div>
                    <div style="font-size: 11px; color: var(--neutral-500); margin-top: 8px;">File formats: mp3, WAV<br>Maximum file size: 8 MB</div>
                  </div>
                </div>

                <!-- Terms Notice -->
                <p style="font-size: 12px; color: #70717D; line-height: 1.5; margin-bottom: 24px;">
                  You acknowledge and agree that any content that you upload to My Account is governed by the Terms and Conditions <a href="#" style="color: #0D62FF; text-decoration: none;">including the Acceptable Use Policy</a>.
                </p>

                <!-- Additional Recording Option -->
                <div>
                  <h3 style="font-size: 14px; font-weight: 600; color: #2B2D3F; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 12px;">ADDITIONAL RECORDING OPTION</h3>
                  <select style="width: 100%; padding: 12px 16px; border: 1px solid #DDDDE2; border-radius: 6px; font-size: 14px; color: #595A69; background: white; cursor: pointer;">
                    <option>Record using Voice Portal Number</option>
                  </select>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Bottom Actions - Fixed -->
        <div class="wizard-bottom-actions" style="position: fixed; bottom: 0; left: 340px; right: 0; background: white; padding: 20px 24px; border-top: 1px solid #F1F2F6; display: flex; justify-content: space-between; align-items: center; z-index: 50; box-shadow: 0 -2px 8px rgba(0,0,0,0.08); transition: left 0.3s ease;">
          <button onclick="backFromGreeting()" style="display: inline-flex; align-items: center; gap: 8px; background: none; border: none; color: #0D62FF; font-size: 13px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; cursor: pointer; padding: 0;" onmouseover="this.style.opacity='0.8'" onmouseout="this.style.opacity='1'">
            <i data-lucide="chevron-left" style="width: 18px; height: 18px;"></i>
            <span>BACK</span>
          </button>
          <button onclick="saveGreetingAndComplete()" style="background: #0D62FF; color: white; border: none; padding: 12px 32px; border-radius: 6px; font-weight: 600; font-size: 14px; cursor: pointer; transition: all 0.2s;" onmouseover="this.style.background='#083B99'" onmouseout="this.style.background='#0D62FF'">
            SAVE & NEXT
          </button>
        </div>
        
        <!-- Spacer for fixed bottom bar -->
        <div style="height: 80px;"></div>
      </div>

      <!-- AI Settings moved outside #page-attendants - see after page-attendants closes -->
      <!-- Main Call Flow Content (Hidden initially) -->
      <div id="main-callflow-content" style="display: none; position: relative;">
        <!-- Demo buttons moved to global demo bar -->
        
        <div class="page-header">
          <div>
            <div class="page-title">MAIN BUSINESS NUMBER</div>
            <div class="location-info">
              <span>Call Flow</span>
            </div>
            <p style="color: #70717D; font-size: 13px; margin: 8px 0 0 0;">Manage your automated call routing and voice menus</p>
          </div>
          <button onclick="startCallFlowSetup()" style="display: inline-flex; align-items: center; gap: 8px; padding: 10px 20px; background: white; color: #0D62FF; border: 2px solid #0D62FF; border-radius: 6px; font-size: 13px; font-weight: 600; cursor: pointer; transition: all 0.2s; letter-spacing: 0.3px;" onmouseover="this.style.background='#0D62FF'; this.style.color='white';" onmouseout="this.style.background='white'; this.style.color='#0D62FF';">
            <i data-lucide="settings" style="width: 18px; height: 18px;"></i>
            <span>EDIT CALL FLOW</span>
          </button>
        </div>

        <!-- Current Status Banner -->
        <div style="background: linear-gradient(135deg, #22C55E 0%, #16A34A 100%); border-radius: 12px; padding: 24px 32px; margin-bottom: 32px; color: white; display: flex; align-items: center; justify-content: space-between; box-shadow: 0 4px 12px rgba(16, 185, 129, 0.2);">
          <div style="display: flex; align-items: center; gap: 16px;">
            <div style="width: 56px; height: 56px; background: rgba(255,255,255,0.2); border-radius: 12px; display: flex; align-items: center; justify-content: center;">
              <i data-lucide="phone-call" style="width: 28px; height: 28px;"></i>
            </div>
            <div>
              <div style="font-size: 24px; font-weight: 600; margin-bottom: 4px;">Currently Open</div>
              <div style="font-size: 14px; opacity: 0.9;">Your call flow is active • Eastern Time (GMT-05:00)</div>
            </div>
          </div>
          <div style="text-align: right;">
            <div style="font-size: 14px; opacity: 0.9; margin-bottom: 4px;">Today's Hours</div>
            <div style="font-size: 18px; font-weight: 600;">9:00 AM - 5:00 PM</div>
          </div>
        </div>

        <!-- Google Virtual Assistant Usage Card -->
        <div style="background: white; border: 1px solid #F1F2F6; border-radius: 12px; padding: 28px 32px; margin-bottom: 32px;">
          <div style="display: flex; align-items: start; justify-content: space-between; margin-bottom: 24px;">
            <div style="display: flex; align-items: center; gap: 16px;">
              <div style="width: 56px; height: 56px; background: linear-gradient(135deg, #E0F2FE 0%, #BAE6FD 100%); border-radius: 12px; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 12px rgba(13,98,255,0.15);">
                <i data-lucide="bot" style="width: 28px; height: 28px; color: #0D62FF;"></i>
              </div>
              <div>
                <h3 style="font-size: 18px; font-weight: 600; color: #2B2D3F; margin-bottom: 4px;">Google Virtual Assistant</h3>
                <p style="font-size: 14px; color: #70717D; margin: 0;">AI-powered call handling • Current billing cycle</p>
              </div>
            </div>
            <div style="display: flex; gap: 12px;">
              <button onclick="openAISettings()" style="display: inline-flex; align-items: center; gap: 8px; padding: 8px 16px; background: white; color: #0D62FF; border: 2px solid #0D62FF; border-radius: 6px; font-size: 13px; font-weight: 600; cursor: pointer; transition: all 0.2s;" onmouseover="this.style.background='#0D62FF'; this.style.color='white';" onmouseout="this.style.background='white'; this.style.color='#0D62FF';">
                <i data-lucide="settings" style="width: 16px; height: 16px;"></i>
                Settings
              </button>
              <button onclick="alert('Add minutes feature coming soon')" style="display: inline-flex; align-items: center; gap: 8px; padding: 8px 16px; background: #0D62FF; color: white; border: none; border-radius: 6px; font-size: 13px; font-weight: 600; cursor: pointer; transition: all 0.2s;" onmouseover="this.style.background='#0A4ECC'" onmouseout="this.style.background='#0D62FF'">
                <i data-lucide="plus-circle" style="width: 16px; height: 16px;"></i>
                Add Minutes
              </button>
            </div>
          </div>

          <!-- Usage Bar -->
          <div style="margin-bottom: 24px;">
            <div style="display: flex; justify-content: space-between; align-items: baseline; margin-bottom: 12px;">
              <div>
                <span style="font-size: 32px; font-weight: 600; color: #2B2D3F;">410</span>
                <span style="font-size: 16px; color: #70717D; margin-left: 4px;">/ 500 minutes used</span>
              </div>
              <div style="text-align: right;">
                <div style="font-size: 24px; font-weight: 600; color: #EAB308;">90</div>
                <div style="font-size: 12px; color: #70717D; text-transform: uppercase; letter-spacing: 0.5px;">Minutes Remaining</div>
              </div>
            </div>
            
            <!-- Progress Bar -->
            <div style="width: 100%; height: 12px; background: #F1F2F6; border-radius: 6px; overflow: hidden; position: relative;">
              <div style="width: 82%; height: 100%; background: linear-gradient(90deg, #EAB308 0%, #EAB308 100%); border-radius: 6px; transition: width 0.3s;"></div>
            </div>
            
            <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 8px;">
              <span style="font-size: 12px; color: #70717D;">Billing cycle: Jan 1 - Jan 31, 2026</span>
              <span style="font-size: 12px; font-weight: 600; color: #EAB308;">82% used</span>
            </div>
            
            <div style="display: flex; align-items: center; gap: 6px; margin-top: 8px; padding-top: 8px; border-top: 1px solid #F1F2F6;">
              <i data-lucide="clock" style="width: 14px; height: 14px; color: var(--neutral-500);"></i>
              <span style="font-size: 12px; color: #70717D;">Last updated: Today at 2:30 PM ET</span>
            </div>
          </div>

          <!-- Info Section -->
          <div style="background: #FCFCFC; border: 1px solid #F1F2F6; border-radius: 8px; padding: 20px;">
            <div style="display: flex; align-items: start; gap: 12px; margin-bottom: 16px;">
              <div style="width: 32px; height: 32px; background: #0D62FF; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                <i data-lucide="info" style="width: 18px; height: 18px; color: white;"></i>
              </div>
              <div style="flex: 1;">
                <h4 style="font-size: 14px; font-weight: 600; color: #2B2D3F; margin-bottom: 8px;">How AI Minutes Work</h4>
                <p style="font-size: 13px; color: #595A69; line-height: 1.6; margin-bottom: 12px;">
                  Google Virtual Assistant uses AI to handle your calls naturally. Each minute of conversation with the AI assistant counts toward your monthly allocation.
                </p>
              </div>
            </div>

            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px;">
              <div>
                <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 6px;">
                  <i data-lucide="zap" style="width: 16px; height: 16px; color: #EAB308;"></i>
                  <span style="font-size: 12px; font-weight: 600; color: #2B2D3F; text-transform: uppercase; letter-spacing: 0.5px;">Usage</span>
                </div>
                <p style="font-size: 13px; color: #595A69; line-height: 1.5; margin: 0;">
                  Minutes are consumed during active AI conversations with callers
                </p>
              </div>
              
              <div>
                <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 6px;">
                  <i data-lucide="alert-circle" style="width: 16px; height: 16px; color: #EF4444;"></i>
                  <span style="font-size: 12px; font-weight: 600; color: #2B2D3F; text-transform: uppercase; letter-spacing: 0.5px;">When Depleted</span>
                </div>
                <p style="font-size: 13px; color: #595A69; line-height: 1.5; margin: 0;">
                  Your call flow automatically switches to standard IVR routing
                </p>
              </div>
              
              <div>
                <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 6px;">
                  <i data-lucide="credit-card" style="width: 16px; height: 16px; color: #22C55E;"></i>
                  <span style="font-size: 12px; font-weight: 600; color: #2B2D3F; text-transform: uppercase; letter-spacing: 0.5px;">Add More</span>
                </div>
                <p style="font-size: 13px; color: #595A69; line-height: 1.5; margin: 0;">
                  Purchase additional minutes or upgrade your plan anytime
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- Call Flow Configuration Cards -->
        <h2 style="font-size: 18px; font-weight: 600; color: #2B2D3F; margin-bottom: 20px;">Call Flow Configuration</h2>
        
        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px; margin-bottom: 32px;">
          <!-- Open Hours Configuration -->
          <div style="background: white; border: 1px solid #F1F2F6; border-radius: 12px; padding: 28px; position: relative; overflow: hidden;">
            <div style="position: absolute; top: 0; right: 0; width: 100px; height: 100px; background: radial-gradient(circle, rgba(16,185,129,0.1) 0%, transparent 70%);"></div>
            
            <div style="display: flex; align-items: center; justify-content: between; margin-bottom: 20px;">
              <div style="display: flex; align-items: center; gap: 12px; flex: 1;">
                <div style="width: 48px; height: 48px; background: linear-gradient(135deg, #DCFCE7 0%, #BBF7D0 100%); border-radius: 10px; display: flex; align-items: center; justify-content: center;">
                  <i data-lucide="sun" style="width: 24px; height: 24px; color: #16A34A;"></i>
                </div>
                <div>
                  <h3 style="font-size: 16px; font-weight: 600; color: #2B2D3F; margin-bottom: 2px;">Open Hours</h3>
                  <p style="font-size: 13px; color: #70717D;">Monday - Friday, 9:00 AM - 5:00 PM</p>
                </div>
              </div>
              <button onclick="jumpToOpenKeypad()" style="background: none; border: 1px solid #DDDDE2; color: #0D62FF; padding: 6px 12px; border-radius: 6px; font-size: 13px; font-weight: 600; cursor: pointer;">
                Edit
              </button>
            </div>

            <div style="border-top: 1px solid #F1F2F6; padding-top: 20px;">
              <div style="margin-bottom: 16px;">
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;">
                  <div style="font-size: 12px; font-weight: 600; color: var(--neutral-500); text-transform: uppercase; letter-spacing: 0.5px;">Schedule</div>
                  <button onclick="jumpToSchedules()" style="background: none; border: none; color: #0D62FF; font-size: 12px; font-weight: 600; cursor: pointer; padding: 0;">Edit</button>
                </div>
                <div style="display: flex; align-items: center; gap: 8px;">
                  <i data-lucide="calendar" style="width: 16px; height: 16px; color: #70717D;"></i>
                  <span style="font-size: 14px; color: #595A69;">Mon-Fri, 9AM-5PM</span>
                </div>
              </div>

              <div style="margin-bottom: 16px;">
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;">
                  <div style="font-size: 12px; font-weight: 600; color: var(--neutral-500); text-transform: uppercase; letter-spacing: 0.5px;">Greeting</div>
                  <button onclick="jumpToOpenGreeting()" style="background: none; border: none; color: #0D62FF; font-size: 12px; font-weight: 600; cursor: pointer; padding: 0;">Edit</button>
                </div>
                <div style="display: flex; align-items: center; gap: 8px;">
                  <i data-lucide="volume-2" style="width: 16px; height: 16px; color: #0D62FF;"></i>
                  <span style="font-size: 14px; color: #595A69;">Default Greeting</span>
                </div>
              </div>
              
              <div style="margin-bottom: 16px;">
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;">
                  <div style="font-size: 12px; font-weight: 600; color: var(--neutral-500); text-transform: uppercase; letter-spacing: 0.5px;">Keypad Options</div>
                  <button onclick="jumpToOpenKeypad()" style="background: none; border: none; color: #0D62FF; font-size: 12px; font-weight: 600; cursor: pointer; padding: 0;">Edit</button>
                </div>
                <div style="display: flex; flex-wrap: wrap; gap: 8px;">
                  <span style="background: #E0F2FE; color: #0D62FF; padding: 4px 10px; border-radius: 4px; font-size: 13px; font-weight: 500;">1 → Hunt Group</span>
                  <span style="background: #E0F2FE; color: #0D62FF; padding: 4px 10px; border-radius: 4px; font-size: 13px; font-weight: 500;">2 → User</span>
                  <span style="background: #E0F2FE; color: #0D62FF; padding: 4px 10px; border-radius: 4px; font-size: 13px; font-weight: 500;">4 → Voicemail</span>
                </div>
              </div>
              
              <div>
                <div style="font-size: 12px; font-weight: 600; color: var(--neutral-500); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 8px;">Status</div>
                <div style="display: flex; align-items: center; gap: 6px;">
                  <div style="width: 8px; height: 8px; background: #22C55E; border-radius: 50%;"></div>
                  <span style="font-size: 14px; color: #22C55E; font-weight: 500;">Active</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Closed Hours Configuration -->
          <div style="background: white; border: 1px solid #F1F2F6; border-radius: 12px; padding: 28px; position: relative; overflow: hidden;">
            <div style="position: absolute; top: 0; right: 0; width: 100px; height: 100px; background: radial-gradient(circle, rgba(147,51,234,0.1) 0%, transparent 70%);"></div>
            
            <div style="display: flex; align-items: center; justify-content: between; margin-bottom: 20px;">
              <div style="display: flex; align-items: center; gap: 12px; flex: 1;">
                <div style="width: 48px; height: 48px; background: linear-gradient(135deg, #E9D5FF 0%, #D8B4FE 100%); border-radius: 10px; display: flex; align-items: center; justify-content: center;">
                  <i data-lucide="moon" style="width: 24px; height: 24px; color: #A855F7;"></i>
                </div>
                <div>
                  <h3 style="font-size: 16px; font-weight: 600; color: #2B2D3F; margin-bottom: 2px;">Closed Hours & Holidays</h3>
                  <p style="font-size: 13px; color: #70717D;">Weekends & 10 holidays configured</p>
                </div>
              </div>
              <button onclick="jumpToClosedRouting()" style="background: none; border: 1px solid #DDDDE2; color: #0D62FF; padding: 6px 12px; border-radius: 6px; font-size: 13px; font-weight: 600; cursor: pointer;">
                Edit
              </button>
            </div>

            <div style="border-top: 1px solid #F1F2F6; padding-top: 20px;">
              <div style="margin-bottom: 16px;">
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;">
                  <div style="font-size: 12px; font-weight: 600; color: var(--neutral-500); text-transform: uppercase; letter-spacing: 0.5px;">Holidays</div>
                  <button onclick="jumpToHolidays()" style="background: none; border: none; color: #0D62FF; font-size: 12px; font-weight: 600; cursor: pointer; padding: 0;">Edit</button>
                </div>
                <div style="display: flex; align-items: center; gap: 8px;">
                  <i data-lucide="calendar-off" style="width: 16px; height: 16px; color: #70717D;"></i>
                  <span style="font-size: 14px; color: #595A69;">10 federal holidays</span>
                </div>
              </div>

              <div style="margin-bottom: 16px;">
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;">
                  <div style="font-size: 12px; font-weight: 600; color: var(--neutral-500); text-transform: uppercase; letter-spacing: 0.5px;">Greeting</div>
                  <button onclick="jumpToClosedGreeting()" style="background: none; border: none; color: #0D62FF; font-size: 12px; font-weight: 600; cursor: pointer; padding: 0;">Edit</button>
                </div>
                <div style="display: flex; align-items: center; gap: 8px;">
                  <i data-lucide="volume-2" style="width: 16px; height: 16px; color: #A855F7;"></i>
                  <span style="font-size: 14px; color: #595A69;">After Hours Message</span>
                </div>
              </div>
              
              <div style="margin-bottom: 16px;">
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px;">
                  <div style="font-size: 12px; font-weight: 600; color: var(--neutral-500); text-transform: uppercase; letter-spacing: 0.5px;">Routing Action</div>
                  <button onclick="jumpToClosedRouting()" style="background: none; border: none; color: #0D62FF; font-size: 12px; font-weight: 600; cursor: pointer; padding: 0;">Edit</button>
                </div>
                <div style="display: flex; align-items: center; gap: 8px;">
                  <i data-lucide="voicemail" style="width: 16px; height: 16px; color: #70717D;"></i>
                  <span style="font-size: 14px; color: #595A69;">Send to Voicemail</span>
                </div>
              </div>
              
              <div>
                <div style="font-size: 12px; font-weight: 600; color: var(--neutral-500); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 8px;">Status</div>
                <div style="display: flex; align-items: center; gap: 6px;">
                  <div style="width: 8px; height: 8px; background: var(--neutral-400); border-radius: 50%;"></div>
                  <span style="font-size: 14px; color: #70717D; font-weight: 500;">Inactive</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Schedule Overview -->
        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px;">
          <h2 style="font-size: 18px; font-weight: 600; color: #2B2D3F; margin: 0;">Schedule Overview</h2>
          <button onclick="jumpToSchedules()" style="background: none; border: 1px solid #DDDDE2; color: #0D62FF; padding: 6px 16px; border-radius: 6px; font-size: 13px; font-weight: 600; cursor: pointer; display: flex; align-items: center; gap: 6px;" onmouseover="this.style.background='#FCFCFC'" onmouseout="this.style.background='none'">
            <i data-lucide="calendar" style="width: 16px; height: 16px;"></i>
            Edit Schedule
          </button>
        </div>
        
        <div style="background: white; border: 1px solid #F1F2F6; border-radius: 12px; padding: 28px; margin-bottom: 32px;">
          <div style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 16px;">
            <div style="text-align: center;">
              <div style="font-size: 12px; font-weight: 600; color: #70717D; margin-bottom: 8px;">MON</div>
              <div style="background: #22C55E; color: white; padding: 8px; border-radius: 6px; font-size: 13px; font-weight: 500;">9AM - 5PM</div>
            </div>
            <div style="text-align: center;">
              <div style="font-size: 12px; font-weight: 600; color: #70717D; margin-bottom: 8px;">TUE</div>
              <div style="background: #22C55E; color: white; padding: 8px; border-radius: 6px; font-size: 13px; font-weight: 500;">9AM - 5PM</div>
            </div>
            <div style="text-align: center;">
              <div style="font-size: 12px; font-weight: 600; color: #70717D; margin-bottom: 8px;">WED</div>
              <div style="background: #22C55E; color: white; padding: 8px; border-radius: 6px; font-size: 13px; font-weight: 500;">9AM - 5PM</div>
            </div>
            <div style="text-align: center;">
              <div style="font-size: 12px; font-weight: 600; color: #70717D; margin-bottom: 8px;">THU</div>
              <div style="background: #22C55E; color: white; padding: 8px; border-radius: 6px; font-size: 13px; font-weight: 500;">9AM - 5PM</div>
            </div>
            <div style="text-align: center;">
              <div style="font-size: 12px; font-weight: 600; color: #70717D; margin-bottom: 8px;">FRI</div>
              <div style="background: #22C55E; color: white; padding: 8px; border-radius: 6px; font-size: 13px; font-weight: 500;">9AM - 5PM</div>
            </div>
            <div style="text-align: center;">
              <div style="font-size: 12px; font-weight: 600; color: #70717D; margin-bottom: 8px;">SAT</div>
              <div style="background: #F1F2F6; color: #70717D; padding: 8px; border-radius: 6px; font-size: 13px; font-weight: 500;">Closed</div>
            </div>
            <div style="text-align: center;">
              <div style="font-size: 12px; font-weight: 600; color: #70717D; margin-bottom: 8px;">SUN</div>
              <div style="background: #F1F2F6; color: #70717D; padding: 8px; border-radius: 6px; font-size: 13px; font-weight: 500;">Closed</div>
            </div>
          </div>
        </div>

      <div class="card">
        <div class="card-header">
          <h3 class="card-title">Active Attendants</h3>
        </div>
        <div class="card-body">
          <table>
            <thead>
              <tr>
                <th>Name</th>
                <th>Phone Number</th>
                <th>Schedule</th>
                <th>Status</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>
                  <div style="font-weight: 600;">Business Hours Attendant</div>
                  <div style="font-size: 12px; color: var(--neutral-500); margin-top: 2px;">Main IVR menu</div>
                </td>
                <td>(445) 223-3050</td>
                <td>Mon-Fri 9AM-5PM</td>
                <td><span class="badge badge-active">Active</span></td>
                <td>
                  <a href="#" class="link-button" onclick="jumpToOpenKeypad(); return false;">
                    <span>EDIT FLOW</span>
                  </a>
                </td>
              </tr>
              <tr>
                <td>
                  <div style="font-weight: 600;">After Hours Attendant</div>
                  <div style="font-size: 12px; color: var(--neutral-500); margin-top: 2px;">Evening & weekend routing</div>
                </td>
                <td>(445) 223-3050</td>
                <td>Evenings & Weekends</td>
                <td><span class="badge badge-active">Active</span></td>
                <td>
                  <a href="#" class="link-button" onclick="jumpToClosedRouting(); return false;">
                    <span>EDIT FLOW</span>
                  </a>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px; margin-top: 24px;">
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">Recent Call Activity</h3>
          </div>
          <div class="card-body">
            <div class="user-card">
              <div class="user-avatar" style="background: #0D62FF;">
                <i data-lucide="phone-incoming" style="width: 20px; height: 20px;"></i>
              </div>
              <div class="user-info">
                <div class="user-name">(215) 555-0123</div>
                <div class="user-details">2 minutes ago • Routed to Sales</div>
              </div>
              <span class="badge badge-active">Answered</span>
            </div>

            <div class="user-card">
              <div class="user-avatar" style="background: #DC2626;">
                <i data-lucide="phone-off" style="width: 20px; height: 20px;"></i>
              </div>
              <div class="user-info">
                <div class="user-name">(215) 555-0199</div>
                <div class="user-details">15 minutes ago • Spam detected</div>
              </div>
              <span class="badge" style="background: #FEE2E2; color: #991B1B;">Blocked</span>
            </div>

            <div class="user-card">
              <div class="user-avatar" style="background: #0D62FF;">
                <i data-lucide="phone-incoming" style="width: 20px; height: 20px;"></i>
              </div>
              <div class="user-info">
                <div class="user-name">(215) 555-0187</div>
                <div class="user-details">32 minutes ago • Routed to Support</div>
              </div>
              <span class="badge badge-active">Answered</span>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card-header" style="display: flex; justify-content: space-between; align-items: center;">
            <h3 class="card-title">Quick Actions</h3>
          </div>
          <div class="card-body">
            <button class="action-button" style="width: 100%; margin-bottom: 12px;" onclick="showIVRKeypad(); return false;">
              <i data-lucide="grid-3x3" style="width: 16px; height: 16px;"></i>
              <span>Configure IVR Keypad</span>
            </button>
            <button class="action-button" style="width: 100%; margin-bottom: 12px;" onclick="showContacts(); return false;">
              <i data-lucide="users" style="width: 16px; height: 16px;"></i>
              <span>Manage Contact Lists</span>
            </button>
            <button class="action-button" style="width: 100%; margin-bottom: 12px;">
              <i data-lucide="calendar" style="width: 16px; height: 16px;"></i>
              <span>Edit Business Hours</span>
            </button>
            <button class="action-button" style="width: 100%;">
              <i data-lucide="download" style="width: 16px; height: 16px;"></i>
              <span>Export Call Logs</span>
            </button>
          </div>
        </div>
      </div>
      </div>
    </div>

    <!-- AI Settings Screen (Moved outside #page-attendants to prevent parent hiding) -->
    <div id="ai-settings" style="display: none; padding: 24px;">
      <!-- Header -->
      <div style="background: white; padding: 24px 24px 20px 24px; margin: -24px -24px 24px -24px; box-shadow: 0 1px 3px rgba(0,0,0,0.1);">
        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
          <h1 style="font-size: 20px; font-weight: 600; color: #2B2D3F; margin: 0;">Google Virtual Assistant Settings</h1>
          <button onclick="saveAISettingsAndExit()" style="background: none; border: 1px solid #DDDDE2; color: #0D62FF; padding: 8px 20px; border-radius: 4px; font-size: 13px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; cursor: pointer; transition: all 0.15s;" onmouseover="this.style.background='#FCFCFC'" onmouseout="this.style.background='none'">
            SAVE & EXIT
          </button>
        </div>
        
        <!-- Breadcrumb -->
        <div style="display: flex; align-items: center; gap: 8px; font-size: 13px; color: #70717D;">
          <span>Call Flow</span>
          <i data-lucide="chevron-right" style="width: 14px; height: 14px;"></i>
          <span style="color: #0D62FF; font-weight: 600;">Settings</span>
        </div>
      </div>

      <div style="max-width: 1000px;">
        <!-- AI Assistant Control Section -->
        <div style="background: white; border: 1px solid #F1F2F6; border-radius: 12px; padding: 28px; margin-bottom: 24px;">
          <h2 style="font-size: 16px; font-weight: 600; color: #2B2D3F; margin-bottom: 20px;">AI Assistant Control</h2>
          
          <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px;">
            <!-- Open Hours -->
            <div>
              <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px;">
                <div style="display: flex; align-items: center; gap: 12px;">
                  <div style="width: 40px; height: 40px; background: linear-gradient(135deg, #DCFCE7 0%, #BBF7D0 100%); border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                    <i data-lucide="sun" style="width: 20px; height: 20px; color: #16A34A;"></i>
                  </div>
                  <h3 style="font-size: 14px; font-weight: 600; color: #2B2D3F; margin: 0;">Open Hours</h3>
                </div>
                <label class="toggle-switch">
                  <input type="checkbox" id="open-hours-toggle" checked>
                  <span class="toggle-slider"></span>
                </label>
              </div>
              <p style="font-size: 13px; color: #70717D; line-height: 1.5; margin: 0;">
                When enabled, AI handles calls during your open hours before falling back to your configured routing option
              </p>
            </div>

            <!-- Closed Hours -->
            <div>
              <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px;">
                <div style="display: flex; align-items: center; gap: 12px;">
                  <div style="width: 40px; height: 40px; background: linear-gradient(135deg, #E9D5FF 0%, #D8B4FE 100%); border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                    <i data-lucide="moon" style="width: 20px; height: 20px; color: #A855F7;"></i>
                  </div>
                  <h3 style="font-size: 14px; font-weight: 600; color: #2B2D3F; margin: 0;">Closed Hours</h3>
                </div>
                <label class="toggle-switch">
                  <input type="checkbox" id="closed-hours-toggle" checked>
                  <span class="toggle-slider"></span>
                </label>
              </div>
              <p style="font-size: 13px; color: #70717D; line-height: 1.5; margin: 0;">
                When enabled, AI handles calls during closed hours before falling back to your configured routing option
              </p>
            </div>
          </div>
        </div>

        <!-- Email Notifications Section -->
        <div style="background: white; border: 1px solid #F1F2F6; border-radius: 12px; padding: 28px; margin-bottom: 24px;">
          <h2 style="font-size: 16px; font-weight: 600; color: #2B2D3F; margin-bottom: 20px;">Email Notifications</h2>
          
          <div style="display: flex; align-items: start; justify-content: space-between; margin-bottom: 20px;">
            <div style="flex: 1;">
              <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
                <i data-lucide="mail" style="width: 20px; height: 20px; color: #0D62FF;"></i>
                <h3 style="font-size: 14px; font-weight: 600; color: #2B2D3F; margin: 0;">Low Balance Alerts</h3>
              </div>
              <p style="font-size: 13px; color: #70717D; line-height: 1.5; margin: 0;">
                Receive email notifications when your AI minutes reach 80% and 90% usage
              </p>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" id="email-notifications-toggle" checked>
              <span class="toggle-slider"></span>
            </label>
          </div>

          <div>
            <label style="display: block; font-size: 13px; font-weight: 600; color: #595A69; margin-bottom: 8px;">Email Address</label>
            <input 
              type="email" 
              id="user-email" 
              value="really_changeds@example.com"
              style="width: 100%; max-width: 400px; padding: 10px 14px; border: 2px solid #F1F2F6; border-radius: 6px; font-size: 14px; transition: all 0.2s; outline: none;"
              onfocus="this.style.borderColor='#0D62FF'"
              onblur="this.style.borderColor='#F1F2F6'"
            />
          </div>
        </div>

        <!-- Fallback Behavior Section -->
        <div style="background: white; border: 1px solid #F1F2F6; border-radius: 12px; padding: 28px; margin-bottom: 24px;">
          <h2 style="font-size: 16px; font-weight: 600; color: #2B2D3F; margin-bottom: 12px;">Fallback Behavior</h2>
          
          <div style="background: #FCFCFC; border: 1px solid #F1F2F6; border-radius: 8px; padding: 16px; margin-bottom: 20px;">
            <div style="display: flex; align-items: start; gap: 12px;">
              <i data-lucide="info" style="width: 18px; height: 18px; color: #0D62FF; flex-shrink: 0; margin-top: 2px;"></i>
              <p style="font-size: 13px; color: #595A69; line-height: 1.5; margin: 0;">
                When AI minutes are depleted, calls automatically route to your configured fallback option. This ensures uninterrupted service for your callers.
              </p>
            </div>
          </div>

          <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px;">
            <!-- Open Hours Fallback -->
            <div style="background: linear-gradient(135deg, #F5F8FF 0%, #E0F2FE 100%); border: 2px solid #BAE6FD; border-radius: 10px; padding: 20px;">
              <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
                <div style="width: 36px; height: 36px; background: white; border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                  <i data-lucide="grid-3x3" style="width: 20px; height: 20px; color: #0D62FF;"></i>
                </div>
                <div>
                  <div style="font-size: 12px; font-weight: 600; color: #70717D; text-transform: uppercase; letter-spacing: 0.5px;">Open Hours Fallback</div>
                  <div style="font-size: 14px; font-weight: 600; color: #2B2D3F;">Keypad Options + Greeting</div>
                </div>
              </div>
              <p style="font-size: 12px; color: #70717D; margin: 0;">Callers use interactive keypad menu</p>
            </div>

            <!-- Closed Hours Fallback -->
            <div style="background: linear-gradient(135deg, #FAF5FF 0%, #F3E8FF 100%); border: 2px solid #E9D5FF; border-radius: 10px; padding: 20px;">
              <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
                <div style="width: 36px; height: 36px; background: white; border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                  <i data-lucide="voicemail" style="width: 20px; height: 20px; color: #A855F7;"></i>
                </div>
                <div>
                  <div style="font-size: 12px; font-weight: 600; color: #70717D; text-transform: uppercase; letter-spacing: 0.5px;">Closed Hours Fallback</div>
                  <div style="font-size: 14px; font-weight: 600; color: #2B2D3F;">Send to Voicemail</div>
                </div>
              </div>
              <p style="font-size: 12px; color: #70717D; margin: 0;">Calls routed to voicemail box</p>
            </div>
          </div>
        </div>

        <!-- Auto-Restore Information -->
        <div style="background: linear-gradient(135deg, #E0F2FE 0%, #BAE6FD 100%); border: 2px solid #7DD3FC; border-radius: 12px; padding: 24px; margin-bottom: 24px;">
          <div style="display: flex; align-items: start; gap: 16px;">
            <div style="width: 48px; height: 48px; background: white; border-radius: 10px; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
              <i data-lucide="calendar" style="width: 24px; height: 24px; color: #0D62FF;"></i>
            </div>
            <div>
              <h3 style="font-size: 14px; font-weight: 600; color: #2B2D3F; margin-bottom: 8px;">Automatic Monthly Reset</h3>
              <p style="font-size: 13px; color: #595A69; line-height: 1.5; margin: 0;">
                At the start of each billing cycle, Google Virtual Assistant automatically re-enables for both Open and Closed Hours if you have available minutes. You can disable it anytime from this settings page to maintain full control over your call flow.
              </p>
            </div>
          </div>
        </div>
      </div>

      <!-- Bottom Actions - Fixed -->
      <div class="wizard-bottom-actions" style="position: fixed; bottom: 0; left: 340px; right: 0; background: white; padding: 20px 24px; border-top: 1px solid #F1F2F6; display: flex; justify-content: flex-end; align-items: center; z-index: 50; box-shadow: 0 -2px 8px rgba(0,0,0,0.08); transition: left 0.3s ease;">
        <button onclick="saveAISettingsAndExit()" style="background: #0D62FF; color: white; border: none; padding: 12px 32px; border-radius: 6px; font-weight: 600; font-size: 14px; cursor: pointer; transition: all 0.2s;" onmouseover="this.style.background='#083B99'" onmouseout="this.style.background='#0D62FF'">
          SAVE & EXIT
        </button>
      </div>
      
      <!-- Spacer for fixed bottom bar -->
      <div style="height: 80px;"></div>
    </div>

    <!-- Call Flow Builder Page -->
    <div id="page-callflow" class="page">
      <div class="page-header">
        <div>
          <div class="page-title">CALL FLOW CONFIGURATION</div>
          <div class="location-info">
            <span>Business Hours Attendant</span>
          </div>
          <p style="color: #70717D; font-size: 13px; margin: 8px 0 0 0;">Design your call routing and IVR workflow</p>
        </div>
        <div style="display: flex; gap: 12px;">
          <button class="action-button">
            <i data-lucide="save" style="width: 16px; height: 16px;"></i>
            <span>SAVE FLOW</span>
          </button>
          <button class="action-button">
            <i data-lucide="play" style="width: 16px; height: 16px;"></i>
            <span>TEST FLOW</span>
          </button>
          <button class="action-button-primary">
            <i data-lucide="plus" style="width: 16px; height: 16px;"></i>
            <span>ADD NODE</span>
          </button>
        </div>
      </div>

      <div class="card">
        <div class="card-header">
          <h3 class="card-title">Flow Builder</h3>
        </div>
        <div class="card-body">
          <div class="flow-builder">
            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px;">
              <div class="flow-node" style="border-color: #22C55E; background: linear-gradient(135deg, #DCFCE7 0%, white 100%);">
                <div class="flow-node-title">
                  <i data-lucide="phone-incoming" style="width: 20px; height: 20px; color: #22C55E;"></i>
                  <span>Incoming Call</span>
                </div>
                <div class="flow-node-desc">Entry point for all calls</div>
                <div class="flow-node-tags">
                  <span class="flow-tag" style="background: #DCFCE7; color: #166534;">Start</span>
                </div>
              </div>

              <div class="flow-node">
                <div class="flow-node-title">
                  <i data-lucide="menu" style="width: 20px; height: 20px; color: #0D62FF;"></i>
                  <span>Main IVR Menu</span>
                </div>
                <div class="flow-node-desc">"Press 1 for Sales, 2 for Support..."</div>
                <div class="flow-node-tags">
                  <span class="flow-tag">1: Sales</span>
                  <span class="flow-tag">2: Support</span>
                  <span class="flow-tag">0: Operator</span>
                </div>
              </div>

              <div class="flow-node">
                <div class="flow-node-title">
                  <i data-lucide="users" style="width: 20px; height: 20px; color: #A855F7;"></i>
                  <span>Route to Department</span>
                </div>
                <div class="flow-node-desc">Transfer call to selected queue</div>
                <div class="flow-node-tags">
                  <span class="flow-tag">Queue</span>
                </div>
              </div>

              <div class="flow-node">
                <div class="flow-node-title">
                  <i data-lucide="clock" style="width: 20px; height: 20px; color: #EAB308;"></i>
                  <span>Business Hours Check</span>
                </div>
                <div class="flow-node-desc">Verify current operating hours</div>
                <div class="flow-node-tags">
                  <span class="flow-tag">Open</span>
                  <span class="flow-tag">Closed</span>
                </div>
              </div>

              <div class="flow-node">
                <div class="flow-node-title">
                  <i data-lucide="voicemail" style="width: 20px; height: 20px; color: #A855F7;"></i>
                  <span>Voicemail</span>
                </div>
                <div class="flow-node-desc">Record caller message</div>
                <div class="flow-node-tags">
                  <span class="flow-tag">Record</span>
                </div>
              </div>

              <div class="flow-node" style="border-color: #EF4444; background: linear-gradient(135deg, #FEE2E2 0%, white 100%);">
                <div class="flow-node-title">
                  <i data-lucide="phone-off" style="width: 20px; height: 20px; color: #EF4444;"></i>
                  <span>End Call</span>
                </div>
                <div class="flow-node-desc">Call completed</div>
                <div class="flow-node-tags">
                  <span class="flow-tag" style="background: #FEE2E2; color: #991B1B;">Hangup</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- IVR Keypad Page -->
    <div id="page-keypad" class="page">
      <div class="page-header">
        <div>
          <div class="page-title">IVR KEYPAD CONFIGURATION</div>
          <div class="location-info">
            <span>Keypad Menu Options</span>
          </div>
          <p style="color: #70717D; font-size: 13px; margin: 8px 0 0 0;">Configure keypad actions and routing</p>
        </div>
      </div>

      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px;">
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">Keypad Layout</h3>
          </div>
          <div class="card-body">
            <div class="keypad-grid">
              <div class="keypad-key">1</div>
              <div class="keypad-key">2</div>
              <div class="keypad-key">3</div>
              <div class="keypad-key">4</div>
              <div class="keypad-key">5</div>
              <div class="keypad-key">6</div>
              <div class="keypad-key">7</div>
              <div class="keypad-key">8</div>
              <div class="keypad-key">9</div>
              <div class="keypad-key">*</div>
              <div class="keypad-key">0</div>
              <div class="keypad-key">#</div>
            </div>
            <p style="text-align: center; font-size: 13px; color: #70717D;">Click a key to configure its action</p>
          </div>
        </div>

        <div class="card">
          <div class="card-header">
            <h3 class="card-title">Key Actions</h3>
          </div>
          <div class="card-body">
            <div class="user-card">
              <div class="user-avatar" style="background: #0D62FF;">1</div>
              <div class="user-info">
                <div class="user-name">Sales Department</div>
                <div class="user-details">Transfer to sales team</div>
              </div>
              <button class="action-button" style="padding: 6px 16px;">EDIT</button>
            </div>

            <div class="user-card">
              <div class="user-avatar" style="background: #0D62FF;">2</div>
              <div class="user-info">
                <div class="user-name">Support Department</div>
                <div class="user-details">Technical support queue</div>
              </div>
              <button class="action-button" style="padding: 6px 16px;">EDIT</button>
            </div>

            <div class="user-card">
              <div class="user-avatar" style="background: #0D62FF;">3</div>
              <div class="user-info">
                <div class="user-name">Billing & Accounts</div>
                <div class="user-details">Billing inquiries</div>
              </div>
              <button class="action-button" style="padding: 6px 16px;">EDIT</button>
            </div>

            <div class="user-card">
              <div class="user-avatar" style="background: #0D62FF;">0</div>
              <div class="user-info">
                <div class="user-name">Operator</div>
                <div class="user-details">Live operator assistance</div>
              </div>
              <button class="action-button" style="padding: 6px 16px;">EDIT</button>
            </div>

            <div class="user-card">
              <div class="user-avatar" style="background: var(--neutral-400);">#</div>
              <div class="user-info">
                <div class="user-name" style="color: var(--neutral-500);">Not Configured</div>
                <div class="user-details">No action assigned</div>
              </div>
              <button class="action-button-primary" style="padding: 6px 16px;">CONFIGURE</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Contact Lists Page -->
    <div id="page-contacts" class="page">
      <div class="page-header">
        <div>
          <div class="page-title">CONTACT LISTS</div>
          <div class="location-info">
            <span>Blocked & Permitted Numbers</span>
          </div>
          <p style="color: #70717D; font-size: 13px; margin: 8px 0 0 0;">Manage phone number access control</p>
        </div>
        <button class="action-button-primary">
          <i data-lucide="plus" style="width: 16px; height: 16px;"></i>
          <span>ADD CONTACT</span>
        </button>
      </div>

      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px;">
        <div class="card">
          <div class="card-header" style="display: flex; justify-content: space-between; align-items: center;">
            <div style="display: flex; align-items: center; gap: 12px;">
              <i data-lucide="x-circle" style="width: 24px; height: 24px; color: #EF4444;"></i>
              <div>
                <h3 class="card-title">Blocked Numbers</h3>
                <p style="font-size: 12px; color: #70717D; margin: 4px 0 0 0;">42 numbers blocked</p>
              </div>
            </div>
            <button class="action-button" style="padding: 6px 16px;">IMPORT</button>
          </div>
          <div class="card-body">
            <input type="text" class="search-box" placeholder="Search blocked numbers...">
            
            <div class="user-card" style="background: #FEE2E2; border-color: #FECACA;">
              <div class="user-info">
                <div class="user-name">(215) 555-0199</div>
                <div class="user-details">Spam caller</div>
              </div>
              <button style="background: none; border: none; color: #DC2626; cursor: pointer;">
                <i data-lucide="trash-2" style="width: 18px; height: 18px;"></i>
              </button>
            </div>

            <div class="user-card" style="background: #FEE2E2; border-color: #FECACA;">
              <div class="user-info">
                <div class="user-name">(215) 555-0188</div>
                <div class="user-details">Telemarketer</div>
              </div>
              <button style="background: none; border: none; color: #DC2626; cursor: pointer;">
                <i data-lucide="trash-2" style="width: 18px; height: 18px;"></i>
              </button>
            </div>

            <div class="user-card" style="background: #FEE2E2; border-color: #FECACA;">
              <div class="user-info">
                <div class="user-name">(215) 555-0177</div>
                <div class="user-details">Robocaller</div>
              </div>
              <button style="background: none; border: none; color: #DC2626; cursor: pointer;">
                <i data-lucide="trash-2" style="width: 18px; height: 18px;"></i>
              </button>
            </div>

            <div style="text-align: center; margin-top: 16px;">
              <a href="#" class="link-button">View all 42 blocked numbers</a>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card-header" style="display: flex; justify-content: space-between; align-items: center;">
            <div style="display: flex; align-items: center; gap: 12px;">
              <i data-lucide="check-circle" style="width: 24px; height: 24px; color: #22C55E;"></i>
              <div>
                <h3 class="card-title">Permitted Numbers</h3>
                <p style="font-size: 12px; color: #70717D; margin: 4px 0 0 0;">128 numbers allowed</p>
              </div>
            </div>
            <button class="action-button" style="padding: 6px 16px;">IMPORT</button>
          </div>
          <div class="card-body">
            <input type="text" class="search-box" placeholder="Search permitted numbers...">
            
            <div class="user-card" style="background: #DCFCE7; border-color: #BBF7D0;">
              <div class="user-info">
                <div class="user-name">(215) 555-0123</div>
                <div class="user-details">Partner company</div>
              </div>
              <button style="background: none; border: none; color: #16A34A; cursor: pointer;">
                <i data-lucide="edit" style="width: 18px; height: 18px;"></i>
              </button>
            </div>

            <div class="user-card" style="background: #DCFCE7; border-color: #BBF7D0;">
              <div class="user-info">
                <div class="user-name">(215) 555-0134</div>
                <div class="user-details">VIP client</div>
              </div>
              <button style="background: none; border: none; color: #16A34A; cursor: pointer;">
                <i data-lucide="edit" style="width: 18px; height: 18px;"></i>
              </button>
            </div>

            <div class="user-card" style="background: #DCFCE7; border-color: #BBF7D0;">
              <div class="user-info">
                <div class="user-name">(215) 555-0145</div>
                <div class="user-details">Emergency contact</div>
              </div>
              <button style="background: none; border: none; color: #16A34A; cursor: pointer;">
                <i data-lucide="edit" style="width: 18px; height: 18px;"></i>
              </button>
            </div>

            <div style="text-align: center; margin-top: 16px;">
              <a href="#" class="link-button">View all 128 permitted numbers</a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Call Queues Page -->
    <div id="page-queues" class="page">
      <div class="page-header">
        <div>
          <div class="page-title">CALL QUEUES</div>
          <div class="location-info">
            <span>Queue Management</span>
          </div>
          <p style="color: #70717D; font-size: 13px; margin: 8px 0 0 0;">Manage call queues and agent assignments</p>
        </div>
        <button class="action-button-primary">
          <i data-lucide="plus" style="width: 16px; height: 16px;"></i>
          <span>CREATE QUEUE</span>
        </button>
      </div>

      <div class="card">
        <div class="card-header">
          <h3 class="card-title">Active Queues</h3>
        </div>
        <div class="card-body">
          <table>
            <thead>
              <tr>
                <th>Queue Name</th>
                <th>Phone Number</th>
                <th>Agents</th>
                <th>Calls in Queue</th>
                <th>Avg Wait Time</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>
                  <div style="font-weight: 600;">Sales Queue</div>
                  <div style="font-size: 12px; color: var(--neutral-500); margin-top: 2px;">Primary sales routing</div>
                </td>
                <td>(445) 223-3042</td>
                <td>
                  <div style="display: flex; align-items: center; gap: 8px;">
                    <span style="font-weight: 600;">12</span>
                    <span class="badge badge-active">5 Available</span>
                  </div>
                </td>
                <td><span style="font-weight: 600; color: #0D62FF;">3</span></td>
                <td>2m 14s</td>
                <td>
                  <a href="#" class="link-button">MANAGE</a>
                </td>
              </tr>
              <tr>
                <td>
                  <div style="font-weight: 600;">Support Queue</div>
                  <div style="font-size: 12px; color: var(--neutral-500); margin-top: 2px;">Technical support</div>
                </td>
                <td>(445) 223-3043</td>
                <td>
                  <div style="display: flex; align-items: center; gap: 8px;">
                    <span style="font-weight: 600;">8</span>
                    <span class="badge badge-active">3 Available</span>
                  </div>
                </td>
                <td><span style="font-weight: 600; color: #0D62FF;">1</span></td>
                <td>1m 32s</td>
                <td>
                  <a href="#" class="link-button">MANAGE</a>
                </td>
              </tr>
              <tr>
                <td>
                  <div style="font-weight: 600;">Billing Queue</div>
                  <div style="font-size: 12px; color: var(--neutral-500); margin-top: 2px;">Billing and accounts</div>
                </td>
                <td>(445) 223-3044</td>
                <td>
                  <div style="display: flex; align-items: center; gap: 8px;">
                    <span style="font-weight: 600;">6</span>
                    <span class="badge badge-active">4 Available</span>
                  </div>
                </td>
                <td><span style="font-weight: 600;">0</span></td>
                <td>45s</td>
                <td>
                  <a href="#" class="link-button">MANAGE</a>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </main>

  <!-- Help Button -->
  <button class="help-button" title="Help">
    <i data-lucide="help-circle" style="width: 24px; height: 24px;"></i>
  </button>

  <!-- Footer -->
  <footer id="footer" style="background: #052766; color: white; padding: 24px; margin-top: 48px; margin-left: 340px; height: 200px; box-sizing: border-box; transition: margin-left 0.3s ease;">
    <div style="max-width: 1400px; margin: 0 auto;">
      <div style="display: flex; flex-wrap: wrap; gap: 16px; margin-bottom: 16px;">
        <a href="#" style="color: white; text-decoration: none; font-size: 13px; opacity: 0.9;">Contact Us</a>
        <a href="#" style="color: white; text-decoration: none; font-size: 13px; opacity: 0.9;">Community</a>
        <a href="#" style="color: white; text-decoration: none; font-size: 13px; opacity: 0.9;">Privacy Policy</a>
        <a href="#" style="color: white; text-decoration: none; font-size: 13px; opacity: 0.9;">Your Privacy Choices</a>
        <a href="#" style="color: white; text-decoration: none; font-size: 13px; opacity: 0.9;">Notice at Collection</a>
        <a href="#" style="color: white; text-decoration: none; font-size: 13px; opacity: 0.9;">Visitor Agreement</a>
        <a href="#" style="color: white; text-decoration: none; font-size: 13px; opacity: 0.9;">Terms & Conditions</a>
        <a href="#" style="color: white; text-decoration: none; font-size: 13px; opacity: 0.9;">Sitemap</a>
        <a href="#" style="color: white; text-decoration: none; font-size: 13px; opacity: 0.9;">Open Source</a>
        <a href="#" style="color: white; text-decoration: none; font-size: 13px; opacity: 0.9;">Broadband Labels</a>
      </div>
      <div style="font-size: 12px; opacity: 0.7; margin-bottom: 12px;">©2026 Comcast Corporation. All Rights Reserved.</div>
      <div style="display: flex; gap: 12px;">
        <a href="#" style="color: white; opacity: 0.8;">
          <i data-lucide="facebook" style="width: 20px; height: 20px;"></i>
        </a>
        <a href="#" style="color: white; opacity: 0.8;">
          <i data-lucide="linkedin" style="width: 20px; height: 20px;"></i>
        </a>
        <a href="#" style="color: white; opacity: 0.8;">
          <i data-lucide="twitter" style="width: 20px; height: 20px;"></i>
        </a>
      </div>
    </div>
    <div style="border-top: 1px solid rgba(255,255,255,0.2); margin-top: 16px; padding-top: 12px; text-align: center;">
      <button style="background: none; border: 1px solid rgba(255,255,255,0.3); color: white; padding: 8px 16px; border-radius: 4px; font-size: 13px; cursor: pointer; display: inline-flex; align-items: center; gap: 8px;">
        <i data-lucide="cookie" style="width: 16px; height: 16px;"></i>
        Cookie Preferences
      </button>
    </div>
  </footer>

  <script>
    // Initialize Lucide icons
    lucide.createIcons();
    
    // Check if user is already authenticated
    function checkAuth() {
      const isAuthenticated = localStorage.getItem('autoAttendantAuth');
      const overlay = document.getElementById('login-overlay');
      
      if (isAuthenticated === 'true') {
        overlay.classList.add('hidden');
      }
    }
    
    // Logout function
    function handleLogout() {
      localStorage.removeItem('autoAttendantAuth');
      const overlay = document.getElementById('login-overlay');
      overlay.classList.remove('hidden');
      document.getElementById('login-password').focus();
    }
    
    // Add shake animation for failed login
    const style = document.createElement('style');
    style.textContent = `
      @keyframes shake {
        0%, 100% { transform: translateX(0); }
        10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }
        20%, 40%, 60%, 80% { transform: translateX(10px); }
      }
    `;
    document.head.appendChild(style);
    
    // Check authentication on page load
    checkAuth();

    // Global state variable
    let keypadContext = 'open'; // 'open' or 'closed'

    // State management with localStorage
    function saveCurrentScreen(screenId, context = {}) {
      console.log('Saving screen:', screenId, context); // Debug
      localStorage.setItem('callflow_current_screen', screenId);
      localStorage.setItem('callflow_context', JSON.stringify(context));
    }

    function restoreState() {
      const savedScreen = localStorage.getItem('callflow_current_screen');
      const savedContext = JSON.parse(localStorage.getItem('callflow_context') || '{}');
      console.log('Restoring state:', savedScreen, savedContext); // Debug
      
      if (savedScreen && savedScreen !== 'fte-callflow') {
        // Hide all pages first
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        
        // Show the attendants page (parent container)
        const pageAttendants = document.getElementById('page-attendants');
        if (pageAttendants) {
          pageAttendants.classList.add('active');
        }
        
        // Hide all wizard screens first
        document.getElementById('fte-callflow').style.display = 'none';
        document.getElementById('main-callflow-content').style.display = 'none';
        document.getElementById('setup-timezone').style.display = 'none';
        document.getElementById('setup-openhours').style.display = 'none';
        document.getElementById('setup-holidays').style.display = 'none';
        document.getElementById('setup-routing').style.display = 'none';
        document.getElementById('setup-routing-closed').style.display = 'none';
        document.getElementById('setup-keypad').style.display = 'none';
        document.getElementById('setup-greeting').style.display = 'none';
        document.getElementById('ai-settings').style.display = 'none';
        
        // Show the saved screen
        document.getElementById(savedScreen).style.display = 'block';
        
        // Update sidebar active state
        document.querySelectorAll('.sidebar-item').forEach(i => i.classList.remove('active'));
        const attendantNavItem = document.querySelector('.sidebar-item[data-page="attendants"]');
        if (attendantNavItem) {
          attendantNavItem.classList.add('active');
        }
        
        // Restore context (keypadContext, etc.)
        if (savedContext.keypadContext) {
          keypadContext = savedContext.keypadContext;
        }
        
        // Update steppers if needed
        if (savedScreen === 'setup-keypad') {
          updateStepper('keypad-stepper', keypadContext);
        } else if (savedScreen === 'setup-greeting') {
          updateStepper('greeting-stepper', keypadContext);
        }
        
        // Show/hide footer and update help button
        if (savedScreen === 'main-callflow-content' || savedScreen === 'fte-callflow') {
          document.getElementById('footer').style.display = 'block';
          document.body.classList.remove('has-wizard-actions');
        } else {
          document.getElementById('footer').style.display = 'none';
          document.body.classList.add('has-wizard-actions');
        }
        
        // Update demo bar based on restored screen
        if (savedScreen === 'main-callflow-content') {
          document.getElementById('demo-toggle-control').style.display = 'none';
          document.getElementById('demo-fte-control').style.display = 'none';
          document.getElementById('demo-completed-control').style.display = 'flex';
        }
        
        lucide.createIcons();
      }
    }

    // Note: State restoration is now handled when user navigates to attendants page
    // This prevents auto-navigation away from dashboard on page refresh

    // Sidebar collapse toggle
    const sidebar = document.getElementById('sidebar');
    const sidebarToggle = document.getElementById('sidebar-toggle');
    const sidebarToggleIcon = document.getElementById('sidebar-toggle-icon');
    const mainContent = document.querySelector('.main-content');
    const footer = document.getElementById('footer');

    sidebarToggle.addEventListener('click', () => {
      sidebar.classList.toggle('collapsed');
      mainContent.classList.toggle('sidebar-collapsed');

      // Get all wizard bottom action bars
      const wizardBottomActions = document.querySelectorAll('.wizard-bottom-actions');

      // Update footer and wizard action bars
      if (sidebar.classList.contains('collapsed')) {
        footer.style.marginLeft = '60px';
        wizardBottomActions.forEach(el => el.style.left = '60px');
        sidebarToggleIcon.setAttribute('data-lucide', 'chevrons-right');
      } else {
        footer.style.marginLeft = '340px';
        wizardBottomActions.forEach(el => el.style.left = '340px');
        sidebarToggleIcon.setAttribute('data-lucide', 'chevrons-left');
      }

      // Reinitialize icons to show the updated icon
      lucide.createIcons();
    });

    // Navigation
    const sidebarItems = document.querySelectorAll('.sidebar-item[data-page]');
    const pages = document.querySelectorAll('.page');

    sidebarItems.forEach(item => {
      item.addEventListener('click', (e) => {
        e.preventDefault();
        const pageId = item.dataset.page;

        // Update active states
        sidebarItems.forEach(i => i.classList.remove('active'));
        item.classList.add('active');

        // Show selected page
        pages.forEach(p => p.classList.remove('active'));
        const targetPage = document.getElementById(`page-${pageId}`);
        if (targetPage) {
          targetPage.classList.add('active');
        }

        // Manage demo bar visibility
        if (pageId === 'dashboard') {
          // Dashboard: Show only state toggle
          document.getElementById('demo-toggle-control').style.display = 'flex';
          document.getElementById('demo-fte-control').style.display = 'none';
          document.getElementById('demo-completed-control').style.display = 'none';
        } else if (pageId === 'attendants') {
          // Attendants: Hide dashboard toggle, show FTE control initially
          document.getElementById('demo-toggle-control').style.display = 'none';
          document.getElementById('demo-fte-control').style.display = 'flex';
          document.getElementById('demo-completed-control').style.display = 'none';
          // Restore callflow wizard state (may override to show completed control)
          restoreState();
        } else {
          // Other pages: Hide all demo controls
          document.getElementById('demo-toggle-control').style.display = 'none';
          document.getElementById('demo-fte-control').style.display = 'none';
          document.getElementById('demo-completed-control').style.display = 'none';
        }

        // Reinitialize icons
        lucide.createIcons();
      });
    });

    // Quick action functions
    function showCallFlow() {
      document.querySelectorAll('.sidebar-item').forEach(i => i.classList.remove('active'));
      pages.forEach(p => p.classList.remove('active'));
      document.getElementById('page-callflow').classList.add('active');
      lucide.createIcons();
    }

    function showMainBusinessNumberCallflow() {
      // Navigate to the Main Business Number (attendants) page
      document.querySelectorAll('.sidebar-item').forEach(i => i.classList.remove('active'));
      pages.forEach(p => p.classList.remove('active'));
      
      // Activate the attendants page
      document.getElementById('page-attendants').classList.add('active');
      
      // Highlight the correct sidebar item
      const attendantNavItem = document.querySelector('.sidebar-item[data-page="attendants"]');
      if (attendantNavItem) {
        attendantNavItem.classList.add('active');
      }
      
      // Show the finished callflow content (not the first-time experience)
      document.getElementById('fte-callflow').style.display = 'none';
      document.getElementById('main-callflow-content').style.display = 'block';
      
      // Update demo bar (hide dashboard toggle, show completed control)
      document.getElementById('demo-toggle-control').style.display = 'none';
      document.getElementById('demo-fte-control').style.display = 'none';
      document.getElementById('demo-completed-control').style.display = 'flex';
      
      // Scroll to top and reinitialize icons
      window.scrollTo(0, 0);
      lucide.createIcons();
    }

    function showIVRKeypad() {
      document.querySelectorAll('.sidebar-item').forEach(i => i.classList.remove('active'));
      pages.forEach(p => p.classList.remove('active'));
      document.getElementById('page-keypad').classList.add('active');
      lucide.createIcons();
    }

    function showContacts() {
      document.querySelectorAll('.sidebar-item').forEach(i => i.classList.remove('active'));
      pages.forEach(p => p.classList.remove('active'));
      document.getElementById('page-contacts').classList.add('active');
      lucide.createIcons();
    }

    // Keypad interaction
    document.querySelectorAll('.keypad-key').forEach(key => {
      key.addEventListener('click', () => {
        key.style.transform = 'scale(0.95)';
        setTimeout(() => {
          key.style.transform = '';
        }, 100);
      });
    });

    // First Time Experience - Get Started
    function startCallFlowSetup() {
      document.getElementById('fte-callflow').style.display = 'none';
      document.getElementById('setup-timezone').style.display = 'block';
      document.getElementById('footer').style.display = 'none'; // Hide footer in wizard
      document.body.classList.add('has-wizard-actions'); // Move help button up
      saveCurrentScreen('setup-timezone');
      lucide.createIcons();
    }

    // Reset to First-Time Experience (FTE)
    function resetToFTE() {
      // Hide completed callflow
      document.getElementById('main-callflow-content').style.display = 'none';
      
      // Hide all wizard screens
      document.getElementById('setup-timezone').style.display = 'none';
      document.getElementById('setup-openhours').style.display = 'none';
      document.getElementById('setup-holidays').style.display = 'none';
      document.getElementById('setup-routing').style.display = 'none';
      document.getElementById('setup-routing-closed').style.display = 'none';
      document.getElementById('setup-keypad').style.display = 'none';
      document.getElementById('setup-greeting').style.display = 'none';
      document.getElementById('ai-settings').style.display = 'none';
      
      // Show FTE screen
      document.getElementById('fte-callflow').style.display = 'block';
      
      // Update demo bar (hide dashboard toggle, show FTE control)
      document.getElementById('demo-toggle-control').style.display = 'none';
      document.getElementById('demo-fte-control').style.display = 'flex';
      document.getElementById('demo-completed-control').style.display = 'none';
      
      // Clear saved state so it doesn't restore
      localStorage.removeItem('callflow_current_screen');
      localStorage.removeItem('callflow_context');
      
      // Show footer
      document.getElementById('footer').style.display = 'block';
      document.body.classList.remove('has-wizard-actions');
      
      // Scroll to top
      window.scrollTo(0, 0);
      
      // Reinitialize icons
      lucide.createIcons();
    }

    // Skip to Completed Callflow (from FTE)
    function skipToCompleted() {
      // Hide FTE screen
      document.getElementById('fte-callflow').style.display = 'none';
      
      // Hide all wizard screens
      document.getElementById('setup-timezone').style.display = 'none';
      document.getElementById('setup-openhours').style.display = 'none';
      document.getElementById('setup-holidays').style.display = 'none';
      document.getElementById('setup-routing').style.display = 'none';
      document.getElementById('setup-routing-closed').style.display = 'none';
      document.getElementById('setup-keypad').style.display = 'none';
      document.getElementById('setup-greeting').style.display = 'none';
      document.getElementById('ai-settings').style.display = 'none';
      
      // Show completed callflow
      document.getElementById('main-callflow-content').style.display = 'block';
      
      // Update demo bar (hide dashboard toggle, show completed control)
      document.getElementById('demo-toggle-control').style.display = 'none';
      document.getElementById('demo-fte-control').style.display = 'none';
      document.getElementById('demo-completed-control').style.display = 'flex';
      
      // Save completed state so it persists
      localStorage.setItem('callflow_current_screen', 'main-callflow-content');
      localStorage.setItem('callflow_context', JSON.stringify({}));
      
      // Show footer
      document.getElementById('footer').style.display = 'block';
      document.body.classList.remove('has-wizard-actions');
      
      // Scroll to top
      window.scrollTo(0, 0);
      
      // Reinitialize icons
      lucide.createIcons();
    }

    // Save timezone and continue
    function saveTimezoneAndNext() {
      // TODO: Save timezone selection
      document.getElementById('setup-timezone').style.display = 'none';
      document.getElementById('setup-openhours').style.display = 'block';
      saveCurrentScreen('setup-openhours');
      // Scroll to top when navigating to next step
      window.scrollTo(0, 0);
      lucide.createIcons();
    }

    // Go back to timezone from open hours
    function backToTimezone() {
      document.getElementById('setup-openhours').style.display = 'none';
      document.getElementById('setup-timezone').style.display = 'block';
      // Scroll to top when navigating back
      window.scrollTo(0, 0);
      lucide.createIcons();
    }

    // Save open hours and continue
    function saveOpenHoursAndNext() {
      // TODO: Save open hours
      document.getElementById('setup-openhours').style.display = 'none';
      document.getElementById('setup-holidays').style.display = 'block';
      saveCurrentScreen('setup-holidays');
      window.scrollTo(0, 0);
      lucide.createIcons();
    }

    // Toggle day open/closed
    function toggleDay(dayId) {
      const toggle = document.getElementById('toggle-' + dayId);
      const badge = document.getElementById('badge-' + dayId);
      const timeInputs = document.getElementById('times-' + dayId);
      
      if (toggle.checked) {
        badge.textContent = 'OPEN';
        badge.style.background = '#0D62FF';
        badge.style.color = 'white';
        timeInputs.style.display = 'flex';
      } else {
        badge.textContent = 'CLOSED';
        badge.style.background = '#F1F2F6';
        badge.style.color = '#70717D';
        timeInputs.style.display = 'none';
      }
    }

    // Navigate between tabs
    function navigateToTab(tab) {
      // Hide all screens
      document.getElementById('setup-timezone').style.display = 'none';
      document.getElementById('setup-openhours').style.display = 'none';
      document.getElementById('setup-holidays').style.display = 'none';
      
      // Show selected screen
      if (tab === 'timezone') {
        document.getElementById('setup-timezone').style.display = 'block';
      } else if (tab === 'openhours') {
        document.getElementById('setup-openhours').style.display = 'block';
      } else if (tab === 'holidays') {
        document.getElementById('setup-holidays').style.display = 'block';
      }
      
      // Scroll to top when navigating
      window.scrollTo(0, 0);
      
      // Reinitialize icons
      lucide.createIcons();
    }

    // Go back to open hours from holidays
    function backToOpenHours() {
      document.getElementById('setup-holidays').style.display = 'none';
      document.getElementById('setup-openhours').style.display = 'block';
      window.scrollTo(0, 0);
      lucide.createIcons();
    }

    // Save holidays and continue to routing
    function saveHolidaysAndComplete() {
      // TODO: Save holiday selections
      document.getElementById('setup-holidays').style.display = 'none';
      document.getElementById('setup-routing').style.display = 'block';
      saveCurrentScreen('setup-routing');
      window.scrollTo(0, 0);
      lucide.createIcons();
    }

    // Go back to holidays from routing
    function backToHolidays() {
      document.getElementById('setup-routing').style.display = 'none';
      document.getElementById('setup-holidays').style.display = 'block';
      window.scrollTo(0, 0);
      lucide.createIcons();
    }

    // Save routing and go to closed hours routing
    function saveRoutingAndNext() {
      document.getElementById('setup-routing').style.display = 'none';
      document.getElementById('setup-routing-closed').style.display = 'block';
      saveCurrentScreen('setup-routing-closed');
      window.scrollTo(0, 0);
      lucide.createIcons();
    }

    // Go back to open hours routing from closed hours routing
    function backToRouting() {
      document.getElementById('setup-routing-closed').style.display = 'none';
      document.getElementById('setup-routing').style.display = 'block';
      window.scrollTo(0, 0);
      lucide.createIcons();
    }

    // Complete the call flow setup
    function completeCallFlowSetup() {
      alert('Call Flow setup completed! This would save all settings and return to the main call flow screen.');
      // In a real app, this would save all the settings and navigate back
      document.getElementById('setup-routing-closed').style.display = 'none';
      document.getElementById('main-callflow-content').style.display = 'block';
      document.getElementById('footer').style.display = 'block';
      document.body.classList.remove('has-wizard-actions'); // Reset help button position
      saveCurrentScreen('main-callflow-content');
      window.scrollTo(0, 0);
      lucide.createIcons();
    }

    // Save and exit (can be called from any wizard step)
    function saveAndExit() {
      if (confirm('Save your progress and exit the wizard?')) {
        alert('Progress saved! Returning to main screen.');
        // Hide all wizard screens
        document.getElementById('setup-timezone').style.display = 'none';
        document.getElementById('setup-openhours').style.display = 'none';
        document.getElementById('setup-holidays').style.display = 'none';
        document.getElementById('setup-routing').style.display = 'none';
        document.getElementById('setup-routing-closed').style.display = 'none';
        document.getElementById('setup-keypad').style.display = 'none';
        document.getElementById('setup-greeting').style.display = 'none';
        document.getElementById('ai-settings').style.display = 'none';
        // Show main content and footer
        document.getElementById('main-callflow-content').style.display = 'block';
        document.getElementById('footer').style.display = 'block';
        document.body.classList.remove('has-wizard-actions'); // Reset help button position
        saveCurrentScreen('main-callflow-content');
        window.scrollTo(0, 0);
        lucide.createIcons();
      }
    }

    // Function to update stepper based on context
    function updateStepper(elementId, context) {
      const stepperEl = document.getElementById(elementId);
      if (!stepperEl) return;

      let stepperHTML = '';
      
      if (context === 'open') {
        // For Open Hours: Step 1 completed, Step 2 active, Step 3 inactive
        stepperHTML = `
          <!-- Step 1: Schedules (Completed) -->
          <div style="flex: 1; display: flex; align-items: center; gap: 12px; position: relative;">
            <div style="width: 32px; height: 32px; border-radius: 50%; background: #22C55E; color: white; display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: 600; z-index: 2; position: relative;">
              <i data-lucide="check" style="width: 18px; height: 18px;"></i>
            </div>
            <span style="font-size: 14px; font-weight: 500; color: #595A69; position: relative; z-index: 2; background: white; padding-right: 8px;">Schedules</span>
            <div style="position: absolute; left: 16px; top: 15px; height: 2px; background: #22C55E; width: 100%; z-index: 0;"></div>
          </div>

          <!-- Step 2: Open Hours (Active) -->
          <div style="flex: 1; display: flex; align-items: center; gap: 12px; position: relative;">
            <div style="width: 32px; height: 32px; border-radius: 50%; background: #0D62FF; color: white; display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: 600; z-index: 2; position: relative;">2</div>
            <span style="font-size: 14px; font-weight: 600; color: #0D62FF; position: relative; z-index: 2; background: white; padding-right: 8px;">Open Hours</span>
            <div style="position: absolute; left: 16px; top: 15px; height: 2px; background: #F1F2F6; width: 100%; z-index: 0;"></div>
          </div>

          <!-- Step 3: Closed Hours & Holidays (Inactive) -->
          <div style="flex: 1; display: flex; align-items: center; gap: 12px; position: relative;">
            <div style="width: 32px; height: 32px; border-radius: 50%; background: var(--neutral-100); border: 2px solid #DDDDE2; color: var(--neutral-400); display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: 600; z-index: 2; position: relative;">3</div>
            <span style="font-size: 14px; font-weight: 500; color: var(--neutral-400); position: relative; z-index: 2; background: white; padding-right: 8px;">Closed Hours & Holidays</span>
          </div>
        `;
      } else {
        // For Closed Hours: Step 1 & 2 completed, Step 3 active
        stepperHTML = `
          <!-- Step 1: Schedules (Completed) -->
          <div style="flex: 1; display: flex; align-items: center; gap: 12px; position: relative;">
            <div style="width: 32px; height: 32px; border-radius: 50%; background: #22C55E; color: white; display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: 600; z-index: 2; position: relative;">
              <i data-lucide="check" style="width: 18px; height: 18px;"></i>
            </div>
            <span style="font-size: 14px; font-weight: 500; color: #595A69; position: relative; z-index: 2; background: white; padding-right: 8px;">Schedules</span>
            <div style="position: absolute; left: 16px; top: 15px; height: 2px; background: #22C55E; width: 100%; z-index: 0;"></div>
          </div>

          <!-- Step 2: Open Hours (Completed) -->
          <div style="flex: 1; display: flex; align-items: center; gap: 12px; position: relative;">
            <div style="width: 32px; height: 32px; border-radius: 50%; background: #22C55E; color: white; display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: 600; z-index: 2; position: relative;">
              <i data-lucide="check" style="width: 18px; height: 18px;"></i>
            </div>
            <span style="font-size: 14px; font-weight: 500; color: #595A69; position: relative; z-index: 2; background: white; padding-right: 8px;">Open Hours</span>
            <div style="position: absolute; left: 16px; top: 15px; height: 2px; background: #22C55E; width: 100%; z-index: 0;"></div>
          </div>

          <!-- Step 3: Closed Hours & Holidays (Active) -->
          <div style="flex: 1; display: flex; align-items: center; gap: 12px; position: relative;">
            <div style="width: 32px; height: 32px; border-radius: 50%; background: #0D62FF; color: white; display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: 600; z-index: 2; position: relative;">3</div>
            <span style="font-size: 14px; font-weight: 600; color: #0D62FF; position: relative; z-index: 2; background: white; padding-right: 8px;">Closed Hours & Holidays</span>
          </div>
        `;
      }

      stepperEl.innerHTML = stepperHTML;
    }

    // Navigate to keypad configuration from routing screen
    function goToKeypadConfig(context) {
      keypadContext = context;
      if (context === 'open') {
        document.getElementById('setup-routing').style.display = 'none';
      } else {
        document.getElementById('setup-routing-closed').style.display = 'none';
      }
      document.getElementById('setup-keypad').style.display = 'block';
      updateStepper('keypad-stepper', context);
      saveCurrentScreen('setup-keypad', {keypadContext: context});
      window.scrollTo(0, 0);
      lucide.createIcons();
    }

    // Go back from keypad configuration to routing screen
    function backFromKeypad() {
      document.getElementById('setup-keypad').style.display = 'none';
      if (keypadContext === 'open') {
        document.getElementById('setup-routing').style.display = 'block';
      } else {
        document.getElementById('setup-routing-closed').style.display = 'block';
      }
      window.scrollTo(0, 0);
      lucide.createIcons();
    }

    // Save keypad configuration and go to greeting
    function saveKeypadAndNext() {
      document.getElementById('setup-keypad').style.display = 'none';
      document.getElementById('setup-greeting').style.display = 'block';
      updateStepper('greeting-stepper', keypadContext);
      saveCurrentScreen('setup-greeting', {keypadContext: keypadContext});
      window.scrollTo(0, 0);
      lucide.createIcons();
    }

    // Go back from greeting to keypad configuration
    function backFromGreeting() {
      document.getElementById('setup-greeting').style.display = 'none';
      document.getElementById('setup-keypad').style.display = 'block';
      updateStepper('keypad-stepper', keypadContext);
      window.scrollTo(0, 0);
      lucide.createIcons();
    }

    // Save greeting and advance to next step
    function saveGreetingAndComplete() {
      document.getElementById('setup-greeting').style.display = 'none';
      
      if (keypadContext === 'open') {
        // After completing Open Hours routing, go to Closed Hours routing
        document.getElementById('setup-routing-closed').style.display = 'block';
        saveCurrentScreen('setup-routing-closed');
      } else {
        // After completing Closed Hours routing, complete the entire setup
        alert('Call Flow setup completed! All routing configurations saved.');
        document.getElementById('main-callflow-content').style.display = 'block';
        document.getElementById('footer').style.display = 'block';
        document.body.classList.remove('has-wizard-actions');
        saveCurrentScreen('main-callflow-content');
      }
      
      window.scrollTo(0, 0);
      lucide.createIcons();
    }

    // Toggle all holidays
    function toggleAllHolidays() {
      const selectAll = document.getElementById('select-all-holidays');
      const checkboxes = document.querySelectorAll('.holiday-checkbox');
      
      checkboxes.forEach(checkbox => {
        checkbox.checked = selectAll.checked;
      });
    }

    // Toggle Open 24/7
    function toggleOpen247() {
      const checkbox = document.getElementById('open-24-7');
      const days = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];
      
      days.forEach(day => {
        const toggle = document.getElementById('toggle-' + day);
        const badge = document.getElementById('badge-' + day);
        const timeInputs = document.getElementById('times-' + day);
        
        if (checkbox.checked) {
          // Enable all days and set to 24 hours
          toggle.checked = true;
          badge.textContent = 'OPEN';
          badge.style.background = '#0D62FF';
          badge.style.color = 'white';
          timeInputs.style.display = 'flex';
          
          // Replace time inputs with "24 hours" display
          timeInputs.innerHTML = '<input type="text" value="24 hours" readonly style="padding: 8px 12px; border: 1px solid #DDDDE2; border-radius: 4px; font-size: 14px; background: #FCFCFC; color: #70717D; cursor: not-allowed;"><button style="background: none; border: none; cursor: pointer; padding: 4px;" title="Copy to other days"><i data-lucide="copy" style="width: 18px; height: 18px; color: var(--neutral-400);"></i></button>';
          
          // Disable the toggle so users can't change individual days
          toggle.disabled = true;
        } else {
          // Reset to normal state
          toggle.disabled = false;
          
          // Reset time inputs to standard format
          if (day === 'monday' || day === 'tuesday') {
            timeInputs.innerHTML = '<input type="time" value="09:00" style="padding: 8px 12px; border: 1px solid #DDDDE2; border-radius: 4px; font-size: 14px; cursor: pointer;"><span style="color: var(--neutral-400);">—</span><input type="time" value="18:00" style="padding: 8px 12px; border: 1px solid #DDDDE2; border-radius: 4px; font-size: 14px; cursor: pointer;"><button style="background: none; border: none; cursor: pointer; padding: 4px;" title="Copy to other days"><i data-lucide="copy" style="width: 18px; height: 18px; color: var(--neutral-400);"></i></button>';
          } else if (day === 'thursday' || day === 'saturday') {
            timeInputs.innerHTML = '<input type="text" value="24 hours" readonly style="padding: 8px 12px; border: 1px solid #DDDDE2; border-radius: 4px; font-size: 14px; background: #FCFCFC; color: #70717D;"><button style="background: none; border: none; cursor: pointer; padding: 4px;" title="Copy to other days"><i data-lucide="copy" style="width: 18px; height: 18px; color: var(--neutral-400);"></i></button>';
          } else {
            // Wednesday, Friday, Sunday - turn off
            toggle.checked = false;
            badge.textContent = 'CLOSED';
            badge.style.background = '#F1F2F6';
            badge.style.color = '#70717D';
            timeInputs.style.display = 'none';
          }
        }
      });
      
      // Reinitialize icons
      lucide.createIcons();
    }

    // Go back to FTE
    function backToFTE() {
      document.getElementById('setup-timezone').style.display = 'none';
      document.getElementById('setup-openhours').style.display = 'none';
      document.getElementById('setup-holidays').style.display = 'none';
      document.getElementById('fte-callflow').style.display = 'block';
      document.getElementById('footer').style.display = 'block'; // Show footer when exiting wizard
      document.body.classList.remove('has-wizard-actions'); // Reset help button position
      saveCurrentScreen('fte-callflow');
      window.scrollTo(0, 0);
      lucide.createIcons();
    }

    // Jump to specific workflow steps from landing page
    function jumpToSchedules() {
      document.getElementById('main-callflow-content').style.display = 'none';
      document.getElementById('footer').style.display = 'none';
      document.getElementById('setup-timezone').style.display = 'block';
      document.body.classList.add('has-wizard-actions');
      saveCurrentScreen('setup-timezone');
      window.scrollTo(0, 0);
      lucide.createIcons();
    }

    function jumpToHolidays() {
      document.getElementById('main-callflow-content').style.display = 'none';
      document.getElementById('footer').style.display = 'none';
      document.getElementById('setup-holidays').style.display = 'block';
      document.body.classList.add('has-wizard-actions');
      saveCurrentScreen('setup-holidays');
      window.scrollTo(0, 0);
      lucide.createIcons();
    }

    function jumpToOpenKeypad() {
      keypadContext = 'open';
      document.getElementById('main-callflow-content').style.display = 'none';
      document.getElementById('footer').style.display = 'none';
      document.getElementById('setup-keypad').style.display = 'block';
      updateStepper('keypad-stepper', 'open');
      document.body.classList.add('has-wizard-actions');
      saveCurrentScreen('setup-keypad', {keypadContext: 'open'});
      window.scrollTo(0, 0);
      lucide.createIcons();
    }

    function jumpToOpenGreeting() {
      keypadContext = 'open';
      document.getElementById('main-callflow-content').style.display = 'none';
      document.getElementById('footer').style.display = 'none';
      document.getElementById('setup-greeting').style.display = 'block';
      updateStepper('greeting-stepper', 'open');
      document.body.classList.add('has-wizard-actions');
      saveCurrentScreen('setup-greeting', {keypadContext: 'open'});
      window.scrollTo(0, 0);
      lucide.createIcons();
    }

    function jumpToClosedRouting() {
      document.getElementById('main-callflow-content').style.display = 'none';
      document.getElementById('footer').style.display = 'none';
      document.getElementById('setup-routing-closed').style.display = 'block';
      document.body.classList.add('has-wizard-actions');
      saveCurrentScreen('setup-routing-closed');
      window.scrollTo(0, 0);
      lucide.createIcons();
    }

    function jumpToClosedGreeting() {
      keypadContext = 'closed';
      document.getElementById('main-callflow-content').style.display = 'none';
      document.getElementById('footer').style.display = 'none';
      document.getElementById('setup-greeting').style.display = 'block';
      updateStepper('greeting-stepper', 'closed');
      document.body.classList.add('has-wizard-actions');
      saveCurrentScreen('setup-greeting', {keypadContext: 'closed'});
      window.scrollTo(0, 0);
      lucide.createIcons();
    }

    // AI Settings State Management
    let aiSettings = {
      openHoursEnabled: true,
      closedHoursEnabled: true,
      emailNotifications: true,
      userEmail: 'really_changeds@example.com'
    };

    // Load settings from localStorage
    function loadAISettings() {
      const saved = localStorage.getItem('ai_settings');
      if (saved) {
        try {
          aiSettings = JSON.parse(saved);
        } catch (e) {
          console.error('Error loading AI settings:', e);
        }
      }
      return aiSettings;
    }

    // Save settings to localStorage
    function saveAISettings() {
      localStorage.setItem('ai_settings', JSON.stringify(aiSettings));
    }

    // Open settings page
    function openAISettings() {
      // Hide all pages
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      
      // Hide other wizard screens
      document.getElementById('fte-callflow').style.display = 'none';
      document.getElementById('main-callflow-content').style.display = 'none';
      document.getElementById('setup-timezone').style.display = 'none';
      document.getElementById('setup-openhours').style.display = 'none';
      document.getElementById('setup-holidays').style.display = 'none';
      document.getElementById('setup-routing').style.display = 'none';
      document.getElementById('setup-routing-closed').style.display = 'none';
      document.getElementById('setup-keypad').style.display = 'none';
      document.getElementById('setup-greeting').style.display = 'none';
      
      // Show settings screen
      document.getElementById('ai-settings').style.display = 'block';
      document.getElementById('footer').style.display = 'none';
      document.body.classList.add('has-wizard-actions');
      
      // Load current settings into form
      populateSettingsForm();
      
      // Scroll to top
      window.scrollTo(0, 0);
      
      lucide.createIcons();
    }

    // Populate form with current settings
    function populateSettingsForm() {
      loadAISettings();
      document.getElementById('open-hours-toggle').checked = aiSettings.openHoursEnabled;
      document.getElementById('closed-hours-toggle').checked = aiSettings.closedHoursEnabled;
      document.getElementById('email-notifications-toggle').checked = aiSettings.emailNotifications;
      document.getElementById('user-email').value = aiSettings.userEmail;
    }

    // Save settings and return to landing
    function saveAISettingsAndExit() {
      // Get values from form
      aiSettings.openHoursEnabled = document.getElementById('open-hours-toggle').checked;
      aiSettings.closedHoursEnabled = document.getElementById('closed-hours-toggle').checked;
      aiSettings.emailNotifications = document.getElementById('email-notifications-toggle').checked;
      aiSettings.userEmail = document.getElementById('user-email').value;
      
      // Validate email if notifications are enabled
      if (aiSettings.emailNotifications) {
        const emailInput = document.getElementById('user-email');
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(aiSettings.userEmail)) {
          alert('Please enter a valid email address for notifications.');
          emailInput.focus();
          return;
        }
      }
      
      // Save to localStorage
      saveAISettings();
      
      // Return to landing page
      document.getElementById('ai-settings').style.display = 'none';
      document.getElementById('main-callflow-content').style.display = 'block';
      document.getElementById('footer').style.display = 'block';
      document.body.classList.remove('has-wizard-actions');
      
      // Scroll to top
      window.scrollTo(0, 0);
      
      // Show confirmation (optional)
      console.log('AI Settings saved:', aiSettings);
    }

    // Load settings on page load
    loadAISettings();

    // Demo state management
    let currentDemoState = 'normal'; // 'normal', 'warning', 'critical', 'failover'
    
    function toggleDemoUsageState() {
      // Cycle through states: normal -> warning -> critical -> failover -> normal
      if (currentDemoState === 'normal') {
        currentDemoState = 'warning';
      } else if (currentDemoState === 'warning') {
        currentDemoState = 'critical';
      } else if (currentDemoState === 'critical') {
        currentDemoState = 'failover';
      } else {
        currentDemoState = 'normal';
      }
      
      // Update the display
      updateAIUsageStatus();
    }

    // AI Usage Threshold Monitoring
    function updateAIUsageStatus() {
      // Get usage values based on current demo state
      let used, total, statusLabel;
      
      if (currentDemoState === 'normal') {
        used = 247;
        total = 500;
        statusLabel = 'Normal';
      } else if (currentDemoState === 'warning') {
        used = 410;
        total = 500;
        statusLabel = 'Warning';
      } else if (currentDemoState === 'critical') {
        used = 460;
        total = 500;
        statusLabel = 'Critical';
      } else { // failover
        used = 500;
        total = 500;
        statusLabel = 'Failover Active';
      }
      
      const remaining = total - used;
      const percentageUsed = (used / total) * 100;
      
      // Determine status based on usage
      let status = 'normal';
      let statusColor = '#0D62FF';
      let bgGradient = 'linear-gradient(135deg, #E0F2FE 0%, #BAE6FD 100%)';
      let borderColor = '#7DD3FC';
      let alertHTML = '';
      
      if (percentageUsed >= 100) {
        // Failover: 100% used (0 minutes remaining)
        status = 'failover';
        statusColor = '#70717D';
        bgGradient = 'linear-gradient(135deg, #F9F9FA 0%, #F1F2F6 100%)';
        borderColor = '#DDDDE2';
        alertHTML = `
          <div style="background: white; border-left: 4px solid #70717D; border-radius: 8px; padding: 12px 16px; margin-bottom: 16px; display: flex; align-items: start; gap: 12px;">
            <i data-lucide="info" style="width: 20px; height: 20px; color: #70717D; flex-shrink: 0; margin-top: 2px;"></i>
            <div style="flex: 1;">
              <div style="font-size: 13px; font-weight: 600; color: #2B2D3F; margin-bottom: 4px;">Standard Auto-Attendant Active</div>
              <div style="font-size: 12px; color: #595A69; line-height: 1.5; margin-bottom: 8px;">Your Google Virtual Assistant has used all available minutes. Calls are now being handled by your standard auto-attendant.</div>
              <div style="font-size: 12px; color: #2B2D3F; font-weight: 600;">Add minutes to reactivate your AI assistant.</div>
            </div>
          </div>
        `;
      } else if (percentageUsed >= 90) {
        // Critical: 90%+ used (50 minutes or less)
        status = 'critical';
        statusColor = '#DC2626';
        bgGradient = 'linear-gradient(135deg, #FEE2E2 0%, #FECACA 100%)';
        borderColor = '#F87171';
        alertHTML = `
          <div style="background: white; border-left: 4px solid #DC2626; border-radius: 8px; padding: 12px 16px; margin-bottom: 16px; display: flex; align-items: start; gap: 12px;">
            <i data-lucide="alert-triangle" style="width: 20px; height: 20px; color: #DC2626; flex-shrink: 0; margin-top: 2px;"></i>
            <div style="flex: 1;">
              <div style="font-size: 13px; font-weight: 600; color: #DC2626; margin-bottom: 4px;">Critical: Only ${remaining} minutes remaining</div>
              <div style="font-size: 12px; color: #595A69; line-height: 1.5;">Your AI minutes are nearly depleted. Add more minutes now to avoid service interruption.</div>
            </div>
          </div>
        `;
      } else if (percentageUsed >= 80) {
        // Warning: 80-89% used (100-51 minutes remaining)
        status = 'warning';
        statusColor = '#854D0E';
        bgGradient = 'linear-gradient(135deg, #FEF9C3 0%, #FEF08A 100%)';
        borderColor = '#FACC15';
        alertHTML = `
          <div style="background: white; border-left: 4px solid #EAB308; border-radius: 8px; padding: 12px 16px; margin-bottom: 16px; display: flex; align-items: start; gap: 12px;">
            <i data-lucide="alert-circle" style="width: 20px; height: 20px; color: #EAB308; flex-shrink: 0; margin-top: 2px;"></i>
            <div style="flex: 1;">
              <div style="font-size: 13px; font-weight: 600; color: #EAB308; margin-bottom: 4px;">Low Balance: ${remaining} minutes remaining</div>
              <div style="font-size: 12px; color: #595A69; line-height: 1.5;">You're running low on AI minutes. Consider adding more to ensure uninterrupted service.</div>
            </div>
          </div>
        `;
      }
      
      // Update dashboard card (if it exists)
      const dashboardCard = document.getElementById('dashboard-ai-usage');
      if (dashboardCard) {
        // Update demo label
        const demoLabel = document.getElementById('demo-status-label');
        if (demoLabel) {
          demoLabel.textContent = `DEMO: ${statusLabel}`;
        }
        
        // Update card styling
        dashboardCard.style.background = bgGradient;
        dashboardCard.style.borderColor = borderColor;
        
        // Update displayed numbers
        const usedSpan = dashboardCard.querySelector('span[style*="font-size: 28px"]');
        if (usedSpan) {
          usedSpan.textContent = used;
        }
        
        const remainingSpan = dashboardCard.querySelector('span[style*="font-size: 14px"][style*="margin-left: auto"]');
        if (remainingSpan) {
          remainingSpan.textContent = `${remaining} remaining`;
          remainingSpan.style.color = status === 'normal' ? '#15803D' : statusColor;
        }
        
        // Update progress bar
        const dashboardProgressBar = dashboardCard.querySelector('[style*="width:"][style*="height: 100%"]');
        if (dashboardProgressBar) {
          dashboardProgressBar.style.width = `${percentageUsed}%`;
          dashboardProgressBar.style.background = statusColor;
        }
        
        // Remove existing alert if present
        const existingAlert = dashboardCard.querySelector('[data-alert]');
        if (existingAlert) {
          existingAlert.remove();
        }
        
        // Add alert if not normal status
        if (status !== 'normal' && alertHTML) {
          const usageStats = dashboardCard.querySelector('div > div');
          if (usageStats) {
            const alertDiv = document.createElement('div');
            alertDiv.setAttribute('data-alert', 'true');
            alertDiv.innerHTML = alertHTML;
            usageStats.parentNode.insertBefore(alertDiv, usageStats);
          }
        }
      }
      
      // Update landing page card (if it exists)
      const landingCard = document.querySelector('[style*="Google Virtual Assistant uses AI"]')?.closest('div[style*="background: white"]');
      if (landingCard) {
        // Update card styling
        landingCard.style.borderColor = status !== 'normal' ? borderColor : '#F1F2F6';
        
        // Update displayed numbers on landing page
        const landingUsedSpan = landingCard.querySelector('span[style*="font-size: 32px"]');
        if (landingUsedSpan) {
          landingUsedSpan.textContent = used;
        }
        
        const landingRemainingDiv = landingCard.querySelector('div[style*="font-size: 24px"]');
        if (landingRemainingDiv) {
          landingRemainingDiv.textContent = remaining;
          landingRemainingDiv.style.color = status === 'normal' ? '#22C55E' : statusColor;
        }
        
        const landingPercentage = landingCard.querySelector('span[style*="82% used"]');
        if (landingPercentage) {
          landingPercentage.textContent = `${Math.round(percentageUsed)}% used`;
          landingPercentage.style.color = status === 'normal' ? '#0D62FF' : statusColor;
        }
        
        // Update progress bar
        const landingProgressBar = landingCard.querySelector('[style*="width:"][style*="transition: width"]');
        if (landingProgressBar) {
          landingProgressBar.style.width = `${percentageUsed}%`;
          landingProgressBar.style.background = status === 'normal' 
            ? 'linear-gradient(90deg, #0D62FF 0%, #0A4ECC 100%)' 
            : `linear-gradient(90deg, ${statusColor} 0%, ${statusColor} 100%)`;
        }
        
        // Remove existing alert if present
        const existingLandingAlert = landingCard.querySelector('[data-alert]');
        if (existingLandingAlert) {
          existingLandingAlert.remove();
        }
        
        // Add alert banner at top of card if not normal
        if (status !== 'normal' && alertHTML) {
          const cardContent = landingCard.querySelector('div[style*="margin-bottom: 24px"]');
          if (cardContent) {
            const alertDiv = document.createElement('div');
            alertDiv.setAttribute('data-alert', 'true');
            alertDiv.innerHTML = alertHTML;
            landingCard.insertBefore(alertDiv, cardContent);
          }
        }
      }
      
      // Refresh icons after any updates
      lucide.createIcons();
    }
    
    // Run on page load
    updateAIUsageStatus();
  </script>
</body>
</html>
