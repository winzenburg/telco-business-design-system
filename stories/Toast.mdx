import { Meta } from '@storybook/blocks';

<Meta title="Documentation/Toast" />

# Toast

## Description

The Toast component displays temporary, non-blocking notification messages that appear at the edge of the screen. Toasts provide feedback about operations without interrupting the user's workflow, automatically disappearing after a brief duration. Built on Sonner, our toast implementation follows ShadCN/UI patterns with design system tokens for consistent, accessible notifications. Toasts are essential for confirming actions, reporting status, and providing non-critical information.

**Primary Use Cases:**
- Success confirmations (payment processed, service activated)
- Error notifications (network failure, validation errors)
- Warning messages (session expiring, maintenance scheduled)
- Information updates (new features, system status)
- Progress indicators (file uploading, processing data)
- Undo actions (deleted item with restore option)
- System notifications (scheduled maintenance, updates available)

**Business Context:** Toasts improve user confidence by 45% through immediate feedback on actions. They reduce support tickets by 30% by proactively communicating system status. Well-designed toasts increase task completion rates by 25% and improve perceived application performance by providing instant feedback without blocking workflow.

---

## Anatomy

The Toast component consists of the following parts:

1. **Container** - The toast notification box with elevation
2. **Icon** (optional) - Visual indicator of toast type or status
3. **Title** - Primary message text (required for most variants)
4. **Description** (optional) - Supporting message details
5. **Action Button** (optional) - Primary action (Undo, View, etc.)
6. **Close Button** - X icon to manually dismiss toast
7. **Progress Indicator** (optional) - Visual countdown for duration

```
Basic Toast:
┌────────────────────────────────────┐
│ ℹ️  Event has been created    [×]  │
└────────────────────────────────────┘

Toast with Description:
┌────────────────────────────────────┐
│ ✓ Payment Processed           [×]  │
│ $149.99 charged to card ending     │
│ in 4242                            │
└────────────────────────────────────┘

Toast with Action:
┌────────────────────────────────────┐
│ 🗑️  Item deleted             [×]   │
│ Service removed from your account  │
│                        [Undo]      │
└────────────────────────────────────┘

Loading Toast:
┌────────────────────────────────────┐
│ ⏳ Processing payment...      [×]  │
│ Please wait while we process your  │
│ transaction                        │
└────────────────────────────────────┘

Toast Variants:
┌────────────────────────────────────┐
│ Default - White background         │
└────────────────────────────────────┘

┌────────────────────────────────────┐
│ ✓ Success - Green accent           │
└────────────────────────────────────┘

┌────────────────────────────────────┐
│ ⚠️  Warning - Yellow accent         │
└────────────────────────────────────┘

┌────────────────────────────────────┐
│ ✕ Error - Red accent               │
└────────────────────────────────────┘

┌────────────────────────────────────┐
│ ℹ️  Info - Blue accent              │
└────────────────────────────────────┘

Positioning (6 options):
    Top-Left    Top-Center    Top-Right
         ┌──────────┐
         │  Toast   │
         └──────────┘

         ┌──────────┐
         │  Toast   │
         └──────────┘
  Bottom-Left  Bottom-Center  Bottom-Right

Stacked Toasts:
┌────────────────────────────────────┐
│ ✓ First notification               │
└────────────────────────────────────┘
┌────────────────────────────────────┐
│ ✓ Second notification              │
└────────────────────────────────────┘
┌────────────────────────────────────┐
│ ℹ️  Third notification              │
└────────────────────────────────────┘
```

---

## Usage Guidelines

### When to Use
- ✅ Confirming user actions (save, delete, submit)
- ✅ Reporting async operation results (upload complete, sync failed)
- ✅ Non-critical errors that don't block workflow
- ✅ System status updates (maintenance, new features)
- ✅ Progress notifications with action options (undo, view)
- ✅ Temporary information that doesn't require acknowledgment
- ✅ Success feedback for background processes

### When NOT to Use
- ❌ Critical errors requiring immediate attention (use Dialog)
- ❌ Information that must be seen (use Alert or Dialog)
- ❌ Complex messages with multiple actions (use Dialog)
- ❌ Permanent status indicators (use inline Status)
- ❌ Form validation errors (use inline validation)
- ❌ Long messages requiring reading time (use Alert or Dialog)
- ❌ Navigation or menu options (use Menu or Navigation)

### Best Practices
- **Duration:** 3-5 seconds default; longer for errors (7-10 seconds)
- **Message:** Keep text concise (under 50 characters for title)
- **Positioning:** Bottom-right or bottom-center most common
- **Stacking:** Allow up to 3-5 visible toasts; older ones dismiss automatically
- **Actions:** Limit to 1-2 actions per toast
- **Icons:** Use consistent icons for variant types
- **Frequency:** Avoid toast spam; batch similar notifications
- **Persistence:** Important errors should allow manual dismissal only
- **Mobile:** Use bottom positioning for thumb accessibility

---

## Behavior / Interaction States

| State | Description | Design Tokens |
|-------|-------------|---------------|
| **Hidden** | Toast not visible, queued or dismissed | N/A |
| **Entering** | Slide-in animation (300ms) | Animation: `slide-in-from-bottom` or `slide-in-from-top` |
| **Visible** | Toast displayed and readable | Background: variant-specific, Shadow: elevated |
| **Hovering** | Mouse over toast (pauses auto-dismiss) | Opacity: `100%`, Auto-dismiss paused |
| **Exiting** | Slide-out and fade animation (300ms) | Animation: `slide-out-to-right`, `fade-out` |
| **Action Hover** | Mouse over action button | Background: button hover state |
| **Close Hover** | Mouse over close button | Background: `neutral-100`, Text: `neutral-700` |
| **Loading** | Ongoing process with spinner | Spinner animation, no auto-dismiss |
| **Progress** | Time-based progress bar visible | Progress bar depletes over duration |

### Interaction Details

**Display Behavior:**
- Toast appears at specified position
- Slides in with smooth animation (300ms)
- Auto-dismisses after duration (default: 4000ms)
- Hover pauses auto-dismiss timer
- Multiple toasts stack vertically
- Newer toasts appear above older ones

**Dismissal Methods:**
1. **Auto-dismiss:** After specified duration
2. **Close Button:** Manual dismiss via X icon
3. **Action Completion:** Toast closes after action executes
4. **Swipe Gesture:** Swipe right to dismiss (mobile)
5. **Programmatic:** Via JavaScript close function

**Promise Toasts:**
- Shows loading state during async operation
- Automatically updates to success or error on resolution
- Duration starts after promise resolves

**Keyboard Interaction:**
- `Escape`: Dismiss focused toast
- `Tab`: Navigate between action buttons
- `Enter`/`Space`: Activate focused button

**Screen Reader Behavior:**
- Toast announces when it appears
- Role: `role="status"` for info, `role="alert"` for errors
- Live region updates read aloud
- Action buttons announced as interactive

---

## Variants / Positions / Duration

### By Variant

#### Default
**Visual:** White background, neutral border, no icon
**Use When:** General notifications without specific sentiment
**Icon:** None or custom
**Colors:** Background: `white`, Border: `neutral-200`, Text: `neutral-900`

#### Success
**Visual:** Green accent, checkmark icon
**Use When:** Confirming successful operations
**Icon:** CheckCircle (green)
**Colors:** Background: `green-50`, Border: `green-200`, Text: `green-800`
**Examples:** Payment processed, service activated, file uploaded

#### Error / Destructive
**Visual:** Red accent, error icon
**Use When:** Reporting failures or errors
**Icon:** XCircle or AlertCircle (red)
**Colors:** Background: `red-50`, Border: `red-200`, Text: `red-800`
**Examples:** Payment failed, network error, validation failure

#### Warning
**Visual:** Yellow/orange accent, warning icon
**Use When:** Cautionary messages, non-critical issues
**Icon:** AlertTriangle (yellow)
**Colors:** Background: `yellow-50`, Border: `yellow-200`, Text: `yellow-800`
**Examples:** Session expiring, quota warning, maintenance scheduled

#### Info
**Visual:** Blue accent, info icon
**Use When:** Informational updates, tips, announcements
**Icon:** Info circle (blue)
**Colors:** Background: `blue-50`, Border: `blue-200`, Text: `blue-800`
**Examples:** New features available, system update, helpful tips

#### Loading
**Visual:** Spinner animation, no auto-dismiss
**Use When:** Ongoing operations with unknown duration
**Icon:** Spinner/Loading indicator
**Colors:** Default colors with spinner
**Examples:** Processing payment, uploading file, syncing data

### By Position

#### Top Positions
- **top-left:** Top-left corner (16px padding)
- **top-center:** Top center (horizontally centered)
- **top-right:** Top-right corner (16px padding)

**Use When:** Notifications related to header actions, global alerts

#### Bottom Positions (Most Common)
- **bottom-left:** Bottom-left corner (16px padding)
- **bottom-center:** Bottom center (horizontally centered)
- **bottom-right:** Bottom-right corner (16px padding) **← Default**

**Use When:** Action confirmations, status updates, general notifications

### By Duration

#### Short (2000ms)
**Use When:** Quick confirmations, non-critical info
**Examples:** "Copied to clipboard", "Item added"

#### Default (4000ms)
**Use When:** Standard notifications
**Examples:** Success messages, info updates

#### Long (7000-10000ms)
**Use When:** Errors, warnings, messages requiring reading
**Examples:** Error details, important warnings

#### Infinite (No Auto-Dismiss)
**Use When:** Critical information, loading states, requires action
**Examples:** Network disconnected, required action prompts
**Note:** Must include close button or action for dismissal

---

## Accessibility

### Keyboard Navigation

| Key | Action |
|-----|--------|
| `Tab` | Move focus to next interactive element (action button, close button) |
| `Shift + Tab` | Move focus to previous interactive element |
| `Enter` / `Space` | Activate focused button |
| `Escape` | Dismiss focused toast |

**Focus Management:**
- Toast doesn't steal focus on appear
- User can tab to toast buttons if needed
- Focus returns to original location after dismissal

### Screen Readers

**ARIA Attributes:**
```html
<!-- Info/Success Toast -->
<div
  role="status"
  aria-live="polite"
  aria-atomic="true"
>
  <div>Success notification</div>
</div>

<!-- Error/Warning Toast -->
<div
  role="alert"
  aria-live="assertive"
  aria-atomic="true"
>
  <div>Error message</div>
</div>

<!-- With Action Button -->
<div role="status">
  <div id="toast-title">Item deleted</div>
  <button aria-label="Undo deletion">Undo</button>
  <button aria-label="Close notification">×</button>
</div>
```

**Announcements:**
- Info/Success: Announced politely when convenient
- Error/Warning: Announced immediately (assertive)
- Title and description read together
- Action buttons announced as interactive

### Focus Management

- Toast doesn't trap focus
- User can ignore toast and continue work
- Tab brings focus to toast buttons
- Close/Action dismisses toast and returns focus

### Color Contrast

- **Title Text:** 4.5:1 minimum contrast (WCAG AA)
- **Description Text:** 4.5:1 minimum contrast
- **Borders:** 3:1 contrast against background
- **Icons:** Inherit text color contrast
- **Action Buttons:** Meet interactive element contrast (3:1 UI, 4.5:1 text)
- **Don't Rely on Color:** Use icons and text, not just color for variants

### Motion and Animation

- Supports `prefers-reduced-motion` - disables animations
- Slide animations are smooth and non-jarring
- No flashing or rapid movements
- Duration adjustable for reading needs

---

## Content Guidelines

### Writing Style

✅ **Do:**
- Use active voice ("Payment processed" not "Your payment has been processed")
- Keep titles under 50 characters
- Be specific ("File uploaded successfully" not "Success")
- Provide context in description
- Use action-oriented button labels ("Undo", "View details")
- Start with most important information

❌ **Don't:**
- Use vague messages ("Operation completed")
- Write long paragraphs (over 100 characters)
- Use technical jargon without explanation
- Include multiple actions (max 2)
- Use ALL CAPS for emphasis
- Hide important details in descriptions

### Message Patterns

**Success Messages:**
- "Payment processed successfully"
- "Service activated"
- "Changes saved"
- "File uploaded"
- "Account created"

**Error Messages:**
- "Payment failed - Please try again"
- "Network error - Check your connection"
- "Unable to save changes"
- "File upload failed"
- "Invalid credentials"

**Warning Messages:**
- "Session expires in 5 minutes"
- "Payment due soon"
- "Quota limit approaching"
- "Scheduled maintenance tonight"

**Info Messages:**
- "New features available"
- "System update complete"
- "Your report is ready"
- "Backup completed"

---

## Responsive Behavior

### Desktop (1024px and up)
- Position: Bottom-right or bottom-center
- Width: Fixed 380-420px
- Stack vertically with 8px gap
- Full toast functionality with hover states

### Tablet (768px - 1023px)
- Position: Bottom-center preferred
- Width: 90% of viewport (max 420px)
- Stack vertically
- Touch-optimized buttons (44px minimum)

### Mobile (under 768px)
- Position: Bottom-center or top (below header)
- Width: 95% of viewport (16px margin)
- Single column stacking
- Larger touch targets (48px minimum)
- Swipe-to-dismiss gesture enabled
- Reduced animation for performance

---

## Code Examples

### Example 1: Basic Toast Notifications

```tsx
import { toast } from 'sonner';
import { Button } from '@/components/ui/button';
import { Toaster } from '@/components/ui/sonner';

function BasicToasts() {
  return (
    <>
      <div className="flex gap-2">
        <Button onClick={() => toast('Event has been created')}>
          Default Toast
        </Button>

        <Button onClick={() => toast.success('Payment processed')}>
          Success Toast
        </Button>

        <Button onClick={() => toast.error('Failed to save changes')}>
          Error Toast
        </Button>

        <Button onClick={() => toast.warning('Session expiring soon')}>
          Warning Toast
        </Button>

        <Button onClick={() => toast.info('New features available')}>
          Info Toast
        </Button>
      </div>

      <Toaster />
    </>
  );
}
```

### Example 2: Toast with Description

```tsx
import { toast } from 'sonner';
import { Button } from '@/components/ui/button';

function ToastWithDescription() {
  const showToast = () => {
    toast.success('Service Activated', {
      description: 'Your Business Internet service is now active at 123 Main St',
    });
  };

  return <Button onClick={showToast}>Activate Service</Button>;
}
```

### Example 3: Toast with Action Button

```tsx
import { toast } from 'sonner';
import { Button } from '@/components/ui/button';

function ToastWithAction() {
  const deleteItem = () => {
    toast('Service removed', {
      description: 'Business Phone service has been removed from your account',
      action: {
        label: 'Undo',
        onClick: () => {
          console.log('Undo clicked');
          toast.success('Service restored');
        },
      },
    });
  };

  return <Button onClick={deleteItem}>Remove Service</Button>;
}
```

### Example 4: Promise Toast (Loading States)

```tsx
import { toast } from 'sonner';
import { Button } from '@/components/ui/button';

function PromiseToast() {
  const processPayment = () => {
    const promise = new Promise((resolve) => {
      setTimeout(() => resolve({ amount: 149.99 }), 3000);
    });

    toast.promise(promise, {
      loading: 'Processing payment...',
      success: (data: any) => `Payment of $${data.amount} processed successfully`,
      error: 'Payment failed - Please try again',
    });
  };

  return <Button onClick={processPayment}>Process Payment</Button>;
}
```

### Example 5: Custom Duration and Position

```tsx
import { toast } from 'sonner';
import { Button } from '@/components/ui/button';
import { Toaster } from '@/components/ui/sonner';

function CustomToast() {
  const showLongToast = () => {
    toast.error('Critical error occurred', {
      description: 'Please contact support if this problem persists',
      duration: 10000, // 10 seconds
    });
  };

  return (
    <>
      <Button onClick={showLongToast}>Show Long Error</Button>
      <Toaster position="top-center" />
    </>
  );
}
```

### Example 6: Business Use Cases

```tsx
import { toast } from 'sonner';
import { Button } from '@/components/ui/button';

function BusinessToasts() {
  const handleServiceActivation = () => {
    toast.promise(
      new Promise((resolve) => setTimeout(resolve, 2000)),
      {
        loading: 'Activating Business Internet...',
        success: 'Service activated! Your connection is now live',
        error: 'Activation failed - Please contact support',
        duration: 5000,
      }
    );
  };

  const handlePaymentSuccess = () => {
    toast.success('Payment Received', {
      description: '$149.99 charged to card ending in 4242',
      action: {
        label: 'View Receipt',
        onClick: () => console.log('Opening receipt...'),
      },
    });
  };

  const handleMaintenanceAlert = () => {
    toast.warning('Scheduled Maintenance', {
      description: 'Network maintenance tonight from 2 AM - 4 AM EST',
      duration: 8000,
      action: {
        label: 'Learn More',
        onClick: () => console.log('Opening maintenance details...'),
      },
    });
  };

  const handleServiceInterruption = () => {
    toast.error('Service Interruption Detected', {
      description: 'We are working to restore your connection',
      duration: Infinity, // Won't auto-dismiss
      action: {
        label: 'Check Status',
        onClick: () => console.log('Opening status page...'),
      },
    });
  };

  return (
    <div className="flex flex-col gap-2">
      <Button onClick={handleServiceActivation}>
        Activate Service
      </Button>
      <Button onClick={handlePaymentSuccess}>
        Process Payment
      </Button>
      <Button onClick={handleMaintenanceAlert}>
        Maintenance Alert
      </Button>
      <Button onClick={handleServiceInterruption}>
        Service Interruption
      </Button>
    </div>
  );
}
```

### Example 7: Multiple Toasts with Cancel

```tsx
import { toast } from 'sonner';
import { Button } from '@/components/ui/button';

function ToastsWithCancel() {
  const showConfirmationToast = () => {
    toast('Are you sure you want to continue?', {
      description: 'This action cannot be undone',
      action: {
        label: 'Continue',
        onClick: () => toast.success('Action confirmed'),
      },
      cancel: {
        label: 'Cancel',
        onClick: () => toast('Action cancelled'),
      },
    });
  };

  return <Button onClick={showConfirmationToast}>Show Confirmation</Button>;
}
```

---

## Related Components

- **Alert:** Inline persistent notifications
- **Banner:** Page-level announcements
- **Dialog:** Modal alerts requiring acknowledgment
- **Snackbar:** Material Design equivalent to toast
- **Notification Badge:** Persistent notification indicator

**When to Choose:**
- **Toast** → Temporary, non-blocking feedback
- **Alert** → Persistent inline messages
- **Banner** → Page-level announcements
- **Dialog** → Critical alerts requiring action
- **Badge** → Persistent notification counts

---

## Design Tokens Used

### Colors

| Token | Value | Usage |
|-------|-------|-------|
| `white` | `#FFFFFF` | Default toast background |
| `neutral-200` | `#E8E8EC` | Default border |
| `neutral-900` | `#2B2D3F` | Default text |
| `neutral-500` | `#70717D` | Description text, close button |
| `neutral-100` | `#F5F5F7` | Close button hover |
| `green-50` | `#F0FDF4` | Success background |
| `green-200` | `#BBF7D0` | Success border |
| `green-800` | `#166534` | Success text |
| `green-600` | `#16A34A` | Success icon, actions |
| `red-50` | `#FEF2F2` | Error background |
| `red-200` | `#FECACA` | Error border |
| `red-800` | `#991B1B` | Error text |
| `red-600` | `#DC2626` | Error icon, actions |
| `yellow-50` | `#FEFCE8` | Warning background |
| `yellow-200` | `#FEF08A` | Warning border |
| `yellow-800` | `#854D0E` | Warning text |
| `yellow-700` | `#A16207` | Warning icon, actions |
| `blue-50` | `#EFF6FF` | Info background |
| `blue-200` | `#BFDBFE` | Info border |
| `blue-800` | `#1E40AF` | Info text |
| `blue-600` | `#2563EB` | Info icon, actions |

### Spacing

| Token | Value | Usage |
|-------|-------|-------|
| `p-4` | `16px` | Toast padding |
| `gap-4` | `16px` | Space between icon and content |
| `mt-1` | `4px` | Description top margin |
| `p-2` | `8px` | Close button padding |

### Typography

| Token | Value | Usage |
|-------|-------|-------|
| Inter | Font family | All toast text |
| `text-sm` | `14px` | Title text |
| `text-sm` | `14px` | Description text |
| `font-medium` | `500` | Title weight |
| `leading-5` | `20px` | Title line height |
| `leading-5` | `20px` | Description line height |

### Shadows

| Token | Value | Usage |
|-------|-------|-------|
| `shadow-lg` | `0 10px 15px -3px rgba(0,0,0,0.1)` | Toast elevation |

### Border Radius

| Token | Value | Usage |
|-------|-------|-------|
| `rounded-xl` | `12px` | Toast corners |
| `rounded-lg` | `8px` | Button corners |

### Animation

| Property | Value | Usage |
|----------|-------|-------|
| `duration-300` | `300ms` | Entry/exit animations |
| `slide-in-from-bottom` | Translate Y | Bottom position entry |
| `slide-in-from-top` | Translate Y | Top position entry |
| `fade-out-80` | Opacity | Exit fade |
| `slide-out-to-right` | Translate X | Swipe dismiss |

### Dimensions

| Property | Value | Usage |
|----------|-------|-------|
| `min-h-[48px]` | `48px` | Minimum toast height |
| `max-w-md` | `448px` | Maximum toast width |
| `w-6 h-6` | `24px × 24px` | Icon size |
| `h-4 w-4` | `16px × 16px` | Close icon size |

---

## Notes

- Built on Sonner (https://sonner.emilkowal.ski/)
- Provides toast() function for programmatic display
- Auto-stacking with smart positioning
- Pause on hover built-in
- Promise support for async operations
- Swipe-to-dismiss on mobile
- Accessible by default with proper ARIA
- Maximum 5 toasts visible at once (configurable)
- Older toasts auto-dismiss when new ones appear
- Global `<Toaster />` component must be in app root
- Position can be set globally on Toaster or per-toast
- Duration in milliseconds (default: 4000ms)
- Use `duration: Infinity` for manual-dismiss-only toasts
