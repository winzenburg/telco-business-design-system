import { Meta } from '@storybook/blocks';

<Meta title="Documentation/Breadcrumb" />

# Breadcrumb

## Description

The Breadcrumb component provides a navigational aid that shows users their current location within the site hierarchy and allows them to quickly navigate back to parent pages. It displays a trail of links from the homepage to the current page, improving wayfinding and reducing clicks to reach previous levels.

**Primary Use Cases:**
- Multi-level navigation hierarchies
- E-commerce product categories
- Document management systems
- Account and settings pages
- Service configuration flows
- Support knowledge bases

**Business Context:** Breadcrumbs reduce navigation clicks by 40% and improve user orientation in complex site structures. For Comcast Business, breadcrumbs help customers navigate through Account > Services > Internet > Details or Support > Network > Troubleshooting hierarchies, reducing support calls by clarifying user location.

---

## Anatomy

The Breadcrumb component consists of the following parts:

1. **Breadcrumb** - Root `<nav>` container with `aria-label="breadcrumb"`
2. **BreadcrumbList** - Ordered list (`<ol>`) of breadcrumb items
3. **BreadcrumbItem** - Individual breadcrumb entry (`<li>`)
4. **BreadcrumbLink** - Clickable link to parent page
5. **BreadcrumbSeparator** - Visual divider between items (chevron, slash)
6. **BreadcrumbPage** - Current page (non-clickable, bold)
7. **BreadcrumbEllipsis** - Collapsed middle items for long paths

```
┌────────────────────────────────────────────────────┐
│ Home  >  Services  >  Internet  >  Details         │
│   │      │             │            └─ Current     │
│   │      │             └─ Clickable Link           │
│   │      └─ Clickable Link                         │
│   └─ Home Icon (optional)                          │
│                                                     │
│ Separator: ChevronRight (>) or Slash (/)           │
└────────────────────────────────────────────────────┘

Truncated Path:
┌────────────────────────────────────────────────────┐
│ Home  >  …  >  Internet  >  Details                │
│         └─ Ellipsis (collapsed middle items)       │
└────────────────────────────────────────────────────┘
```

---

## Usage Guidelines

### When to Use
- ✅ Multi-level hierarchies (3+ levels deep)
- ✅ E-commerce category navigation
- ✅ Account settings and service configuration
- ✅ Documentation and knowledge bases
- ✅ File system or folder structures
- ✅ Multi-step processes (with progress indicator)

### When NOT to Use
- ❌ Single-level pages (use back button)
- ❌ Linear multi-step forms (use progress stepper)
- ❌ Flat site structures (under 3 levels)
- ❌ Mobile-first designs (consider "< Back" link instead)
- ❌ When browser back button suffices

### Best Practices
- **Hierarchy:** Show complete path from home to current page
- **Current Page:** Display as non-clickable text (bold)
- **Separators:** Use chevron (>) for hierarchy, slash (/) for simpler paths
- **Home:** Include home link or icon as first item
- **Truncation:** Collapse middle items if path >4-5 levels
- **Mobile:** Show only current level with "< Back" or truncate to 2-3 items
- **Consistency:** Match site navigation structure exactly
- **Accessibility:** Proper ARIA labels and semantic HTML

---

## Behavior / Interaction States

### Link States

| State | Visual | Design Tokens | Trigger |
|-------|--------|---------------|---------|
| **Default Link** | Primary blue color | `text-[var(--ds-color-intent-primary)] font-medium` | Link to parent page |
| **Hover Link** | Darker blue | `hover:text-[var(--ds-color-intent-primary)]/80` | Mouse over link |
| **Focused Link** | Blue outline ring | `focus-visible:ring-2 ring-[var(--ds-color-intent-primary)]` | Tab navigation |
| **Current Page** | Bold, dark gray | `text-[var(--ds-color-text-primary)] font-medium` | Non-clickable |

### Component States

| Element | Visual | Design Tokens |
|---------|--------|---------------|
| **Separator** | Light gray icon | `text-[var(--ds-color-neutral-300)]` ChevronRight |
| **Ellipsis** | Clickable menu | `MoreHorizontal` icon, opens dropdown |
| **Home Icon** | Optional first item | Home icon + "Home" or icon-only |

---

## Variants

### 1. Default / Standard Breadcrumb
Standard chevron separators with text links.
- **Separator:** ChevronRight (>)
- **Use for:** Most hierarchical navigation
- **Example:** Home > Services > Internet > Details

### 2. Slash Separator
Forward slash instead of chevron for simpler, more compact look.
- **Separator:** "/" character
- **Use for:** Less formal contexts, tighter spacing
- **Example:** Home / Services / Internet / Details

### 3. With Home Icon
Home icon replaces or accompanies "Home" text.
- **Icon:** Home icon (16px)
- **Options:** Icon-only or icon + "Home"
- **Use for:** Visual clarity, international audiences

### 4. Truncated / Collapsed
Ellipsis menu for long paths (>4-5 levels).
- **Pattern:** Home > … > Parent > Current
- **Interaction:** Click ellipsis to expand hidden items
- **Use for:** Deep hierarchies

### 5. Mobile Compact
Simplified breadcrumb for small screens.
- **Pattern:** "< Back to [Parent]" or "> Current" only
- **Alternative:** Show first, last, and ellipsis
- **Use for:** Mobile responsive designs

### 6. With Icons
Icons before each breadcrumb label.
- **Icons:** Category-specific icons (16px)
- **Use for:** Visual categorization, dashboards

### 7. Dropdown Menu
Clickable items that open submenus.
- **Interaction:** Click item to see siblings
- **Use for:** Complex navigation with many options per level

---

## Positions / Alignment

### Top of Page (Standard)
- **Location:** Below header, above page title
- **Spacing:** 16-24px below header, 16px above title
- **Use for:** Most pages

### Below Page Title
- **Location:** Under main heading
- **Spacing:** 8-12px below title
- **Use for:** Articles, documentation

### Sticky Header
- **Location:** Fixed to top on scroll
- **Behavior:** Always visible
- **Use for:** Long pages with complex navigation

---

## Responsive Behavior

### Desktop (>= 1024px)
- **Display:** Full breadcrumb path (all levels)
- **Truncation:** After 5+ levels
- **Spacing:** Comfortable gaps between items

### Tablet (768px - 1023px)
- **Display:** Full path or truncate after 4 levels
- **Pattern:** Home > … > Parent > Current
- **Spacing:** Slightly reduced

### Mobile (< 768px)
- **Option 1:** "< Back to [Parent]" link
- **Option 2:** Current page only with back arrow
- **Option 3:** Home > Current (2 items max)
- **Rationale:** Limited screen space, back button preferred

### Example: Responsive Breadcrumb
```typescript
// Desktop
<Breadcrumb>
  <BreadcrumbList>
    <BreadcrumbItem>
      <BreadcrumbLink href="/">Home</BreadcrumbLink>
    </BreadcrumbItem>
    <BreadcrumbSeparator />
    <BreadcrumbItem>
      <BreadcrumbLink href="/services">Services</BreadcrumbLink>
    </BreadcrumbItem>
    <BreadcrumbSeparator />
    <BreadcrumbItem>
      <BreadcrumbLink href="/services/internet">Internet</BreadcrumbLink>
    </BreadcrumbItem>
    <BreadcrumbSeparator />
    <BreadcrumbItem>
      <BreadcrumbPage>Details</BreadcrumbPage>
    </BreadcrumbItem>
  </BreadcrumbList>
</Breadcrumb>

// Mobile
<button onClick={() => navigate(-1)} className="flex items-center gap-2 text-primary-600">
  <ChevronLeft className="h-4 w-4" />
  Back to Internet
</button>
```

---

## Accessibility

### Keyboard Navigation
- **Tab:** Move focus between breadcrumb links
- **Shift + Tab:** Move focus backward
- **Enter / Space:** Activate focused link
- **Escape:** Close ellipsis dropdown (if open)

### Screen Readers
- **Landmark:** `<nav aria-label="breadcrumb">` identifies navigation
- **List Structure:** `<ol>` announces "list of X items"
- **Current Page:** `aria-current="page"` on current page
- **Separator:** `aria-hidden="true"` on separator icons
- **Announcements:** "Breadcrumb navigation. Home, link. Services, link. Internet, current page"

### Focus Management
- **Visible Focus:** Blue ring on focused links
- **Focus Order:** Left-to-right through links
- **Skip Links:** Not required (breadcrumbs are brief)

### Color Contrast
- **Links:** Blue text on white (AA compliant)
- **Current Page:** Dark gray on white (AA compliant)
- **Separators:** Light gray (decorative, not content)

### Additional Considerations
- **Text Alternatives:** Icon-only items need labels
- **Ellipsis Menu:** Keyboard accessible with proper ARIA
- **Mobile Back:** Standard button with accessible label

---

## Content Guidelines

### Breadcrumb Labels
✅ **Do:**
- Use clear, concise labels (1-2 words)
- Match exact navigation labels
- Title case for each item
- Singular nouns ("Service" not "Services")
- Specific page names ("Internet Details")

❌ **Don't:**
- Use full page titles (too long)
- Abbreviate unless universally understood
- Use URLs or technical terms
- Mix naming conventions
- Exceed 25 characters per label

### Path Construction
✅ **Do:**
- Start with "Home" or home icon
- Follow actual site hierarchy
- Include all significant levels
- End with current page (non-clickable)
- Truncate gracefully if >5 levels

❌ **Don't:**
- Skip intermediate levels
- Include redundant items
- Show steps in linear processes
- Display dynamic IDs (use descriptive names)

---

## Code Examples

### Basic Breadcrumb with Chevron Separator
```typescript
<Breadcrumb>
  <BreadcrumbList>
    <BreadcrumbItem>
      <BreadcrumbLink href="/">Home</BreadcrumbLink>
    </BreadcrumbItem>
    <BreadcrumbSeparator />
    <BreadcrumbItem>
      <BreadcrumbLink href="/services">Services</BreadcrumbLink>
    </BreadcrumbItem>
    <BreadcrumbSeparator />
    <BreadcrumbItem>
      <BreadcrumbPage>Internet</BreadcrumbPage>
    </BreadcrumbItem>
  </BreadcrumbList>
</Breadcrumb>
```

### With Home Icon
```typescript
<Breadcrumb>
  <BreadcrumbList>
    <BreadcrumbItem>
      <BreadcrumbLink href="/" className="flex items-center gap-1">
        <Home className="h-4 w-4" />
        Home
      </BreadcrumbLink>
    </BreadcrumbItem>
    <BreadcrumbSeparator />
    <BreadcrumbItem>
      <BreadcrumbLink href="/account">Account</BreadcrumbLink>
    </BreadcrumbItem>
    <BreadcrumbSeparator />
    <BreadcrumbItem>
      <BreadcrumbPage>Settings</BreadcrumbPage>
    </BreadcrumbItem>
  </BreadcrumbList>
</Breadcrumb>
```

### With Slash Separator
```typescript
<Breadcrumb>
  <BreadcrumbList>
    <BreadcrumbItem>
      <BreadcrumbLink href="/">Home</BreadcrumbLink>
    </BreadcrumbItem>
    <BreadcrumbSeparator>
      <span>/</span>
    </BreadcrumbSeparator>
    <BreadcrumbItem>
      <BreadcrumbLink href="/docs">Documentation</BreadcrumbLink>
    </BreadcrumbItem>
    <BreadcrumbSeparator>
      <span>/</span>
    </BreadcrumbSeparator>
    <BreadcrumbItem>
      <BreadcrumbPage>Components</BreadcrumbPage>
    </BreadcrumbItem>
  </BreadcrumbList>
</Breadcrumb>
```

### Truncated with Ellipsis
```typescript
<Breadcrumb>
  <BreadcrumbList>
    <BreadcrumbItem>
      <BreadcrumbLink href="/">Home</BreadcrumbLink>
    </BreadcrumbItem>
    <BreadcrumbSeparator />
    <BreadcrumbItem>
      <DropdownMenu>
        <DropdownMenuTrigger>
          <BreadcrumbEllipsis />
        </DropdownMenuTrigger>
        <DropdownMenuContent>
          <DropdownMenuItem>
            <Link href="/account">Account</Link>
          </DropdownMenuItem>
          <DropdownMenuItem>
            <Link href="/account/services">Services</Link>
          </DropdownMenuItem>
        </DropdownMenuContent>
      </DropdownMenu>
    </BreadcrumbItem>
    <BreadcrumbSeparator />
    <BreadcrumbItem>
      <BreadcrumbLink href="/account/services/internet">Internet</BreadcrumbLink>
    </BreadcrumbItem>
    <BreadcrumbSeparator />
    <BreadcrumbItem>
      <BreadcrumbPage>Configuration</BreadcrumbPage>
    </BreadcrumbItem>
  </BreadcrumbList>
</Breadcrumb>
```

### Responsive: Mobile Back Button
```typescript
// Desktop breadcrumb (hidden on mobile)
<nav className="hidden md:block" aria-label="breadcrumb">
  <Breadcrumb>{/* Full breadcrumb */}</Breadcrumb>
</nav>

// Mobile back button
<button
  onClick={() => router.back()}
  className="md:hidden flex items-center gap-2 text-primary-600 hover:text-primary-700 font-medium"
>
  <ChevronLeft className="h-4 w-4" />
  Back to Services
</button>
```

### Dynamic Breadcrumb from Route
```typescript
const generateBreadcrumbs = (pathname: string) => {
  const segments = pathname.split('/').filter(Boolean);

  return segments.map((segment, index) => {
    const href = '/' + segments.slice(0, index + 1).join('/');
    const label = segment.charAt(0).toUpperCase() + segment.slice(1).replace(/-/g, ' ');
    const isLast = index === segments.length - 1;

    return { href, label, isLast };
  });
};

const breadcrumbs = [{ href: '/', label: 'Home', isLast: false }, ...generateBreadcrumbs(pathname)];

<Breadcrumb>
  <BreadcrumbList>
    {breadcrumbs.map((crumb, index) => (
      <React.Fragment key={crumb.href}>
        {index > 0 && <BreadcrumbSeparator />}
        <BreadcrumbItem>
          {crumb.isLast ? (
            <BreadcrumbPage>{crumb.label}</BreadcrumbPage>
          ) : (
            <BreadcrumbLink href={crumb.href}>{crumb.label}</BreadcrumbLink>
          )}
        </BreadcrumbItem>
      </React.Fragment>
    ))}
  </BreadcrumbList>
</Breadcrumb>
```

### With Icons per Item
```typescript
const breadcrumbData = [
  { href: '/', label: 'Dashboard', icon: Home },
  { href: '/network', label: 'Network', icon: Wifi },
  { href: '/network/devices', label: 'Devices', icon: Server },
  { label: 'Router Settings', icon: Settings, isLast: true }
];

<Breadcrumb>
  <BreadcrumbList>
    {breadcrumbData.map((item, index) => (
      <React.Fragment key={index}>
        {index > 0 && <BreadcrumbSeparator />}
        <BreadcrumbItem>
          {item.isLast ? (
            <BreadcrumbPage className="flex items-center gap-1.5">
              <item.icon className="h-4 w-4" />
              {item.label}
            </BreadcrumbPage>
          ) : (
            <BreadcrumbLink href={item.href} className="flex items-center gap-1.5">
              <item.icon className="h-4 w-4" />
              {item.label}
            </BreadcrumbLink>
          )}
        </BreadcrumbItem>
      </React.Fragment>
    ))}
  </BreadcrumbList>
</Breadcrumb>
```

---

## Related Components

- **Navigation:** Main site navigation hierarchy
- **Tabs:** Alternative for same-level content switching
- **Button (Back):** Simple back navigation for mobile
- **Dropdown Menu:** For ellipsis collapsed items
- **Progress Stepper:** For linear multi-step processes

---

## Design Tokens Used

| Token | Value | Usage |
|-------|-------|-------|
| **Colors** | | |
| `--ds-color-intent-primary` | #0D62FF | Link text color (default) |
| `--ds-color-intent-primary)/80` | rgba(13, 98, 255, 0.8) | Link hover state |
| `--ds-color-text-primary` | neutral-900 | Current page text (bold) |
| `--ds-color-text-muted` | neutral-600 | Breadcrumb list text |
| `--ds-color-neutral-300` | #DDDDE2 | Separator icon color |
| **Typography** | | |
| `font-primary` | Inter | Not used (secondary preferred) |
| `font-secondary` | Inter | All breadcrumb text |
| `font-medium` | 500 | Link and current page weight |
| `text-sm` | 14px | Standard breadcrumb text size |
| **Spacing** | | |
| `gap-1.5` | 6px | Gap between icon and text |
| `gap-2.5` | 10px | Gap between breadcrumb items (desktop) |
| `gap-1.5` | 6px | Gap between items (mobile) |
| `mb-4` | 16px | Margin below breadcrumb |
| **Icons** | | |
| `size-3.5` | 14px | Separator icon size |
| `h-4 w-4` | 16px | Item icons (home, category) |
| `h-9 w-9` | 36px | Ellipsis clickable area |
| **Focus Ring** | | |
| `ring-2` | 2px | Focus ring width |
| `ring-[var(--ds-color-intent-primary)]` | Blue | Focus ring color |
| `ring-offset-2` | 2px | Focus ring offset |
| **Transitions** | | |
| `transition-colors` | 150ms ease | Link hover effect |
